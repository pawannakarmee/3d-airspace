(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=e(n);fetch(n.href,l)}})();const gt="modulepreload",pt=function(o,t){return new URL(o,t).href},Ye={},ke=function(t,e,i){let n=Promise.resolve();if(e&&e.length>0){let u=function(O){return Promise.all(O.map(E=>Promise.resolve(E).then(M=>({status:"fulfilled",value:M}),M=>({status:"rejected",reason:M}))))};const s=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),A=c?.nonce||c?.getAttribute("nonce");n=u(e.map(O=>{if(O=pt(O,i),O in Ye)return;Ye[O]=!0;const E=O.endsWith(".css"),M=E?'[rel="stylesheet"]':"";if(i)for(let N=s.length-1;N>=0;N--){const T=s[N];if(T.href===O&&(!E||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${O}"]${M}`))return;const p=document.createElement("link");if(p.rel=E?"stylesheet":gt,E||(p.as="script"),p.crossOrigin="",p.href=O,A&&p.setAttribute("nonce",A),document.head.appendChild(p),E)return new Promise((N,T)=>{p.addEventListener("load",N),p.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${O}`)))})}))}function l(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return n.then(s=>{for(const c of s||[])c.status==="rejected"&&l(c.reason);return t().catch(l)})},a={mode:"2d",zScale:3,layers:{mapLayersMaster:!0,baseMap:!1,airspace:!0,sectors:!0,airways:!0,runways:!0,fixes:!0,fixNames:!0,holdings:!1,freq:!1,awyLabels:!1,sectorColors:!1,sectorBorders:!1,sectorOpacity:.2},layers3d:{imagery:"osm",terrain:!0,lighting:!1,fog:!1},selectedSectorCodes:new Set,routeFilter:"All",selectedRouteKey:null,multiRouteAddMode:!1,route3dProfilesByKey:{},route3dProfile:null,currentRouteFirstFix:null};function v(o){if(o==null)return null;if(typeof o=="number"&&Number.isFinite(o))return o;const t=String(o).trim();if(!t)return null;if(/^[+-]?\d+(\.\d+)?$/.test(t)){const y=parseFloat(t);return Number.isFinite(y)?y:null}let e="",i=t.toUpperCase();const n=i.match(/^([NSEW])\s*(.+)$/);if(n)e=n[1],i=n[2].trim();else{const y=i.match(/^(.+?)\s*([NSEW])$/);y&&(i=y[1].trim(),e=y[2])}const s=i.replace(/[^\d.]/g,"").split("."),c=s[0]||"",A=s[1]||"";if(c.length<6)return null;const O=c.length>=7?3:2,E=c.slice(0,O),M=c.slice(O,O+2),p=c.slice(O+2,O+4);if(E.length!==O||M.length!==2||p.length!==2)return null;let N=parseInt(E,10),T=parseInt(M,10),g=parseFloat(p+(A?"."+A:""));if(![N,T,g].every(y=>Number.isFinite(y))||(g>=60&&(T+=Math.floor(g/60),g=g%60),T>=60&&(N+=Math.floor(T/60),T=T%60),T<0||T>=60||g<0||g>=60))return null;let h=N+T/60+g/3600;if((e==="S"||e==="W")&&(h=-h),e==="N"||e==="S"){if(Math.abs(h)>90)return null}else if((e==="E"||e==="W")&&Math.abs(h)>180)return null;return h}function Ke(o){if(o==null)return null;if(typeof o=="object"&&!Array.isArray(o)){const t=o.lat??o.latitude,e=o.lon??o.lng??o.longitude,i=v(t),n=v(e);return i==null||n==null?null:[i,n]}if(Array.isArray(o)&&o.length>=2){const t=v(o[0]),e=v(o[1]);return t==null||e==null?null:Math.abs(t)>90&&Math.abs(e)<=90?[e,t]:[t,e]}return null}function He({lat:o,lon:t,inboundHeadingDeg:e,legLengthNm:i=10,turn:n="Right",turnRadiusNm:l=2,arcSteps:s=20}){if(!Number.isFinite(o)||!Number.isFinite(t)||!Number.isFinite(e))return null;const c=1/60,A=(P,B)=>P/(60*Math.cos(B*Math.PI/180)),u=(e+180)%360,O=u*Math.PI/180,E=String(n).toLowerCase()==="right",M=E?1:-1,p=(P,B,b,G,U)=>{const D=[],F=Math.PI/s*G;for(let _=0;_<=s;_++){const X=b+_*F,$=Math.sin(X)*U,W=Math.cos(X)*U,J=P+W*c,Y=B+A($,P);D.push({lat:J,lon:Y})}return D},N=E?90:-90,g=(e+N)*Math.PI/180,h=Math.cos(g)*l,y=Math.sin(g)*l,w=o+h*c,f=t+A(y,o),R=g+Math.PI,K=p(w,f,R,M,l),V=K[K.length-1],k=Math.cos(O)*i,x=Math.sin(O)*i,H=V.lat+k*c,j=V.lon+A(x,V.lat),q={lat:H,lon:j},ee=(u+N)*Math.PI/180,ge=Math.cos(ee)*l,Be=Math.sin(ee)*l,Ne=q.lat+ge*c,pe=q.lon+A(Be,q.lat),ce=ee+Math.PI,he=p(Ne,pe,ce,M,l),r=[...K,q,...he.slice(1),{lat:o,lon:t}],d={lat:(V.lat+q.lat)/2,lon:(V.lon+q.lon)/2},m=he[he.length-1],C={lat:(m.lat+o)/2,lon:(m.lon+t)/2};return{fix:{lat:o,lon:t},inboundHeadingDeg:e,outboundHeadingDeg:u,turn:E?"Right":"Left",legLengthNm:i,turnRadiusNm:l,path:r,midOutbound:d,midInbound:C}}function Fe(o){const t=String(o||"").trim().toUpperCase();if(!t)return null;if(t==="GND"||t==="SFC"||t==="SURFACE")return 0;if(t.startsWith("A")&&/^\d+$/.test(t.slice(1))||t.startsWith("F")&&/^\d+$/.test(t.slice(1)))return parseInt(t.slice(1),10)*100;if(t.startsWith("FL")&&/^\d+$/.test(t.slice(2)))return parseInt(t.slice(2),10)*100;const e=t.match(/^(\d+)\s*(FT)?$/);return e?parseInt(e[1],10):null}function Ve(o){return(Number(o)||0)*.3048}function et(o,t){const e=Fe(o),i=Fe(t);if(e==null||i==null)return null;const n=Ve(e),l=Ve(i),s=Math.max(0,Math.min(n,l)),c=Math.max(s+1,Math.max(n,l));return{floorM:s,ceilM:c,midM:(s+c)/2}}const We=Object.freeze(Object.defineProperty({__proto__:null,computeHoldingRacetrack:He,convertDMSToDecimal:v,coordToLatLon:Ke,feetToMeters:Ve,parseAltTokenToFeet:Fe,parseFloorCeilingToMeters:et},Symbol.toStringTag,{value:"Module"})),Re=[["262100N","0560600E"],["253600N","0561300E"],["250000N","0563500E"],["240000N","0553500E"],["224200N","0551200E"],["223556N","0551544E"],["225600N","0523501E"],["240300N","0514700E"],["254900N","0530600E"],["260400N","0535700E"],["253800N","0552000E"],["262100N","0560600E"]],Rt=[["252629.4279N","0524901.1237E"],["251727.2300N","0531010.5921E"],["251028.0206N","0532257.8798E"],["245849.4608N","0534229.3001E"],["250412.9847N","0535018.1858E"],["245723.3151N","0540231.4151E"],["245234.9377N","0540545.5866E"],["245033.3087N","0541052.3203E"],["250339.4072N","0544513.1108E"],["244618.3182N","0552117.0064E"],["244334.4990N","0551013.7592E"],["243913.4400N","0545229.7502E"],["242300.0058N","0541138.5536E"],["242716.7810N","0535734.9107E"],["243600.0000N","0531800.0000E"],["244600.0000N","0523759.9999E"],["244600.0000N","0522959.9999E"],["244744.3023N","0522002.9275E"],["251037.0000N","0523706.9999E"],["252629.4279N","0524901.1237E"]],Dt=[["242716.7810N","0535734.9107E"],["243600.0000N","0531800.0000E"],["244600.0000N","0523759.9999E"],["244600.0000N","0522959.9999E"],["244744.3023N","0522002.9275E"],["240300.0000N","0514659.9997E"],["225600.0000N","0523500.0000E"],["223556.5997N","0551544.6472E"],["224200.0000N","0551200.0000E"],["234428.0000N","0553023.0000E"],["234730.0000N","0552312.0000E"],["240000.0000N","0550000.0000E"],["241035.8675N","0544416.6401E"],["241520.9775N","0543711.8410E"],["241930.0000N","0543100.0000E"],["241805.0000N","0542246.0000E"],["242300.0058N","0541138.5536E"],["242716.7810N","0535734.9107E"]],mt=[["244618.3182N","0552117.0064E"],["244334.4990N","0551013.7592E"],["243913.4400N","0545229.7502E"],["242300.0058N","0541138.5536E"],["241805.0000N","0542246.0000E"],["241930.0000N","0543100.0000E"],["241520.9775N","0543711.8410E"],["241035.8675N","0544416.6401E"],["240000.0000N","0550000.0000E"],["234730.0000N","0552312.0000E"],["234428.0000N","0553023.0000E"],["240000.0000N","0553500.0000E"],["242638.0000N","0560135.0000E"],["244618.3182N","0552117.0064E"]],St=[["251727.2300N","0531010.5921E"],["251028.0206N","0532257.8798E"],["244707.3259N","0540157.3156E"],["243848.6795N","0542254.4400E"],["242300.0058N","0541138.5536E"],["242716.7810N","0535734.9107E"],["243600.0000N","0531800.0000E"],["243820.9309N","0530840.8314E"],["245649.9309N","0531415.2342E"],["250230.4394N","0530516.3033E"],["251037.0000N","0523706.9999E"],["251727.2300N","0531010.5921E"]],yt=[["242638.0000N","0560135.0000E"],["240000.0000N","0553500.0000E"],["230227.0000N","0551800.0000E"],["230318.0000N","0551327.0000E"],["234730.0000N","0552312.0000E"],["240000.0000N","0550000.0000E"],["241035.8675N","0544416.6401E"],["241520.9775N","0543711.8410E"],["243913.4400N","0545229.7502E"],["244334.4990N","0551013.7592E"],["242638.0000N","0560135.0000E"]],It=[["260400.0000N","0535700.0000E"],["254517.0000N","0545647.0000E"],["263406.0000N","0541800.0000E"],["264554.0000N","0543610.0000E"],["254331.0000N","0552600.0000E"],["253800.0000N","0552000.0000E"],["254135.8064N","0550842.3936E"],["252355.0000N","0545522.0000E"],["252814.0965N","0543904.4502E"],["254332.2605N","0535708.1354E"],["255450.0000N","0532541.0000E"],["260400.0000N","0535700.0000E"]],Ut=[["254135.8064N","0550842.3936E"],["253800.0000N","0552000.0000E"],["262100.0000N","0560600.0000E"],["253600.0000N","0561300.0000E"],["252826.6958N","0561738.3041E"],["252808.0000N","0563613.0000E"],["250804.1040N","0563547.0022E"],["250810.0000N","0563002.0000E"],["250000.0000N","0563500.0000E"],["245608.0000N","0563113.0000E"],["244218.0000N","0565415.0000E"],["242218.0000N","0563418.0000E"],["243844.0000N","0561342.0000E"],["242638.0000N","0560135.0000E"],["250339.4072N","0544513.1108E"],["252355.0000N","0545522.0000E"],["254135.8064N","0550842.3936E"]],Bt=[["255450.0000N","0532541.0000E"],["260400.0000N","0535700.0000E"],["254135.8064N","0550842.3936E"],["252355.0000N","0545522.0000E"],["252814.0965N","0543904.4502E"],["254332.2605N","0535708.1354E"],["255450.0000N","0532541.0000E"]],wt=[["255450.0000N","0532541.0000E"],["254332.2605N","0535708.1354E"],["252814.0965N","0543904.4502E"],["252355.0000N","0545522.0000E"],["250339.4072N","0544513.1108E"],["245033.3087N","0541052.3203E"],["245234.9377N","0540545.5866E"],["245723.3151N","0540231.4151E"],["250412.9847N","0535018.1858E"],["245849.4608N","0534229.3001E"],["251028.0206N","0532257.8798E"],["251727.2300N","0531010.5921E"],["252629.4279N","0524901.1237E"],["254900.0000N","0530600.0000E"],["255450.0000N","0532541.0000E"]],Pt=[["254332.2605N","0535708.1354E"],["252814.0965N","0543904.4502E"],["252355.0000N","0545522.0000E"],["250548.0528N","0544617.3882E"],["250339.4072N","0544513.1108E"],["250118.4318N","0543901.6006E"],["243848.6795N","0542254.4400E"],["244707.3259N","0540157.3156E"],["251028.0206N","0532257.8798E"],["252535.0905N","0533458.4084E"],["254332.2605N","0535708.1354E"]],Ct=[["254135.8064N","0550842.3936E"],["253800.0000N","0552000.0000E"],["251430.0000N","0553449.0000E"],["245614.2304N","0552015.9927E"],["244334.4990N","0551013.7592E"],["243913.4400N","0545229.7502E"],["241520.9775N","0543711.8410E"],["241930.0000N","0543100.0000E"],["241805.0000N","0542246.0000E"],["242300.0058N","0541138.5536E"],["243848.6795N","0542254.4400E"],["250118.4318N","0543901.6006E"],["250339.4072N","0544513.1108E"],["250548.0528N","0544617.3882E"],["252355.0000N","0545522.0000E"],["254135.8064N","0550842.3936E"]],vt=[["243844.0000N","0561342.0000E"],["242638.0000N","0560135.0000E"],["244334.4990N","0551013.7592E"],["245614.2304N","0552015.9927E"],["251430.0000N","0553449.0000E"],["251050.5564N","0560704.8139E"],["250810.0511N","0563001.9833E"],["250000.0000N","0563500.0000E"],["245608.0000N","0563113.0000E"],["244218.0000N","0565415.0000E"],["242218.0000N","0563418.0000E"],["243844.0000N","0561342.0000E"]],bt=[["250810.0000N","0563002.0000E"],["250006.2648N","0563505.7475E"],["245608.0000N","0563113.0000E"],["244913.4524N","0564244.6367E"],["243031.3688N","0562400.6678E"],["243844.0000N","0561342.0000E"],["244617.8166N","0555938.9015E"],["250141.0000N","0555700.0000E"],["250811.8360N","0555918.3100E"],["251050.5564N","0560704.8139E"],["251546.8257N","0560815.8996E"],["250810.0000N","0563002.0000E"]],Kt=[["253800.0000N","0552000.0000E"],["262100.0000N","0560600.0000E"],["253600.0000N","0561300.0000E"],["252826.6958N","0561738.3041E"],["252808.0000N","0563613.0000E"],["250804.1040N","0563547.0022E"],["250810.0000N","0563002.0000E"],["251050.5564N","0560704.8139E"],["251050.5564N","0560704.8139E"],["251430.0000N","0553449.0000E"],["253800.0000N","0552000.0000E"]],Ft=[["251037.00N","0523707.00E"],["252629.44N","0524901.14E"],["251727.27N","0531010.58E"],["251037.00N","0523707.00E"]],Je={S:{name:"ACCS",coords:Rt,color:"#3b9cdd",label:["245110.45N","0525951.89E"]},L:{name:"ACCL",coords:Dt,color:"#c689ff",label:["235606.37N","0534706.36E"]},B:{name:"ACCB",coords:mt,color:"#E6B43E",label:["242709.99N","0552646.12E"]},G:{name:"ACCG",coords:St,color:"#E0E63E",label:["245024.97N","0533029.73E"]},A:{name:"ACCA",coords:yt,color:"#de64e2",label:["241634.49N","0545751.99E"]},N:{name:"ACCN",coords:It,color:"#C8D66B",label:["260037.33N","0540542.58E"]},M:{name:"ACCM",coords:Ut,color:"#7259ff",label:["251447.71N","0553434.53E"]},W:{name:"ACCW",coords:Bt,color:"#fca17e",label:["254634.55N","0542249.11E"]},C:{name:"ACCC",coords:wt,color:"#E63E87",label:["253248.09N","0532640.51E"]},D:{name:"ACCD",coords:Pt,color:"#62dac6",label:["251250.51N","0541340.96E"]},H:{name:"ACCH",coords:Ct,color:"#CADAE0",label:["250340.15N","0545612.33E"]},E:{name:"ACCE",coords:vt,color:"#47D1B0",label:["245325.82N","0554642.07E"]},Y:{name:"ACCY",coords:bt,color:"#BAB257",label:["245635.63N","0561226.84E"]},R:{name:"ACCR",coords:Kt,color:"#E478D7",label:["253905.58N","0555041.26E"]},K:{name:"kBOX",coords:Ft,color:"#E63E87",label:["",""]}},tt=[{sector:"SOUTH",limit:"GND - F600",freq:"128.250"},{sector:"LIMA",limit:"GND - F600",freq:"125.925"},{sector:"BRAVO",limit:"GND - F600",freq:"119.325"},{sector:"NORTH",limit:"GND - F600",freq:"132.150"},{sector:"MIKE",limit:"GND - F600",freq:"132.550"},{sector:"CENTRAL",limit:"GND - F600",freq:"124.375"},{sector:"DELTA",limit:"GND - F255",freq:"120.900"},{sector:"HOTEL",limit:"GND - F255",freq:"128.125"},{sector:"ALPHA",limit:"GND - F255",freq:"129.500"},{sector:"EAST",limit:"GND - F255",freq:"125.375"},{sector:"ROMEO",limit:"GND - F255",freq:"124.850"},{sector:"KBOX",limit:"GND - F245",freq:"124.375"},{sector:"GOLF",limit:"GND - F245",freq:"120.525"},{sector:"WEST",limit:"GND - F245",freq:"119.300"},{sector:"YANKEE",limit:"A095 - F195",freq:"118.925"}],Q={ADV:["242508.3N","0544023.7E"],ALGUX:["242247N","0541209E"],ALKAN:["255224N","0521625E"],ALNEV:["244601N","0534122E"],ALPOB:["254218N","0530055E"],ALRAR:["254058.2N","0550149.4E"],ALSEM:["252705N","0524336E"],ALSIL:["252911.1N","0554639.4E"],AMBOV:["253439N","0543512E"],AMBOV:["253439N","0543512E"],ANVIX:["244655.0N","0555616.0E"],ASNAX:["245659N","0524054E"],ASNEK:["255630.7N","0554904.7E"],ASNIB:["243982N","0572109E"],ASPAK:["262115.49N","0522257E"],ASPED:["240036N","0553154E"],ASRAT:["242114N","0535944E"],ASTOG:["252822N","0525025E"],ATUDO:["241708.0N","0543432.0E"],BAH:["261625N","0503801E"],BND:["271182N","0562201E"],BONAN:["260200.60N","0515505.41E"],BOPEK:["230138.20N","0520012.57E"],BOPIT:["235947N","0540404E"],BOPOV:["262429.69N","0515043.17E"],BOSEV:["245013.3N","0540448.8E"],BOTAM:["240245N","0565333E"],BOXOT:["251039N","0531817E"],BUBAS:["245964N","0570004E"],BUNDU:["250024N","0522924E"],DANOK:["234220N","0533111E"],DANUX:["223608N","0541596E"],DAPER:["254536N","0545751E"],DAPOK:["235994N","0572999E"],DASLO:["254562N","0523048E"],DATOB:["253053.0N","0544656.9E"],DATUT:["263354N","0533563E"],DAVMO:["255127.0N","0553900.0E"],DAXIB:["245446.5N","0540901.1E"],DEGNU:["242757N","0570622E"],DEGSO:["261060.39N","0531960.17E"],DENSA:["263197N","0542933E"],DESVU:["242222N","0554253E"],DETGU:["252623.9N","0553604.6E"],DIXAM:["254151N","0543557E"],DOH:["251500N","0513658E"],DXB:["251517N","0552187E"],EGMIT:["263367N","0530842E"],EGPEP:["255746.8N","0555822.5E"],EGPOG:["244727N","0531950E"],EGROK:["235289N","0560144E"],EGROP:["245211N","0543625E"],EGTAG:["250856N","0545652E"],ELEPO:["243211N","0544410E"],ELIGA:["242121N","0530148E"],ELIRA:["262109N","0534504E"],ELOBI:["250782N","0521760E"],ELOVU:["245721.3N","0542017.5E"],ELUDA:["235107N","0552905E"],EMATA:["242315N","0565734E"],EMERU:["244829.0N","0550303.0E"],EMISA:["254658.35N","0514206.60E"],EMIXI:["242105N","0520019E"],EMOPI:["252620.0N","0560900.0E"],EMOTA:["255254N","0542414E"],ENANO:["252360.2N","0522560.38E"],ENEGA:["250556N","0560601E"],ESROM:["232424N","0525729E"],FJV:["250602.6N","0562116.4E"],GABKO:["260404N","0554755E"],GERAR:["240601N","0573628E"],GERUL:["250001.4N","0542644.4E"],GEVIV:["244118N","0545000E"],GEXAN:["241295N","0565681E"],GIBIB:["255507N","0541712E"],GIDIL:["251770N","0564939E"],GIDIS:["243600.0N","0555600.0E"],GIDOB:["244445.3N","0535952.6E"],GISMO:["244743N","0562236E"],GODKI:["254122N","0534347E"],GOGMI:["230226N","0553198E"],GOLGU:["231051N","0523109E"],GOLPA:["242330.0N","0535854.0E"],GOMTA:["251115N","0563447E"],GONVI:["254239.8N","0545630.5E"],IMGOV:["221846N","0533640E"],IMGUX:["252950N","0531428E"],IMKUD:["241513N","0535956E"],IMLIP:["243648N","0543549E"],IMLOT:["251714N","0570806E"],IMPED:["245824.5N","0560406.2E"],ITBON:["251426N","0555257E"],ITBUL:["254910N","0541227E"],ITKEV:["250104N","0534526E"],ITKUN:["223751N","0553956E"],ITLAP:["254925N","0555010E"],ITMUB:["255932N","0522404E"],ITOMI:["250152N","0541151E"],ITRAX:["241248.0N","0554749.0E"],IVOXI:["251239.6N","0552513.1E"],IVURO:["251940N","0560915E"],KANIP:["241040.0N","0552042.0E"],KAPAX:["254229N","0515131E"],KAPUM:["245815N","0533450E"],KATUS:["251599N","0574701E"],KATIT:["224928N","0522923E"],KAXOB:["245423N","0532450E"],KHM:["264578N","0555446E"],KIPOK:["243611N","0560719E"],KIROP:["243000.00N","0574700.00E"],KIS:["263151N","0535774E"],KIVUS:["254522N","0540032E"],KOBIM:["233315N","0562702E"],KUGTO:["243231N","0542224E"],KULBA:["251326N","0560153E"],KUMLA:["262615N","0520837E"],KUMSI:["245050N","0523619E"],KUMUN:["254000N","0551512E"],KUPMA:["245148N","0562648E"],KUPRO:["250805N","0523513E"],KUPSA:["250475N","0521186E"],KURTA:["234209N","0554901E"],KURTU:["252211N","0554625E"],KUSBA:["251634N","0532847E"],KUSEN:["251828.0N","0562340.0E"],KUTLI:["245151.3N","0545618.0E"],KUVDA:["244309N","0543909E"],LABOP:["261912N","520449E"],LABRI:["240344.0N","0553842.0E"],LABSA:["230189N","0555509E"],LAGTA:["250602N","0553315E"],LAKLU:["232259N","0570402E"],LALDO:["251806N","0563600E"],LEVNA:["261901N","0533320E"],LONUT:["241520N","0530149E"],LORID:["245552.5N","0543904.1E"],LOVEM:["252645.4N","0551440.4E"],LUBAT:["250223N","0561749E"],LUDAM:["255508N","0535859E"],LUDID:["230227N","0551800E"],LVA:["264799N","0532317E"],MCT:["233547N","0581561E"],MEDPO:["222436N","0520786E"],MEKNA:["233315N","0560825E"],MEKRI:["243122.8N","0535500.0E"],MEMTU:["232517N","0552443E"],MENSA:["245750N","0563249E"],MIBRU:["250321N","0524540E"],MIGMA:["225058N","0512782E"],MIROT:["250608.8N","0543048.8E"],MISEG:["252134N","0555205E"],MITIX:["251746.4N","0550729.7E"],MIVEK:["245240N","0561516E"],MOBET:["264411N","0560913E"],MOBUL:["251559N","0541841E"],MODOG:["261007N","0515935E"],MOGIM:["244053N","0542820E"],MURGU:["243212.8N","0560319.9E"],MUSAP:["241754N","0555245E"],MUSEN:["241429N","0543236E"],MUXIT:["230229N","0523024E"],NABIX:["251241.1N","0543147.3E"],NABUN:["240301.8N","0545021.3E"],NADNI:["251915.2N","0555658.9E"],NADSO:["244996N","0574944E"],NALNU:["244737N","0560925E"],NALPO:["255602N","0532945E"],NAPMA:["241250N","0550312E"],NOBTO:["235525.0N","0551840.0E"],NOLSU:["251248.0N","0560737.8E"],NORGA:["250352N","0555415E"],NOSMI:["241795N","0563003E"],OBNET:["260032N","0534514E"],OBREV:["250200N","0551135E"],OBVOM:["241503N","0515552E"],ODKUN:["242608N","0544017E"],OMDW:["245372E","0550951E"],OOSH:["242300N","0563731E"],ORBOL:["245134N","0542348E"],ORKOB:["245309N","0562421E"],ORLUP:["260686N","0523226E"],ORMID:["253354N","0525434E"],ORNEL:["240311.7N","0551942.1E"],ORPAX:["242628.0N","0534533.0E"],ORSAR:["260430N","0535730E"],ORSIS:["252801N","0521661E"],OTIKI:["253229N","0541441E"],OVONA:["252443N","0524739E"],OXARI:["252535N","0533458E"],PAPAR:["264000N","0542700E"],PASOV:["243841N","0565037E"],PATAT:["261613N","0560059E"],PAVAG:["251546N","0554042E"],PAXIM:["240274N","0561652E"],PEDOG:["242225.4N","0555333.7E"],PEDUL:["244116N","0560205E"],PEKEM:["224648N","0535942E"],PURLI:["253644N","0532436E"],PURDA:["210808N","0510349E"],PURNI:["243806N","0574390E"],PUSOT:["253919N","0542011E"],PUTIB:["251900N","0525755E"],PUTSO:["232062N","0565336E"],PUVAL:["253558.0N","0554258.0E"],PUXIL:["244117N","0563145E"],RABLA:["261505.73N","0514833.68E"],RADEB:["261167N","0554731E"],RAGDO:["252212N","0535106E"],RALMI:["254505N","0533033E"],RAPNO:["241452N","0541559E"],RESAR:["253711N","0522346E"],RETAS:["235754.0N","0553423.0E"],REVAV:["250909N","0541012E"],REXEV:["251502.3N","0560136.7E"],RIBOT:["230844N","0522428E"],RIDAP:["252553.7N","0543701.2E"],RIGIL:["230146N","0551430E"],RORON:["252053N","0530916E"],ROSAN:["263129.13N","0515220.05E"],ROTAG:["255388N","0523635E"],ROVOS:["241825.0N","0552143.0E"],RUDAT:["244605.1N","0561714.1E"],RUDUK:["252408N","0541650E"],RUGIS:["245916N","0530340E"],RUKOR:["250823N","0554603E"],RURAL:["243045N","0543156E"],SENPA:["251959.6N","0543210.5E"],SERDU:["264725N","0545764E"],SERSA:["251945N","0553118E"],SIGMO:["240710N","0545837E"],SIR:["255451N","0543211E"],SISOB:["253150N","0534509E"],SIXIV:["242009N","0550439E"],SODEX:["234954N","0553202E"],SOGAN:["263915N","0515408E"],SOKAK:["255131N","0534251E"],SOLUD:["243223N","0564421E"],SUTVO:["251531N","0562153E"],SUVDU:["243501N","0542410E"],TAGDU:["252258N","0532153E"],TANSU:["224136N","0542828E"],TAPRA:["242607N","0563803E"],TARBO:["244385N","0574664E"],TARDI:["243418N","0560915E"],TATLA:["254753N","0544008E"],TOMSO:["260619N","0530224E"],TONKI:["242645.1N","0544851.2E"],TONVO:["250500.0N","0563200.0E"],TOSNA:["251612N","0524116E"],TOTKU:["253534N","0540410E"],TOVIV:["253302N","0551942E"],TOVOX:["245342N","0522429E"],TUBGO:["242403N","0551219E"],TUDIS:["251009N","0550825E"],TUKSI:["252006N","0560525E"],TULON:["245511.4N","0544739.1E"],TULBU:["230009N","571846E"],TUMAK:["255031N","0531108E"],UKILI:["243815.5N","0535636.4E"],UKNAV:["244307N","0542955E"],UKNEP:["262145N","0524830E"],UKRAG:["233056N","0552306E"],UKUBU:["261447N","0524060.5E"],UKUVO:["251228N","0534707E"],UKVAK:["245147N","0553329E"],UKVUP:["261967N","0540892E"],ULIVA:["252647N","0540611E"],ULODA:["243530N","0545301E"],UMAMI:["245113.7N","0560223.3E"],UMEVU:["250545N","0530653E"],UMIBU:["242331N","0543027E"],VAVIM:["241535.1N","0553622.9E"],VATIG:["243659.0N","0533241.0E"],VAXAS:["244308N","0561807E"],VEDED:["260558.26N","0514627.91E"],VEDOM:["260116N","0524494E"],VEGEK:["251837N","0540803E"],VEKAL:["250333.5N","0550340.5E"],VEKOV:["245750N","0544925E"],VELAK:["261307N","0521821E"],VELAM:["255426.12N","0514347.13E"],VNKT:["274777N","0852162E"],VIDP:["283412N","0770673E"],VUTAN:["255026N","0515230E"],VUTEB:["253644.6N","0545149.4E"],VELOD:["234618N","0573458E"],VUXOD:["242005N","0543625E"]},le={A777:["TONVO","BUBAS","NADSO"],"A791-":["IMLOT","GIDIL","LALDO"],A791:["LALDO","GIDIL","IMLOT","KATUS"],B415:["DOH","KUPSA","BUNDU","ASNAX","EGPOG","UKILI","KUGTO","RURAL","SIXIV"],B505:["LALDO","NADSO"],B540:["GERAR","DEGNU","PASOV","KUPMA","ORKOB","MIVEK"],B541:["KIS","ORSAR"],G462:["ROVOS","TUBGO","ULODA","KUVDA","ORBOL","UKUVO","OXARI","PURLI","TUMAK"],G666:["LVA","DATUT","ELIRA","ORSAR","LUDAM","KIVUS","TOTKU","ULIVA","VEGEK","REVAV","ITOMI","ELOVU"],"G783-":["GIDIS","DESVU","VAVIM","ASPED","ELUDA","UKRAG","RIGIL","TANSU"],G783:["PURDA","IMGOV","DANUX","TANSU","RIGIL","UKRAG","ELUDA","ASPED","VAVIM","GIDIS"],L223:["UKVUP","SIR","TATLA","VUTEB","LOVEM","IVOXI","LAGTA","ANVIX","PEDUL","KIPOK","TARDI","NOSMI","BOTAM"],L305:["DOH","ENANO","ALSEM","ASTOG","PURLI","GODKI","KIVUS","ITBUL","EMOTA"],L313:["EGPEP","KULBA","IMPED","KIPOK"],L519:["PATAT","EGPEP","ITLAP","PUVAL","DETGU","SERSA","IVOXI","VEKAL","KUTLI","GEVIV","ODKUN","VUXOD","ATUDO"],L710:["UKRAG","MEMTU","GOGMI","ITKUN"],L768:["ALPOB","ROTAG","ITMUB","MODOG","RABLA"],M317:["RADEB","SERDU"],"M318-":["ATUDO","MUSEN","BOPIT","DANOK","ESROM","GOLGU"],M318:["PURDA","MEDPO","KATIT","MUXIT","GOLGU","ESROM","DANOK","BOPIT","MUSEN","ATUDO","RURAL","IMLIP","KUVDA","TULON","VEKOV","EGTAG","MITIX","LOVEM","TOVIV","DAVMO","GABKO","RADEB","KHM"],M324:["BND","MOBET","PATAT"],M428:["IVURO","SUTVO","GOMTA","TARBO"],M430:["OXARI","TAGDU","RORON","PUTIB","TOSNA","DOH"],M550:["MIGMA","BOPEK","RIBOT","GOLGU"],M557:["IVOXI","MITIX","RIDAP","OTIKI","TOTKU","GODKI","RALMI","TUMAK"],M564:["PASOV","PUXIL","VAXAS","NALNU","UMAMI"],M572:["NOLSU","GOMTA"],M628:["MIGMA","KATIT","PEKEM","RIGIL"],"M628-":["LABSA","GOGMI","LUDID","RIGIL","PEKEM","KATIT"],"M677-":["LALDO","KUSEN","IVURO","TUKSI"],M677:["SOGAN","UKNEP","DEGSO","OBNET","LUDAM","ITBUL","DIXAM","VUTEB","LOVEM","KURTU","MISEG","TUKSI","IVURO","KUSEN","LALDO"],M762:["VELOD","GEXAN","TAPRA","VAXAS","RUDAT","MIVEK"],N300:["DOH","KUPRO","MIBRU","RUGIS","KAXOB","GIDOB","ORBOL","LORID","VEKOV","OBREV","LAGTA","RUKOR","NOLSU","SUTVO","LALDO"],"N300-":["RUKOR","LAGTA","OBREV"],N317:["MENSA","NOLSU","REXEV","NADNI"],N318:["VELAM","VUTAN","RESAR","OVONA","PUTIB","BOXOT","KAPUM","BOSEV","MOGIM","IMLIP","ELEPO","SIXIV","KANIP","LABRI","EGROK","LAKLU"],N563:["TULBU","MEKNA","KURTA","SODEX","ELUDA","NOBTO","SIGMO","VUXOD","UMIBU","KUGTO","BOSEV","ITKEV","KUSBA","TAGDU","IMGUX","ALPOB"],N571:["KIROP","ASNIB","MENSA","LUBAT","ENEGA","RUKOR","IVOXI","TUDIS","SENPA","RUDUK","ULIVA","SISOB","PURLI","ALPOB"],N685:["EMISA","KAPAX","ORSIS","ENANO","TOSNA","UMEVU","KAPUM","GIDOB","SUVDU","RURAL","ODKUN","NAPMA","ORNEL","RETAS","KOBIM","PUTSO"],P307:["SERSA","PAVAG","ITBON","KULBA","NOLSU","TONVO","PURNI"],P440:["ALGUX","ASRAT","ELIGA","EMIXI"],P555:["OBVOM","LONUT","IMKUD","RAPNO","ATUDO"],P559:["ROSAN","KUMLA","ASPAK","UKUBU","TOMSO","NALPO","SOKAK","KIVUS","PUSOT","AMBOV","VUTEB"],P574:["DAPOK","EMATA","SOLUD","PUXIL","GISMO","MIVEK","IMPED","NORGA","RUKOR","SERSA","TOVIV","KUMUN"],"P574-":["DAPER","DENSA"],P699:["TUKSI","PAVAG","IVOXI","TUDIS","EGTAG","NABIX","MOBUL","VEGEK","RAGDO","OXARI","IMGUX","ORMID","DASLO","ALKAN","BONAN","VEDED"],P899:["VELOD","PAXIM","ITRAX","VAVIM","ROVOS","SIXIV","UMIBU","MEKRI","KUMSI","TOVOX","KUPSA"],Q308:["ASPED","PEDOG","MURGU","KIPOK","RUDAT","ORKOB"],Q311:["IVOXI","OBREV","EMERU","TONKI","NABUN"],Q312:["REVAV","GERUL"],Q317:["RURAL","UKNAV","EGROP","LORID"],Q321:["TOVIV","DETGU","KURTU","NOLSU"],Q322:["AMBOV","DATOB","LOVEM"],Q322:["ITBUL","PUSOT","AMBOV","DATOB","LOVEM"],Q323:["MITIX","PAVAG"],Q415:["UMEVU","KAXOB","ALNEV","UKILI","KUGTO","IMLIP","GEVIV","UKVAK","IMPED","LUBAT","TONVO"],Q563:["DAXIB","UKUVO","IMGUX"],Q565:["BOSEV","UKUVO"],Q568:["KIPOK","NALNU","IMPED"],Q569:["VUTEB","MITIX","OBREV"],Q572:["ALRAR","LOVEM","SERSA"],Q576:["EGTAG","MIROT","REVAV","UKUVO","KUSBA","RORON"],Q666:["EGPOG","ALNEV","GIDOB"],R401:["LABSA","KURTA","MUSAP","PEDOG","GIDIS","ANVIX","NORGA","ITBON","MISEG","ITLAP","ASNEK","GABKO"],R784:["EGMIT","LEVNA","ORSAR","GIBIB","EMOTA","TATLA","GONVI","ALRAR","TOVIV","ALSIL","EMOPI","KUSEN"],T509:["PASOV","MENSA","FJV"],T560:["ORNEL","ELUDA"],T602:["TUMAK","VEDOME","ORLUP","VELAK","LABOP","BOPOV"],T891:["ORKOB","LUBAT","NOLSU"],Y552:["NABUN","SIGMO","NAPMA","TUBGO","UKVAK","RUKOR"],Z522:["KAPUM","ALNEV"]},Vt={G666:[{coord:["255049.86N","0535942.60E"],rotate:80,arrow:"right"},{coord:["251439.23N","0540857.34E"],rotate:80,arrow:"right"}],M677:[{coord:["260701.11N","0532946.29E"],rotate:24,arrow:"right"},{coord:["254518.45N","0542510.78E"],rotate:17,arrow:"right"},{coord:["252310.64N","0553931.13E"],rotate:8,arrow:"right"},{coord:["251818.27N","0562903.22E"],rotate:2,arrow:"both"}],"M677-L223":[{coord:["253214.05N","0550205.59E"],rotate:25,arrow:"right"}],P559:[{coord:["260213.23N","0531326.78E"],rotate:25,arrow:"right"},{coord:["254234.12N","0540944.15E"],rotate:20,arrow:"right"},{coord:["253542.62N","0544346.84E"],rotate:-8,arrow:"right"}],P307:[{coord:["251751.08N","0553546.50E"],rotate:25,arrow:"right"},{coord:["251502.69N","0554719.24E"],rotate:8,arrow:"right"},{coord:["250850.86N","0561958.91E"],rotate:20,arrow:"right"}],"P559-Q322":[{coord:["253656.63N","0542750.11E"],rotate:19,arrow:"right"}],R784:[{coord:["255943.95N","0540730.76E"],rotate:28,arrow:"right"},{coord:["253717.73N","0551003.98E"],rotate:25,arrow:"right"},{coord:["253135.30N","0553047.03E"],rotate:10,arrow:"right"},{coord:["252328.83N","0561420.09E"],rotate:30,arrow:"right"}],L223:[{coord:["254258.97N","0544516.64E"],rotate:48,arrow:"right"},{coord:["252141.82N","0551831.81E"],rotate:55,arrow:"right"},{coord:["245118.44N","0555058.84E"],rotate:43,arrow:"right"}],N318:[{coord:["253245.55N","0523214.53E"],rotate:30,arrow:"right"},{coord:["251501.15N","0530737.58E"],rotate:25,arrow:"right"},{coord:["244417.79N","0541944.22E"],rotate:22,arrow:"right"},{coord:["242451.66N","0545637.96E"],rotate:33,arrow:"right"},{coord:["240759.92N","0552731.15E"],rotate:23,arrow:"right"}],Q569:[{coord:["252342.33N","0550236.47E"],rotate:57,arrow:"right"}],Q321:[{coord:["252839.47N","0553030.16E"],rotate:26,arrow:"right"}],N685:[{coord:["252637.41N","0522008.74E"],rotate:28,arrow:"right"},{coord:["251115.34N","0525317.61E"],rotate:25,arrow:"right"},{coord:["245114.43N","0534747.30E"],rotate:31,arrow:"right"},{coord:["241724.53N","0545516.82E"],rotate:32,arrow:"right"},{coord:["235946.23N","0552911.75E"],rotate:24,arrow:"right"}],Q415:[{coord:["250048.07N","0531440.62E"],rotate:35,arrow:"right"},{coord:["244241.41N","0534754.15E"],rotate:31,arrow:"right"},{coord:["244712.00N","0551433.13E"],rotate:-16,arrow:"right"},{coord:["250030.02N","0561119.06E"],rotate:-17,arrow:"right"}],Z522:[{coord:["245250.19N","0533743.46E"],rotate:64,arrow:"right"}],N300:[{coord:["250122.57N","0525412.78E"],rotate:15,arrow:"right"},{coord:["244748.38N","0541033.34E"],rotate:-18,arrow:"right"},{coord:["250403.42N","0552238.08E"],rotate:-11,arrow:"right"},{coord:["251418.95N","0561534.97E"],rotate:-11,arrow:"right"}],B415:[{coord:["245446.97N","0524948.78E"],rotate:16,arrow:"right"},{coord:["242513.92N","0544856.92E"],rotate:19,arrow:"right"}],Q666:[{coord:["244635.95N","0533228.29E"],rotate:3,arrow:"right"}],"B415-Q415":[{coord:["243522.75N","0540936.26E"],rotate:13,arrow:"right"}],T560:[{coord:["235744.11N","0552356.17E"],rotate:57,arrow:"right"}],Q572:[{coord:["252314.09N","0552302.55E"],rotate:27,arrow:"right"}],M428:[{coord:["251711.03N","0561648.09E"],rotate:19,arrow:"right"}],L305:[{coord:["252533.84N","0523454.50E"],rotate:-12,arrow:"right"},{coord:["253907.26N","0533429.08E"],rotate:-15,arrow:"right"}],M318:[{coord:["231811.38N","0524524.52E"],rotate:-29,arrow:"both"},{coord:["240812.55N","0542026.18E"],rotate:-29,arrow:"both"},{coord:["245006.97N","0544404.46E"],rotate:-56,arrow:"right"},{coord:["254313.08N","0553022.91E"],rotate:-48,arrow:"right"}],M550:[{coord:["230717.01N","0521936.16E"],rotate:-17,arrow:"both"}],M628:[{coord:["225547.24N","0544436.12E"],rotate:-12,arrow:"both"}],G783:[{coord:["225345.13N","0545613.27E"],rotate:-25,arrow:"both"},{coord:["234154.36N","0552621.06E"],rotate:-74,arrow:"both"},{coord:["241024.56N","0553449.53E"],rotate:-75,arrow:"both"},{coord:["241921.97N","0554000.52E"],rotate:-50,arrow:"left"}],L710:[{coord:["231823.79N","0552706.40E"],rotate:72,arrow:"right"}],R401:[{coord:["240517.57N","0555126.25E"],rotate:-85,arrow:"right"},{coord:["244122.86N","0555607.61E"],rotate:-90,arrow:"both"},{coord:["250013.30N","0555440.00E"],rotate:-96,arrow:"right"},{coord:["253904.10N","0555052.94E"],rotate:-95,arrow:"right"}],Q308:[{coord:["240806.94N","0553921.54E"],rotate:-46,arrow:"right"},{coord:["242743.78N","0555851.41E"],rotate:-46,arrow:"right"},{coord:["244912.74N","0562023.13E"],rotate:-46,arrow:"right"}],Q568:[{coord:["244243.47N","0560831.06E"],rotate:-82,arrow:"right"}],Q323:[{coord:["251630.17N","0552830.87E"],rotate:2,arrow:"right"}],Q312:[{coord:["250439.59N","0541820.28E"],rotate:32,arrow:"right"}],L519:[{coord:["260721.69N","0555943.76E"],rotate:-84,arrow:"left"},{coord:["254153.98N","0554608.50E"],rotate:-66,arrow:"left"},{coord:["250654.65N","0551135.95E"],rotate:-27,arrow:"left"},{coord:["244734.71N","0545344.79E"],rotate:-60,arrow:"left"}],L313:[{coord:["254721.29N","0555912.22E"],rotate:86,arrow:"right"}],Q317:[{coord:["243709.47N","0543053.36E"],rotate:81,arrow:"left"}],Q311:[{coord:["250749.35N","0551901.71E"],rotate:-44,arrow:"left"},{coord:["244029.84N","0545749.66E"],rotate:-59,arrow:"left"},{coord:["240826.79N","0545000.86E"],rotate:87,arrow:"right"}],Q322:[{coord:["254440.57N","0541558.33E"],rotate:55,arrow:"right"},{coord:["252924.36N","0545652.30E"],rotate:9,arrow:"right"}],Y552:[{coord:["243536.54N","0552107.75E"],rotate:-55,arrow:"right"}],M762:[{coord:["243225.21N","0563040.29E"],rotate:44,arrow:"left"}],B540:[{coord:["244444.45N","0563938.07E"],rotate:34,arrow:"left"}],T509:[{coord:["245041.87N","0563927.86E"],rotate:50,arrow:"left"}],N317:[{coord:["250731.45N","0561630.88E"],rotate:35,arrow:"left"}],T891:[{coord:["245817.90N","0562042.69E"],rotate:57,arrow:"left"}],M572:[{coord:["251154.85N","0562314.58E"],rotate:2,arrow:"right"}],P574:[{coord:["243644.97N","0563809.50E"],rotate:40,arrow:"left"},{coord:["252812.33N","0552354.98E"],rotate:52,arrow:"left"},{coord:["250114.45N","0555859.57E"],rotate:34,arrow:"left"}],M564:[{coord:["243929.80N","0564438.81E"],rotate:8,arrow:"left"},{coord:["244546.82N","0561258.48E"],rotate:31,arrow:"left"}],P699:[{coord:["251717.69N","0554924.83E"],rotate:-13,arrow:"left"},{coord:["251055.35N","0544335.61E"],rotate:10,arrow:"left"},{coord:["253150.35N","0530438.98E"],rotate:10,arrow:"left"}],M557:[{coord:["252143.79N","0545239.41E"],rotate:16,arrow:"left"},{coord:["254730.06N","0532154.55E"],rotate:16,arrow:"left"}],N571:[{coord:["250011.94N","0562501.13E"],rotate:19,arrow:"left"},{coord:["251022.54N","0553618.88E"],rotate:12,arrow:"left"},{coord:["251454.19N","0545055.64E"],rotate:16,arrow:"left"},{coord:["253933.01N","0531236.69E"],rotate:15,arrow:"left"}],"N571-P699":[{coord:["251117.25N","0551602.77E"],rotate:-9,arrow:"left"}],P899:[{coord:["240940.09N","0555719.43E"],rotate:18,arrow:"left"},{coord:["241901.22N","0551543.93E"],rotate:7,arrow:"left"},{coord:["242532.91N","0542117.38E"],rotate:12,arrow:"left"},{coord:["244819.73N","0524629.01E"],rotate:14,arrow:"left"}],Q576:[{coord:["250702.12N","0543910.22E"],rotate:-6,arrow:"left"},{coord:["251842.97N","0531903.95E"],rotate:12,arrow:"left"}],G462:[{coord:["242842.44N","0550428.05E"],rotate:34,arrow:"left"},{coord:["251947.50N","0534019.18E"],rotate:51,arrow:"left"}],N563:[{coord:["234700.63N","0553821.86E"],rotate:25,arrow:"left"},{coord:["241511.70N","0544449.29E"],rotate:35,arrow:"left"},{coord:["245648.39N","0535302.72E"],rotate:31,arrow:"left"},{coord:["253652.61N","0530648.42E"],rotate:45,arrow:"left"}],Q565:[{coord:["250135.96N","0535546.01E"],rotate:52,arrow:"left"}],M430:[{coord:["251743.19N","0525018.15E"],rotate:-12,arrow:"left"}],Q563:[{coord:["245936.06N","0540302.73E"],rotate:44,arrow:"left"},{coord:["251957.25N","0533302.96E"],rotate:31,arrow:"left"}],P440:[{coord:["242117.41N","0533307.99E"],rotate:0,arrow:"left"}],P555:[{coord:["241512.16N","0531738.50E"],rotate:0,arrow:"right"}]},Ue={"BUNDU-LABRI":["BUNDU","B415","SIXIV","N318","LABRI"],"BUNDU-RETAS":["BUNDU","B415","RURAL","N685","RETAS"],"BUNDU-TONVO":["BUNDU","B415","KUGTO","Q415","TONVO"],"ITRAX-ALPOB":["ITRAX","P899","UMIBU","N563","ALPOB"],"ITRAX-ALPOB":["ITRAX","P899","ROVOS","G462","UKUVO","Q563","IMGUX","N563","ALPOB"],"ITRAX-ORMID*":["ITRAX","P899","UMIBU","N563","IMGUX","P699","ORMID"],"ITRAX-ORMID":["ITRAX","P899","ROVOS","G462","UKUVO","Q563","IMGUX","P699","ORMID"],"ITRAX-TOVOX":["ITRAX","P899","TOVOX"],"ITRAX-TUMAK":["ITRAX","P899","ROVOS","G462","TUMAK"],"ITRAX-TUMAK*":["ITRAX","P899","UMIBU","N563","BOSEV","Q565","UKUVO","G462","TUMAK"],"KUPRO-GABKO":["KUPRO","N300","VEKOV","M318","GABKO"],"KUPRO-LALDO*":["KUPRO","N300","VEKOV","M318","MITIX","Q323","PAVAG","P307","NOLSU","N300","LALDO"],"KUPRO-LALDO":["KUPRO","N300","LALDO"],"KUPRO-TONVO":["KUPRO","N300","NOLSU","P307","TONVO"],"LALDO-ALPOB":["LALDO","M677","TUKSI","P699","IVOXI","N571","ALPOB"],"LALDO-ORMID":["LALDO","M677","TUKSI","P699","ORMID"],"LALDO-TOSNA":["LALDO","M677","TUKSI","P699","EGTAG","Q576","RORON","M430","TOSNA"],"LALDO-TUMAK":["LALDO","M677","TUKSI","P699","IVOXI","M557","TUMAK"],"LUDID-PEKEM":["LUDID","M628-","PEKEM"],"LUDID-TANSU":["LUDID","M628-","RIGIL","G783","TANSU"],"MENSA-ALPOB":["MENSA","N571","ALPOB"],"MENSA-KUMUN":["MENSA","N571","RUKOR","P574","KUMUN"],"MENSA-ORMID":["MENSA","N571","IVOXI","P699","ORMID"],"MENSA-TOSNA":["MENSA","N571","IVOXI","P699","EGTAG","Q576","RORON","M430","TOSNA"],"MENSA-TUMAK":["MENSA","N571","IVOXI","M557","TUMAK"],"MUSAP-KUMUN":["MUSAP","R401","NORGA","P574","KUMUN"],"NALPO-GABKO":["NALPO","P559","AMBOV","Q322","LOVEM","M318","GABKO"],"NALPO-LALDO":["NALPO","P559","AMBOV","Q322","LOVEM","M677","LALDO"],"NALPO-TARDI":["NALPO","P559","AMBOV","Q322","LOVEM","L223","TARDI"],"NALPO-TONVO":["NALPO","P559","AMBOV","Q322","LOVEM","Q572","SERSA","P307","TONVO"],"OBNET-GABKO":["DEGSO","M677","LOVEM","M318","GABKO"],"OBNET-LALDO":["DEGSO","M677","LALDO"],"OBNET-TARDI":["DEGSO","M677","LOVEM","L223","TARDI"],"OBNET-TONVO":["DEGSO","M677","LOVEM","Q572","SERSA","P307","TONVO"],"ORSAR-LALDO":["ORSAR","R784","KUSEN","M677","LALDO"],"ORSAR-TARDI":["ORSAR","R784","TATLA","L223","TARDI"],"ORSAR-TONVO":["ORSAR","R784","TOVIV","Q321","NOLSU","P307","TONVO"],"OVONA-LABRI":["RESAR","N318","LABRI"],"OVONA-RETAS":["RESAR","N318","KAPUM","N685","RETAS"],"PATAT-ALPOB":["PATAT","L519","IVOXI","N571","ALPOB"],"PATAT-ORMID":["PATAT","L519","IVOXI","P699","ORMID"],"PATAT-TARDI":["PATAT","L519","EGPEP","L313","KIPOK","L223","TARDI"],"PATAT-TOSNA":["PATAT","L519","IVOXI","P699","EGTAG","Q576","RORON","M430","TOSNA"],"PATAT-TUMAK":["PATAT","L519","IVOXI","M557","TUMAK"],"PEKEM-GABKO":["PEKEM","M628","RIGIL","G783","ASPED","Q308","PEDOG","R401","GABKO"],"SIR-LALDO":["SIR","L223","TATLA","R784","KUSEN","M677","LALDO"],"SIR-TARDI":["SIR","L223","TARDI"],"SIR-TONVO":["SIR","L223","TATLA","R784","TOVIV","Q321","NOLSU","P307","TONVO"],"SODEX-ALPOB":["SODEX","N563","ALPOB"],"SODEX-ORMID":["SODEX","N563","IMGUX","P699","ORMID"],"SODEX-TOVOX":["SODEX","N563","UMIBU","P899","TOVOX"],"SODEX-TUMAK":["SODEX","N563","BOSEV","Q565","UKUVO","G462","TUMAK"],"SOLUD-ALPOB":["SOLUD","P574","RUKOR","N571","ALPOB"],"SOLUD-GABKO":["SOLUD","P574","NORGA","R401","GABKO"],"SOLUD-KUMUN":["SOLUD","P574","KUMUN"],"SOLUD-ORMID":["SOLUD","P574","RUKOR","N571","IVOXI","P699","ORMID"],"SOLUD-TUMAK":["SOLUD","P574","RUKOR","N571","IVOXI","M557","TUMAK"],"TANSU-GABKO":["TANSU","G783","ASPED","Q308","PEDOG","R401","GABKO"],"TOSNA-LABRI":["ORSIS","N685","KAPUM","N318","LABRI"],"TOSNA-RETAS":["ORSIS","N685","UMEVU","Q415","KAXOB","N300","GIDOB","N685","RETAS"],"OMAA,AD-ALPOB":["BOSEV","N563","ALPOB"],"OMAA,AD-GABKO":["TULON","M318","GABKO"],"OMAA,AD-KATIT":["ATUDO","M318","KATIT"],"OMAA,AD-KUMUN":["TULON","M318","TOVIV","P574","KUMUN"],"OMAA,AD-LABRI":["KANIP","N318","LABRI"],"OMAA,AD-ORMID":["BOSEV","N563","IMGUX","P699","ORMID"],"OMAA,AD-ORSAR":["DAXIB","Q563","UKUVO","DCT","KIVUS","DCT","LUDAM","DCT","ORSAR"],"OMAA,AD-PEKEM":["ORNEL","T560","ELUDA","G783","RIGIL","M628","PEKEM"],"OMAA,AD-RETAS":["ORNEL","N685","RETAS"],"OMAA,AD-RIBOT":["ATUDO","M318","GOLGU","M550","RIBOT"],"OMAA,AD-TANSU":["ORNEL","T560","ELUDA","G783","TANSU"],"OMAA,AD-TOVOX":["MEKRI","P899","TOVOX"],"OMAA,AD-TUMAK":["DAXIB","Q563","UKUVO","G462","TUMAK"],"OMAL-ALPOB":["ROVOS","DCT","ADV","DCT","BOSEV","N563","ALPOB"],"OMAL-GABKO":["ROVOS","G462","ULODA","DCT","TULON","M318","GABKO"],"OMAL-KATIT":["ROVOS","DCT","ADV","DCT","VUXOD","L519","ATUDO","M318","KATIT"],"OMAL-KUMUN":["ROVOS","G462","ULODA","DCT","TULON","M318","TOVIV","P574","KUMUN"],"OMAL-ORMID":["ROVOS","DCT","ADV","DCT","BOSEV","N563","IMGUX","P699","ORMID"],"OMAL-PEKEM":["DCT","ELUDA","G783","RIGIL","M628","PEKEM"],"OMAL-RIBOT":["ROVOS","DCT","ADV","DCT","VUXOD","L519","ATUDO","M318","GOLGU","M550","RIBOT"],"OMAL-TANSU":["DCT","ELUDA","G783","TANSU"],"OMAL-TOVOX":["ROVOS","DCT","ADV","DCT","MEKRI","P899","TOVOX"],"OMAL-TUMAK":["ROVOS","DCT","ADV","DCT","DAXIB","Q563","UKUVO","G462","TUMAK"],"OMDB,DW,SJ-ALPOB":["SENPA","N571","ALPOB"],"OMDB,DW,SJ-GABKO":["DAVMO","M318","GABKO"],"OMDB,DW,SJ-KATIT":["KUTLI","L519","ATUDO","M318","KATIT"],"OMDB,DW,SJ-MEMTU":["ANVIX","R401","GIDIS","G783-","UKRAG","L710","MEMTU"],"OMDB,DW,SJ-ORMID":["NABIX","P699","ORMID"],"OMDB,DW,SJ-ORSAR":["RIDAP","M557","TOTKU","DCT","KIVUS","DCT","LUDAM","DCT","ORSAR"],"OMDB,DW,SJ-PEKEM":["ANVIX","R401","GIDIS","G783-","RIGIL","M628-","PEKEM"],"OMDB,DW,SJ-RIBOT":["KUTLI","L519","ATUDO","M318","GOLGU","M550","RIBOT"],"OMDB,DW,SJ-TANSU":["ANVIX","R401","GIDIS","G783-","TANSU"],"OMDB,DW,SJ-TARDI":["ANVIX","L223","TARDI"],"OMDB,DW,SJ-TOSNA*":["MIROT","Q576","RORON","M430","TOSNA"],"OMDB,DW,SJ-TOSNA":["NABIX","P699","OXARI","M430","TOSNA"],"OMDB,DW,SJ-TUMAK":["RIDAP","M557","TUMAK"],"OMDB,SJ-GOMTA":["IVURO","M428","GOMTA"],"OMDB,SJ-LALDO":["IVURO","M677","LALDO"],"OMDW-GOMTA":["NOLSU","M572","GOMTA"],"OMDW-LALDO":["NOLSU","N300","LALDO"],"OMFJ-ALPOB":["SERSA","L519","IVOXI","N571","ALPOB"],"OMFJ-GABKO":["KUSEN","DCT","EMOPI","DCT","ITLAP","R401","GABKO"],"OMFJ-KATIT":["SERSA","L519","ATUDO","M318","KATIT"],"OMFJ-ORMID":["SERSA","L519","IVOXI","P699","ORMID"],"OMFJ-PEKEM":["VAVIM","G783","RIGIL","M628","PEKEM"],"OMFJ-RIBOT":["SERSA","L519","ATUDO","M318","GOLGU","M550","RIBOT"],"OMFJ-TANSU":["VAVIM","G783-","TANSU"],"OMFJ-TONVO":["FJV","DCT","TONVO"],"OMFJ-TOSNA":["SERSA","L519","IVOXI","P699","OXARI","M430","TOSNA"],"OMFJ-TUMAK":["SERSA","L519","IVOXI","M557","TUMAK"],"OMRK-ALPOB":["PUVAL","L519","IVOXI","N571","ALPOB"],"OMRK-GABKO":["ASNEK","R401","GABKO"],"OMRK-GOMTA":["PUVAL","DCT","NADNI","DCT","IVURO","M428","GOMTA"],"OMRK-KATIT":["PUVAL","L519","ATUDO","M318","KATIT"],"OMRK-LALDO":["PUVAL","DCT","NADNI","DCT","IVURO","M677","LALDO"],"OMRK-MEMTU":["PUVAL","DCT","RUKOR","DCT","ANVIX","R401","GIDIS","G783-","UKRAG","L710","MEMTU"],"OMRK-ORMID":["PUVAL","L519","IVOXI","N571","TUDIS","P699","ORMID"],"OMRK-PEKEM":["PUVAL","DCT","RUKOR","DCT","ANVIX","R401","GIDIS","G783-","RIGIL","M628-","PEKEM"],"OMRK-RIBOT":["PUVAL","L519","ATUDO","M318","GOLGU","M550","RIBOT"],"OMRK-TANSU":["PUVAL","DCT","RUKOR","DCT","ANVIX","R401","GIDIS","G783-","TANSU"],"OMRK-TARDI":["PUVAL","DCT","RUKOR","DCT","ANVIX","L223","TARDI"],"OMRK-TOSNA":["PUVAL","L519","IVOXI","P699","OXARI","M430","TOSNA"],"OMRK-TUMAK":["PUVAL","L519","IVOXI","M557","TUMAK"],"ASTOG-OMDB":["ENANO","L305","ITBUL","M677","VUTEB"],"ASTOG-OMDW":["ENANO","L305","KIVUS","P559","AMBOV","Q322","DATOB"],"ASTOG-OMFJ":["ENANO","L305","EMOTA","R784","KUSEN"],"ASTOG-OMRK":["ENANO","L305","EMOTA","R784","ALSIL"],"ASTOG-OMSJ":["ENANO","L305","EMOTA","R784","GONVI"],"BUNDU-OMAA":["BUNDU","B415","UKILI"],"BUNDU-OMAD":["BUNDU","B415","EGPOG","Q666","GIDOB"],"BUNDU-OMAL":["BUNDU","B415","EGPOG","Q666","GIDOB","DCT","ADV","DCT","KANIP"],"ITRAX-OMAA,AD":["ITRAX","P899","ROVOS"],"ITRAX-OMAL":["ITRAX","DCT","VAVIM"],"KATIT-OMAA,AD":["KATIT","M318","ATUDO"],"KATIT-OMAL":["KATIT","M318","ATUDO","DCT","ADV","DCT","KANIP"],"KATIT-OMDB":["KATIT","M318","RURAL","Q317","LORID"],"KATIT-OMDW":["KATIT","M318","RURAL","Q317","LORID"],"KATIT-OMRK":["KATIT","M318","RURAL","Q317","LORID","DCT","TOVIV","DCT","ALSIL"],"KATIT-OMSJ":["KATIT","M318","RURAL","Q317","LORID"],"KUPRO-OMAA":["KUPRO","N300","KAXOB","Q415","UKILI"],"KUPRO-OMAD":["KUPRO","N300","GIDOB"],"KUPRO-OMAL":["KUPRO","N300","GIDOB","DCT","ADV","DCT","KANIP"],"MENSA-OMFJ":["MENSA","T509","FJV"],"MENSA-OMRK":["MENSA","N317","NADNI"],"MENSA-OMSJ":["MENSA","N317","NOLSU"],"MUSAP-OMDB":["MUSAP","R401","PEDOG","Q308","KIPOK","Q568","IMPED"],"MUSAP-OMDW":["MUSAP","R401","GIDIS"],"MUSAP-OMFJ":["MUSAP","R401","PEDOG","Q308","RUDAT"],"MUSAP-OMRK":["MUSAP","R401","PEDOG","Q308","ORKOB","T891","NOLSU","N317","NADNI"],"MUSAP-OMSJ":["MUSAP","R401","PEDOG","Q308","ORKOB","T891","NOLSU"],"NALPO-OMDB":["TOMSO","P559","VUTEB"],"NALPO-OMDW":["TOMSO","P559","AMBOV","Q322","DATOB"],"NALPO-OMDW*":["TOMSO","P559","KIVUS","G666","ELOVU"],"NALPO-OMFJ":["TOMSO","P559","KIVUS","L305","EMOTA","R784","KUSEN"],"NALPO-OMRK":["TOMSO","P559","KIVUS","L305","EMOTA","R784","ALSIL"],"NALPO-OMSJ":["TOMSO","P559","KIVUS","L305","EMOTA","R784","GONVI"],"OBNET-OMDB":["DEGSO","M677","VUTEB"],"OBNET-OMDW":["DEGSO","M677","ITBUL","Q322","DATOB"],"OBNET-OMDW*":["DEGSO","M677","LUDAM","G666","ELOVU"],"OBNET-OMFJ":["DEGSO","M677","ITBUL","L305","EMOTA","R784","KUSEN"],"OBNET-OMRK":["DEGSO","M677","ITBUL","L305","EMOTA","R784","ALSIL"],"OBNET-OMSJ":["DEGSO","M677","ITBUL","L305","EMOTA","R784","GONVI"],"ORSAR-OMAA":["ORSAR","DCT","UKILI"],"ORSAR-OMAA,AD*":["ORSAR","G666","ELOVU"],"ORSAR-OMAA,AD":["ORSAR","R784","TATLA","L223","VUTEB","Q569","OBREV","Q311","EMERU"],"ORSAR-OMAD":["ORSAR","DCT","GIDOB"],"ORSAR-OMAL":["ORSAR","R784","TATLA","L223","VUTEB","Q569","OBREV","Q311","TONKI","DCT","KANIP"],"ORSAR-OMDB":["ORSAR","R784","TATLA","L223","VUTEB"],"ORSAR-OMDW*":["ORSAR","G666","ELOVU"],"ORSAR-OMDW":["ORSAR","R784","GONVI"],"ORSAR-OMFJ":["ORSAR","R784","KUSEN"],"ORSAR-OMRK":["ORSAR","R784","ALSIL"],"ORSAR-OMSJ":["ORSAR","R784","GONVI"],"OVONA-OMAA":["RESAR","N318","KAPUM","Z522","ALNEV","Q415","UKILI"],"OVONA-OMAD":["RESAR","N318","KAPUM","N685","GIDOB"],"OVONA-OMAL":["RESAR","N318","KAPUM","N685","GIDOB","DCT","ADV","DCT","KANIP"],"PASOV-OMDB":["PASOV","B540","MIVEK","P574","IMPED"],"PASOV-OMDW":["PASOV","M564","UMAMI"],"PASOV-OMRK":["PASOV","B540","ORKOB","T891","NOLSU","N317","NADNI"],"PASOV-OMSJ":["PASOV","B540","ORKOB","T891","NOLSU"],"PATAT-OMAA,AD":["PATAT","L519","IVOXI","Q311","EMERU"],"PATAT-OMAL":["PATAT","L519","IVOXI","Q311","TONKI","DCT","KANIP"],"PATAT-OMDB,SJ,DW":["PATAT","L519","PUVAL"],"PATAT-OMFJ":["PATAT","L519","EGPEP","DCT","EMOPI","R784","KUSEN"],"PATAT-OMRK":["PATAT","L519","EGPEP"],"PEKEM-OMAA,AD":["PEKEM","M628","RIGIL","G783","VAVIM","P899","ROVOS"],"PEKEM-OMAL":["PEKEM","M628","RIGIL","G783","VAVIM"],"PEKEM-OMDB":["PEKEM","M628","RIGIL","G783","ASPED","Q308","KIPOK","Q568","IMPED"],"PEKEM-OMDW":["PEKEM","M628","RIGIL","G783","ASPED","Q308","PEDOG","R401","GIDIS"],"PEKEM-OMFJ":["PEKEM","M628","RIGIL","G783","ASPED","Q308","RUDAT"],"PEKEM-OMRK":["PEKEM","M628","RIGIL","G783","ASPED","Q308","ORKOB","T891","NOLSU","N317","NADNI"],"PEKEM-OMSJ":["PEKEM","M628","RIGIL","G783","ASPED","Q308","ORKOB","T891","NOLSU"],"RIBOT-OMAA,AD":["RIBOT","M550","GOLGU","M318","ATUDO"],"RIBOT-OMAL":["RIBOT","M550","GOLGU","M318","ATUDO","DCT","ADV","DCT","KANIP"],"RIBOT-OMDB,SJ":["RIBOT","M550","GOLGU","M318","RURAL","Q317","LORID"],"RIBOT-OMDW":["RIBOT","M550","GOLGU","M318","RURAL","Q317","LORID"],"RIBOT-OMRK":["RIBOT","M550","GOLGU","M318","RURAL","Q317","LORID","DCT","TOVIV","DCT","ALSIL"],"SODEX-OMAA,AD":["SODEX","N563","NOBTO"],"SODEX-OMAL":["SODEX","N563","ELUDA","G783","VAVIM"],"SOLUD-OMDB":["SOLUD","P574","GISMO","P574","IMPED"],"TANSU-OMAA,AD":["TANSU","G783","VAVIM","P899","ROVOS"],"TANSU-OMAL":["TANSU","G783","VAVIM"],"TANSU-OMDB":["TANSU","G783","ASPED","Q308","KIPOK","Q568","IMPED"],"TANSU-OMDW":["TANSU","G783","ASPED","Q308","PEDOG","R401","GIDIS"],"TANSU-OMFJ":["TANSU","G783","ASPED","Q308","RUDAT"],"TANSU-OMRK":["TANSU","G783","ASPED","Q308","ORKOB","T891","NOLSU","N317","NADNI"],"TANSU-OMSJ":["TANSU","G783","ASPED","Q308","ORKOB","T891","NOLSU"],"TAPRA-OMDB":["TAPRA","M762","MIVEK","P574","IMPED"],"TAPRA-OMDW":["TAPRA","M762","VAXAS","M564","UMAMI"],"TOSNA-OMAA":["ORSIS","N685","UMEVU","Q415","UKILI"],"TOSNA-OMAD":["ORSIS","N685","GIDOB"],"TOSNA-OMAL":["ORSIS","N685","GIDOB","DCT","ADV","DCT","KANIP"],"VAXAS-OMDB":["VAXAS","M762","MIVEK","P574","IMPED"],"VAXAS-OMDW":["VAXAS","M564","UMAMI"],"VAXAS-OMRK":["VAXAS","M762","RUDAT","Q308","ORKOB","T891","NOLSU","N317","NADNI"],"VAXAS-OMSJ":["VAXAS","M762","RUDAT","Q308","ORKOB","T891","NOLSU"],"BUNDU-LABRI-FRA":["BUNDU","DCT","LABRI"],"BUNDU-LABRI*-FRA":["BUNDU","B415","UKILI","DCT","LABRI"],"BUNDU-OMAA-FRA":["BUNDU","DCT","EGPOG","B415","UKILI"],"BUNDU-OMAD-FRA":["BUNDU","DCT","EGPOG","Q666","GIDOB"],"BUNDU-OMAL-FRA":["BUNDU","DCT","EGPOG","Q666","GIDOB","DCT","ADV","DCT","KANIP"],"BUNDU-RETAS-FRA":["BUNDU","DCT","NAPMA","N685","RETAS"],"BUNDU-TONVO-FRA":["BUNDU","DCT","GIDOB","DCT","TONVO"],"BUNDU-TONVO*-FRA":["BUNDU","B415","UKILI","DCT","TONVO"],"GISMO-ALPOB-FRA":["GISMO","DCT","TUDIS","N571","ALPOB"],"GISMO-GABKO-FRA":["GISMO","DCT","GABKO"],"GISMO-KUMUN-FRA":["GISMO","DCT","KUMUN"],"GISMO-ORMID-FRA":["GISMO","DCT","EGTAG","P699","ORMID"],"GISMO-TUMAK-FRA":["GISMO","DCT","MITIX","M557","TUMAK"],"ITRAX-ALPOB-FRA":["ITRAX","DCT","ORBOL","G462","UKUVO","Q563","IMGUX","N563","ALPOB"],"ITRAX-ORMID-FRA":["ITRAX","DCT","ORBOL","G462","UKUVO","Q563","IMGUX","P699","ORMID"],"ITRAX-TOVOX*-FRA":["ITRAX","DCT","UMIBU","P899","TOVOX"],"ITRAX-TOVOX-FRA":["ITRAX","DCT","TOVOX"],"ITRAX-TUMAK-FRA":["ITRAX","DCT","ORBOL","G462","TUMAK"],"KUPRO-LALDO*-FRA":["KUPRO","N300","GIDOB","DCT","LALDO"],"KUPRO-LALDO-FRA":["KUPRO","DCT","GIDOB","DCT","LALDO"],"KUPRO-TONVO-FRA":["KUPRO","DCT","GIDOB","DCT","TONVO"],"KUPRO-TONVO*-FRA":["KUPRO","N300","GIDOB","DCT","TONVO"],"LALDO-ALPOB-FRA":["LALDO","DCT","TUDIS","N571","ALPOB"],"LALDO-ORMID-FRA":["LALDO","DCT","EGTAG","P699","ORMID"],"LALDO-TOSNA-FRA":["LALDO","DCT","EGTAG","Q576","RORON","M430","TOSNA"],"LALDO-TUMAK-FRA":["LALDO","DCT","MITIX","M557","TUMAK"],"MENSA-ALPOB-FRA":["MENSA","DCT","TUDIS","N571","ALPOB"],"MENSA-ORMID-FRA":["MENSA","DCT","EGTAG","P699","ORMID"],"MENSA-TOSNA-FRA":["MENSA","DCT","EGTAG","Q576","RORON","M430","TOSNA"],"MENSA-TUMAK-FRA":["MENSA","DCT","MITIX","M557","TUMAK"],"NALPO-LALDO-FRA":["NALPO","DCT","LALDO"],"NALPO-TARDI-FRA":["NALPO","DCT","LOVEM","DCT","TARDI"],"NALPO-TARDI*-FRA":["NALPO","DCT","LOVEM","DCT","ANVIX","L223","TARDI"],"NALPO-TONVO-FRA":["NALPO","DCT","TONVO"],"OBNET-LALDO-FRA":["OBNET","DCT","TOVIV","DCT","LALDO"],"OBNET-TARDI-FRA":["OBNET","DCT","IVOXI","DCT","TARDI"],"OBNET-TARDI*-FRA":["OBNET","DCT","IVOXI","DCT","ANVIX","L223","TARDI"],"OBNET-TONVO-FRA":["OBNET","DCT","TONVO"],"ORSAR-LALDO-FRA":["ORSAR","DCT","GIBIB","DCT","TOVIV","DCT","LALDO"],"ORSAR-TARDI-FRA":["ORSAR","DCT","LAGTA","DCT","TARDI"],"ORSAR-TARDI*-FRA":["ORSAR","DCT","LAGTA","DCT","ANVIX","L223","TARDI"],"ORSAR-TONVO-FRA":["ORSAR","DCT","GIBIB","DCT","TONVO"],"OVONA-LABRI-FRA":["OVONA","DCT","KAPUM","DCT","LABRI"],"OVONA-RETAS-FRA":["OVONA","DCT","NAPMA","N685","RETAS"],"PATAT-ALPOB-FRA":["PATAT","DCT","TUDIS","N571","ALPOB"],"PATAT-OMAA ,AD-FRA":["PATAT","DCT","ITLAP","L519","IVOXI","Q311","EMERU"],"PATAT-OMAL-FRA":["PATAT","DCT","ITLAP","L519","IVOXI","Q311","TONKI","DCT","KANIP"],"PATAT-ORMID-FRA":["PATAT","DCT","EGTAG","P699","ORMID"],"PATAT-TARDI-FRA":["PATAT","DCT","TARDI"],"PATAT-TARDI*-FRA":["PATAT","DCT","ANVIX","L223","TARDI"],"PATAT-TOSNA-FRA":["PATAT","DCT","EGTAG","Q576","RORON","M430","TOSNA"],"PATAT-TUMAK-FRA":["PATAT","DCT","MITIX","M557","TUMAK"],"SIR-LALDO-FRA":["SIR","DCT","TATLA","DCT","TOVIV","DCT","LALDO"],"SIR-TARDI-FRA":["SIR","DCT","TARDI"],"SIR-TARDI*-FRA":["SIR","DCT","ANVIX","L223","TARDI"],"SIR-TONVO-FRA":["SIR","DCT","TATLA","DCT","TONVO"],"SODEX-ALPOB-FRA":["SODEX","DCT","BOSEV","N563","ALPOB"],"SODEX-ORMID-FRA":["SODEX","DCT","BOSEV","N563","IMGUX","P699","ORMID"],"SODEX-TOVOX-FRA":["SODEX","DCT","UMIBU","DCT","TOVOX"],"SODEX-TOVOX*-FRA":["SODEX","DCT","UMIBU","P899","TOVOX"],"SODEX-TUMAK-FRA":["SODEX","DCT","BOSEV","Q565","UKUVO","G462","TUMAK"],"TOSNA-LABRI-FRA":["ORSIS","N685","TOSNA","DCT","LABRI"],"TOSNA-RETAS-FRA":["ORSIS","N685","TOSNA","DCT","NAPMA","N685","RETAS"]},$e={"BUNDU-LABRI":["S","B"],"BUNDU-RETAS":["S","B"],"BUNDU-TONVO":["S","M"],"ITRAX-ALPOB":["B","S","C"],"ITRAX-ALPOB":["B","S","C"],"ITRAX-ORMID*":["B","S","C"],"ITRAX-ORMID":["B","S","C"],"ITRAX-TOVOX":["B","S","C"],"ITRAX-TUMAK":["B","S","C"],"ITRAX-TUMAK*":["B","S","C"],"KUPRO-GABKO":["S","M"],"KUPRO-LALDO*":["S","G","D","H","R"],"KUPRO-LALDO":["S","M"],"KUPRO-TONVO":["S","M"],"LALDO-ALPOB":["M","C"],"LALDO-ORMID":["M","C"],"LALDO-TOSNA":["M","C"],"LALDO-TUMAK":["M","C"],"LUDID-PEKEM":["L"],"LUDID-TANSU":["L"],"MENSA-ALPOB":["M","C"],"MENSA-KUMUN":["M"],"MENSA-ORMID":["M","C"],"MENSA-TOSNA":["M","C"],"MENSA-TUMAK":["M","C"],"MUSAP-KUMUN":["M"],"NALPO-GABKO":["N","M"],"NALPO-LALDO":["N","M"],"NALPO-TARDI":["N","M"],"NALPO-TONVO":["N","M"],"OBNET-GABKO":["N","M"],"OBNET-LALDO":["N","M"],"OBNET-TARDI":["N","M"],"OBNET-TONVO":["N","M"],"ORSAR-LALDO":["N","M"],"ORSAR-TARDI":["N","M"],"ORSAR-TONVO":["N","M"],"OVONA-LABRI":["S","B"],"OVONA-RETAS":["S","B"],"PATAT-ALPOB":["M","C"],"PATAT-ORMID":["M","C"],"PATAT-TARDI":["M"],"PATAT-TOSNA":["M","C"],"PATAT-TUMAK":["M","C"],"PEKEM-GABKO":["L","B","M"],"SIR-LALDO":["N","M"],"SIR-TARDI":["N","M"],"SIR-TONVO":["N","M"],"SODEX-ALPOB":["B","S","C"],"SODEX-ORMID":["B","S","C"],"SODEX-TOVOX":["B","S"],"SODEX-TUMAK":["B","S","C"],"SOLUD-ALPOB":["M","C"],"SOLUD-GABKO":["M"],"SOLUD-KUMUN":["M"],"SOLUD-ORMID":["M","C"],"SOLUD-TUMAK":["M","C"],"TANSU-GABKO":["L","B","M"],"TOSNA-LABRI":["S","B"],"TOSNA-RETAS":["S","B"],"OMAA,AD-ALPOB":["D","C"],"OMAA,AD-GABKO":["H","M"],"OMAA,AD-KATIT":["H","L"],"OMAA,AD-KUMUN":["H","M"],"OMAA,AD-LABRI":["A"],"OMAA,AD-ORMID":["D","C"],"OMAA,AD-ORSAR":["D","W"],"OMAA,AD-PEKEM":["A","L"],"OMAA,AD-RETAS":["A"],"OMAA,AD-RIBOT":["L"],"OMAA,AD-TANSU":["A","L"],"OMAA,AD-TOVOX":["G","S"],"OMAA,AD-TUMAK":["D","C"],"OMAL-ALPOB":["H","D","C"],"OMAL-GABKO":["H","M"],"OMAL-KATIT":["L"],"OMAL-KUMUN":["H","M"],"OMAL-ORMID":["H","D","C"],"OMAL-PEKEM":["A","L"],"OMAL-RIBOT":["L"],"OMAL-TANSU":["A","L"],"OMAL-TOVOX":["H","G","S"],"OMAL-TUMAK":["H","D","C"],"OMDB,DW,SJ-ALPOB":["D","C"],"OMDB,SJ-GABKO":["R"],"OMDB,DW,SJ-KATIT":["H","L"],"OMDB,DW,SJ-MEMTU":["E","A","L"],"OMDB,DW,SJ-ORMID":["D","C"],"OMDB,DW,SJ-ORSAR":["D","W"],"OMDB,DW,SJ-PEKEM":["E","A","L"],"OMDB,DW,SJ-RIBOT":["H","L"],"OMDB,DW,SJ-TANSU":["E","A","L"],"OMDB,DW,SJ-TARDI":["E"],"OMDB,DW,SJ-TOSNA*":["D","C"],"OMDB,DW,SJ-TOSNA":["D","C"],"OMDB,DW,SJ-TUMAK":["D","C"],"OMDB,SJ-GOMTA":["R"],"OMDB,SJ-LALDO":["R"],"OMDW-GABKO":["H","R"],"OMDW-GOMTA":["R"],"OMDW-LALDO":["R"],"OMFJ-ALPOB":["R","H","D","C"],"OMFJ-GABKO":["R"],"OMFJ-KATIT":["H","L"],"OMFJ-ORMID":["R","H","D","C"],"OMFJ-PEKEM":["E","A","L"],"OMFJ-RIBOT":["H","L"],"OMFJ-TANSU":["E","A","L"],"OMFJ-TONVO":["R"],"OMFJ-TOSNA":["R","H","D","C"],"OMFJ-TUMAK":["H","D","C"],"OMRK-ALPOB":["R","H","D","C"],"OMRK-GABKO":["R"],"OMRK-GOMTA":["R"],"OMRK-KATIT":["H","L"],"OMRK-LALDO":["R"],"OMRK-MEMTU":["E","A","L"],"OMRK-ORMID":["H","D","C"],"OMRK-PEKEM":["H","L"],"OMRK-RIBOT":["H","L"],"OMRK-TANSU":["E","A","L"],"OMRK-TARDI":["E"],"OMRK-TOSNA":["H","D","C"],"OMRK-TUMAK":["H","D","C"],"ASTOG-OMDB":["C","W"],"ASTOG-OMDW":["C","W"],"ASTOG-OMFJ":["C","W"],"ASTOG-OMRK":["C","W"],"ASTOG-OMSJ":["C","W"],"BUNDU-OMAA":["S","G"],"BUNDU-OMAD":["S","G"],"BUNDU-OMAL":["S","G"],"ITRAX-OMAA,AD":["A"],"ITRAX-OMAL":["A"],"KATIT-OMAA,AD":["L"],"KATIT-OMAL":["L"],"KATIT-OMDB":["L","H"],"KATIT-OMDW":["L"],"KATIT-OMRK":["L","H"],"KATIT-OMSJ":["L","H"],"KUPRO-OMAA":["S","G"],"KUPRO-OMAD":["S","G"],"KUPRO-OMAL":["S","G"],"MENSA-OMFJ":["E","Y"],"MENSA-OMRK":["E","Y"],"MENSA-OMSJ":["E","Y"],"MUSAP-OMDB":["E","Y"],"MUSAP-OMDW":["E","Y"],"MUSAP-OMFJ":["E","Y"],"MUSAP-OMRK":["E","Y"],"MUSAP-OMSJ":["E","Y"],"NALPO-OMDB":["N","W"],"NALPO-OMDW":["N","W"],"NALPO-OMDW*":["N","D"],"NALPO-OMFJ":["N","H","R"],"NALPO-OMRK":["N","W"],"NALPO-OMSJ":["N","W"],"OBNET-OMDB":["N","W"],"OBNET-OMDW":["N","W"],"OBNET-OMDW*":["N","D"],"OBNET-OMFJ":["N","H","R"],"OBNET-OMRK":["N","W"],"OBNET-OMSJ":["N","W"],"ORSAR-OMAA":["N","D"],"ORSAR-OMAA,AD*":["N","D"],"ORSAR-OMAA,AD":["N","H"],"ORSAR-OMAD":["N","D"],"ORSAR-OMAL":["N","H"],"ORSAR-OMDB":["N","W"],"ORSAR-OMDW*":["N","D"],"ORSAR-OMDW":["N","W"],"ORSAR-OMFJ":["N","H","R"],"ORSAR-OMRK":["N","W"],"ORSAR-OMSJ":["N","W"],"OVONA-OMAA":["S","G"],"OVONA-OMAD":["S","G"],"OVONA-OMAL":["S","G","H"],"PASOV-OMDB":["E","Y"],"PASOV-OMDW":["E","Y"],"PASOV-OMRK":["E","Y"],"PASOV-OMSJ":["E","Y"],"PATAT-OMAA,AD":["M","H"],"PATAT-OMAL":["M","H"],"PATAT-OMDB,SJ,DW":["R"],"PATAT-OMFJ":["R"],"PATAT-OMRK":["R"],"PEKEM-OMAA,AD":["L","A"],"PEKEM-OMAL":["L","A"],"PEKEM-OMDB":["L","A","E","Y"],"PEKEM-OMDW":["L","A","E","Y"],"PEKEM-OMFJ":["L","A","E","Y"],"PEKEM-OMRK":["L","A","E","Y"],"PEKEM-OMSJ":["L","A","E","Y"],"RIBOT-OMAA,AD":["L"],"RIBOT-OMAL":["L"],"RIBOT-OMDB,SJ":["L","H"],"RIBOT-OMDW":["L"],"RIBOT-OMRK":["L","H"],"SODEX-OMAA,AD":["A"],"SODEX-OMAL":["A"],"SOLUD-OMDB":["E","Y"],"TANSU-OMAA,AD":["L","A"],"TANSU-OMAL":["L","A"],"TANSU-OMDB":["L","A","E","Y"],"TANSU-OMDW":["L","A","E"],"TANSU-OMFJ":["L","A","E","Y"],"TANSU-OMRK":["L","A","E","Y"],"TANSU-OMSJ":["L","A","E","Y"],"TAPRA-OMDB":["E","Y"],"TAPRA-OMDW":["E","Y"],"TOSNA-OMAA":["S","G"],"TOSNA-OMAD":["S","G"],"TOSNA-OMAL":["S","G","H"],"VAXAS-OMDB":["E","Y"],"VAXAS-OMDW":["E","Y"],"VAXAS-OMRK":["E","Y"],"VAXAS-OMSJ":["E","Y"],"BUNDU-LABRI-FRA":["S","B"],"BUNDU-LABRI*-FRA":["S","B"],"BUNDU-OMAA-FRA":["S","G"],"BUNDU-OMAD-FRA":["S","G"],"BUNDU-OMAL-FRA":["S","G"],"BUNDU-RETAS-FRA":["S","B"],"BUNDU-TONVO-FRA":["S","M"],"BUNDU-TONVO*-FRA":["S","M"],"GISMO-ALPOB-FRA":["M","C"],"GISMO-GABKO-FRA":["M"],"GISMO-KUMUN-FRA":["M"],"GISMO-ORMID-FRA":["M","C"],"GISMO-TUMAK-FRA":["M","C"],"ITRAX-ALPOB-FRA":["B","S","C"],"ITRAX-ORMID-FRA":["B","S","C"],"ITRAX-TOVOX*-FRA":["B","S"],"ITRAX-TOVOX-FRA":["B","S"],"ITRAX-TUMAK-FRA":["B","S","C"],"KUPRO-LALDO*-FRA":["S","M"],"KUPRO-LALDO-FRA":["S","M"],"KUPRO-TONVO-FRA":["S","M"],"KUPRO-TONVO*-FRA":["S","M"],"LALDO-ALPOB-FRA":["M","C"],"LALDO-ORMID-FRA":["M","C"],"LALDO-TOSNA-FRA":["M","C"],"LALDO-TUMAK-FRA":["M","C"],"MENSA-ALPOB-FRA":["M","C"],"MENSA-ORMID-FRA":["M","C"],"MENSA-TOSNA-FRA":["M","C"],"MENSA-TUMAK-FRA":["M","C"],"NALPO-LALDO-FRA":["N","M"],"NALPO-TARDI-FRA":["N","M"],"NALPO-TARDI*-FRA":["N","M"],"NALPO-TONVO-FRA":["N","M"],"OBNET-LALDO-FRA":["N","M"],"OBNET-TARDI-FRA":["N","M"],"OBNET-TARDI*-FRA":["N","M"],"OBNET-TONVO-FRA":["N","M"],"ORSAR-LALDO-FRA":["M"],"ORSAR-TARDI-FRA":["M"],"ORSAR-TARDI*-FRA":["M"],"ORSAR-TONVO-FRA":["M"],"OVONA-LABRI-FRA":["S","B"],"OVONA-RETAS-FRA":["S","B"],"PATAT-ALPOB-FRA":["M","C"],"PATAT-OMAA ,AD-FRA":["M","H"],"PATAT-OMAL-FRA":["M","H"],"PATAT-ORMID-FRA":["M","C"],"PATAT-TARDI-FRA":["M"],"PATAT-TARDI*-FRA":["M"],"PATAT-TOSNA-FRA":["M","C"],"PATAT-TUMAK-FRA":["M","C"],"SIR-LALDO-FRA":["N","M"],"SIR-TARDI-FRA":["N","M"],"SIR-TARDI*-FRA":["N","M"],"SIR-TONVO-FRA":["N","M"],"SODEX-ALPOB-FRA":["B","S","C"],"SODEX-ORMID-FRA":["B","S","C"],"SODEX-TOVOX-FRA":["B","S"],"SODEX-TOVOX*-FRA":["B","S"],"SODEX-TUMAK-FRA":["B","S","C"],"TOSNA-LABRI-FRA":["S","B"],"TOSNA-RETAS-FRA":["S","B"]},ot={"ASTOG-OMDB":{CFL:"F210 or Below",XFL:"A100"},"ASTOG-OMDW":{CFL:"F210 or Below",XFL:"F160"},"ASTOG-OMFJ":{CFL:"F210 or Below",XFL:"A100"},"ASTOG-OMRK":{CFL:"F210 or Below",XFL:"A100"},"ASTOG-OMSJ":{CFL:"F210 or Below",XFL:"A090"},"BUNDU-OMAA":{CFL:"F350 or Below",XFL:"A120"},"BUNDU-OMAD":{CFL:"F350 or Below",XFL:"A100"},"OMAA,AD-GABKO":{CFL:"F150",XFL:"RFL",REMARKS:"FPL remarks = 'K' (Krachi FIR)"},"BUNDU-LABRI":{CFL:"RFL / F270 if Dep Doha",XFL:"RFL",REMARKS:"Overflying Muscat FIR or with destination other than OOMS/OOMN/OOSH"},"BUNDU-RETAS":{CFL:"RFL / F270 if Dep Doha",XFL:"F600 or Below",REMARKS:"Destinations OOMS/OOMN/OOSH. <br>F330 or below for OOMS/OOMN and F230 for OOSH"},"BUNDU-TONVO":{CFL:"RFL / F270 if Dep Doha",XFL:"RFL",REMARKS:" Available levels over TONVO are F270 and above. <br>Traffic shall cross UKILI F230 or above and GEVIV F270 or above"},"OMAA,AD-TUMAK":{CFL:"F150",XFL:"RFL"},"OMAA,AD-ORMID":{CFL:"F150",XFL:"F260 or Below Cruising",REMARKS:"Destinations: OBBI, OBBS, OBKH, OEDF and OEDR"},"NALPO-OMFJ":{CFL:"F310",XFL:"F100",REMARKS:"N-H: F250, H-R: F190"}},Gt=[{shapeName:"P48 UNL_GND",shapeType:"circle",coords:["243850.46N","0550715.30E"],radiusNm:5,floor:"A000",ceiling:" F600",shapeInfo:"Argoob",type:"Permanent, Military activity extremely hazardous to aircraft"},{shapeName:"P108 FL220_GND",shapeType:"circle",coords:["244041N","0544152E"],radiusNm:3,floor:"A000",ceiling:"F220",shapeInfo:"Tawilah",type:"Permanent, Controlled by Air Operations Center."}],_t=[{shapeName:"OIR38 12,000Ft_AMSL-GND",shapeType:"circle",coords:["255420N","0543320E"],radiusNm:12,floor:"A000",ceiling:"F120",shapeInfo:"Siri_Island",type:"Permanent"},{shapeName:"R51 FL300_FL155",shapeType:"polygon",coords:[["245630.00N","0551155.00E"],["244755.14N","0554814.67E"],["244303.89N","0554813.77E"],["244044.20N","0554813.34E"],["243500.00N","0554413.00E"],["242923.17N","0554558.61E"],["242437.88N","0554124.58E"],["242943.38N","0551411.55E"],["243429.76N","0551331.68E"],["243335.74N","0550548.57E"],["243447.39N","0550401.23E"],["243824.15N","0550147.31E"],["244009.93N","0550137.10E"],["245630.00N","0551155.00E"]],floor:"F155",ceiling:"F300",shapeInfo:"Minhad_Trng_Area",type:`Activity notified by UAE ACC, When active: Controlled by AL MAKTOUM RADAR,
 Contact 124.025 MHz before entering Military jet training`},{shapeName:"R53 FL155_GND",shapeType:"polygon",coords:[["244134.55N","0551221.09E"],["244030.00N","0551430.00E"],["243453.00N","0552421.00E"],["243500.00N","0552700.00E"],["243500.41N","0553519.70E"],["243500.00N","0554413.00E"],["242324.51N","0554750.88E"],["242534.00N","0553628.00E"],["242804.83N","0552301.05E"],["242943.38N","0551411.55E"],["243429.76N","0551331.68E"],["244134.55N","0551221.09E"]],floor:"A000",ceiling:"F155",shapeInfo:"Minhad_Trng_Area",type:`Activity notified by UAE ACC, When active: Controlled by DUBAI SOUTH RADAR,
 Contact 120.400 MHz before entering Military jet training`},{shapeName:"R67 FL300-9,500Ft_AGL",shapeType:"polygon",coords:[["253530N","0562150E"],["252500N","0562150E"],["252500N","0555958E"],["252800N","0554500E"],["255230N","0560130E"],["255316N","0560729E"],["253549N","0561011E"],["253613N","0561945E"],["253530N","0562150E"]],floor:"A095",ceiling:"F300",shapeInfo:"Ras_Al_Kheimah",type:"Activity notified by UAE ACC, High level military jet training"},{shapeName:"R90 FL185-2,000Ft_AGL",shapeType:"polygon",coords:[["234730N","0552312E"],["234428N","0553023E"],["232332N","0552406E"],["230723N","0551420E"],["234730N","0552312E"]],floor:"A020",ceiling:"F185",shapeInfo:"Burami South",type:"Permanent, Controlled by UAE Air Force"}],xt=[{shapeName:"D22 FL300_GND",shapeType:"polygon",coords:[["250330N","0541625E"],["251200N","0542210E"],["250713N","0543130E"],["245830N","0542545E"],["250330N","0541625E"]],floor:"A000",ceiling:"F300",shapeInfo:"Sea_Range_Charlie",type:`NOTAM, Air to Air towed target gunnery and Naval gunnery practice,
 Controlled by UAE ACC `},{shapeName:"D24 FL220_GND",shapeType:"polygon",coords:[["243429.76N","0551331.68E"],["242931.08N","0551413.26E"],["242839.42N","0550708.58E"],["243008.88N","0550517.88E"],["243328.80N","0550449.32E"],["243429.76N","0551331.68E"]],floor:"A000",ceiling:"F220",shapeInfo:"Bargat_Al_Hagat",type:"NOTAM - Controlled by AUH APP"}],Xt=[{shapeName:"TRNG_A",shapeType:"polygon",coords:[["253026N","0533441E"],["252203N","0532838E"],["250534N","0535616E"],["251355N","0540220E"],["253026N","0533441E"]],floor:"A060",ceiling:"A130",shapeInfo:"13,000ft AMSL - 6,000ft AMSL",type:`Civil Training Flights, Activity notified by UAE ACC,
 When active: Controlled by UAE ACC, Contact: 120.525 Mhz`},{shapeName:"TRNG_B",shapeType:"polygon",coords:[["251341N","0532237E"],["252203N","0532838E"],["250534N","0535616E"],["245711N","0535012E"],["251341N","0532237E"]],floor:"A060",ceiling:"A130",shapeInfo:"13,000ft AMSL - 6,000ft AMSL",type:`Civil Training Flights, Activity notified by UAE ACC,
 When active: Controlled by UAE ACC, Contact: 120.525 Mhz`}],kt=[{shapeName:"OMFJ CTA_I",shapeType:"dynamicShape",closed:!0,steps:[{type:"point",coord:["253605.65N","0562151.39E"]},{type:"arc",center:["250600.00N","0562103.00E"],radiusNm:30,to:["243644.15N","0562847.71E"],clockwise:!0},{type:"line",to:["250600N","0562103E"]},{type:"line",to:["252603.78N","0562135.23E"]},{type:"line",to:["253605.65N","0562151.39E"]}],floor:"A015",ceiling:"A095",shapeInfo:"9,500 FT AMSL / 1,500 FT AMSL",type:"Class: C"},{shapeName:"OMFJ CTA_II",shapeType:"dynamicShape",closed:!0,steps:[{type:"point",coord:["244606.37N","0562357.52E"]},{type:"arc",center:["250600N","0562103E"],radiusNm:20,to:["245420.06N","0560307.82E"],clockwise:!0},{type:"line",to:["251014N","0560656E"]},{type:"line",to:["252300N","0561000E"]},{type:"line",to:["252318.22N","0560952.37E"]},{type:"arc",center:["250600N","0562103E"],radiusNm:20,to:["252603.78N","0562135.23E"],clockwise:!0},{type:"line",to:["250600N","0562103E"]},{type:"line",to:["244606.37N","0562357.52E"]}],floor:"A020",ceiling:"A095",shapeInfo:"9,500 FT AMSL / 2,000 FT AMSL",type:"Class: C"},{shapeName:"OMAA_RADAR CENTRAL",shapeType:"dynamicShape",closed:!0,steps:[{type:"point",coord:["241805N","0542246E"]},{type:"line",to:["242541N","0542730E"]},{type:"line",to:["242506N","0543726E"]},{type:"line",to:["243629N","0544349E"]},{type:"line",to:["244203N","0544656E"]},{type:"line",to:["245302N","0545358E"]},{type:"line",to:["244702N","0550556E"]},{type:"line",to:["244520N","0550450E"]},{type:"line",to:["244011N","0550137E"]},{type:"line",to:["243827N","0550147E"]},{type:"arc",center:["243850N","0550715E"],radiusNm:5,to:["243420N","0550452E"],clockwise:!1},{type:"line",to:["243050N","0550920E"]},{type:"line",to:["243030N","0551000E"]},{type:"line",to:["242803N","0552300E"]},{type:"line",to:["241630N","0552129E"]},{type:"line",to:["235019N","0551800E"]},{type:"line",to:["240000N","0550000E"]},{type:"line",to:["241930N","0543100E"]},{type:"line",to:["241805N","0542246E"]}],floor:"A015",ceiling:"F155",shapeInfo:"FL 155 / 1,500 FT AMSL* Class : C",type:"1,500 FT AMSL / GND Class : G"},{shapeName:"OMAA_RADAR WEST",shapeType:"polygon",coords:[["242800N","0535500E"],["243500N","0535500E"],["244536N","0540032E"],["245800N","0541200E"],["245700N","0542446E"],["245500N","0545000E"],["245302N","0545358E"],["244203N","0544656E"],["243629N","0544349E"],["242506N","0543726E"],["242541N","0542730E"],["241805N","0542246E"],["242424N","0540828E"]],floor:"A015",ceiling:"F155",shapeInfo:"FL 155 / 1,500 FT AMSL* Class : C",type:"1,500 FT AMSL / GND Class : G"},{shapeName:"OMAA_RADAR EAST",shapeType:"polygon",coords:[["243500N","0552700E"],["243500N","0555000E"],["243500N","0560000E"],["243028N","0560525E"],["240000N","0553500E"],["234428N","0553023E"],["234730N","0552312E"],["235019N","0551800E"],["241630N","0552129E"],["242803N","0552300E"]],floor:"A020",ceiling:"A095",shapeInfo:"9,500 FT AMSL / 2,000 FT AMSL Class : C",type:"2,000 FT AMSL / GND Class : G"},{shapeName:"OMDB CTA_X",shapeType:"polygon",coords:[["254135N","0550842E"],["252355N","0545522E"],["252659N","0544348E"],["254453N","0545818E"]],floor:"A015",ceiling:"A085",shapeInfo:"8,500 FT AMSL / 1,500 FT AMSL Class: C",type:"1,500 FT AMSL / GND Class: G"},{shapeName:"OMRK CTA",shapeType:"polygon",coords:[["255800N","0560000E"],["252318N","0560952E"],["252300N","0561000E"],["252000N","0560600E"],["251900N","0555300E"],["252800N","0554500E"],["255500N","0553805E"],["255800N","0560000E"]],floor:"A015",ceiling:"A065",shapeInfo:"6,500 FT AMSL / 1,500 FT AMSL",type:"CLASS: C"}],Ht=[{frqName:"OMDB W / 124.9",condition:"some text",pin:["253710.07N","0545600.46E"]},{frqName:"OMDB E / 124.9",condition:"",pin:["250004.31N","0554157.58E"]},{frqName:"OMDW/SJ-DPN / 124.675",condition:"",pin:["253357.69N","0553321.70E"]},{frqName:"OMDW/DM-DPS / 121.025",condition:"",pin:["250319.37N","0543236.72E"]},{frqName:"OMFJ-APP / 129.4",condition:"",pin:["252519.97N","0562322.07E"]},{frqName:"OMFJ-TWR / 126.6",condition:"",pin:["252128.50N","0562322.07E"]},{frqName:"OMDW/DM-AMR / 124.025",condition:"",pin:["244831.28N","0553133.54E"]},{frqName:"OMRK / 118.25",condition:"",pin:["254324.23N","0555418.12E"]},{frqName:"OMAA-W / 128.1",condition:"",pin:["243553.29N","0540329.76E"]},{frqName:"OBBB-EH / 132.12",condition:"",pin:["260314.07N","0525044.48E"]},{frqName:"OTDF-ANL / 135.725",condition:"some text",pin:["260010.22N","0525046.76E"]},{frqName:"OBBB-EL / 132.85",condition:"F345 and below",pin:["254425.28N","0523420.57E"]},{frqName:"OTDF-ASH /132.975",condition:"",pin:["254050.11N","0523408.00E"]},{frqName:"OTDF-TMN / 121.1",condition:"",pin:["253726.16N","0523355.43E"]},{frqName:"OIIX-5 / 120.3",condition:"",pin:["262103.32N","0553602.55E"]},{frqName:"OIIX-4 / 133.4",condition:"",pin:["261612.39N","0535935.71E"]},{frqName:"OEJD / 120.55",condition:"some text",pin:["224615.29N","0525658.03E"]},{frqName:"OEJD / 132.9-MIGMA",condition:"some text",pin:["224309.82N","0525658.03E"]},{frqName:"OEJD / 134.5-PURDA",condition:"some text",pin:["223952.69N","0525658.03E"]},{frqName:"OTDF-TMS / 120.675",condition:"",pin:["251352.50N","0521308.77E"]},{frqName:"OOMM-C / 124.7",condition:"",pin:["241532.62N","0560145.91E"]},{frqName:"OOMM-N / 119.8",condition:"",pin:["251018.88N","0564104.96E"]}],Wt=[{point:"ITLAP",heading:204,leg:6,turn:"Left",outboundHeading:24,limit:"A100 - F180",floor:"A100",ceiling:"F180"},{point:"VUTEB",heading:107,leg:8,turn:"Right",outboundHeading:287,limit:"A100 - F250",floor:"A100",ceiling:"F250"},{point:"IMPED",heading:298,leg:8,turn:"Right",outboundHeading:118,limit:"A100 - F250",floor:"A100",ceiling:"F250"},{point:"ALNEV",heading:117,leg:8,turn:"Right",outboundHeading:297,limit:"A100 - F220",floor:"A100",ceiling:"F220"},{point:"ROVOS",heading:280,leg:7,turn:"Right",outboundHeading:100,limit:"A100 - F150",floor:"A100",ceiling:"F150"}],nt={OMAA_31L:[["242518N","0544001E"],["241909N","0544841E"]],OMAA_31R:[["242632N","0544012E"],["242024N","0544852E"]],OMAA_13L:[["242754N","0543817E"],["243403N","0542938E"]],OMAA_13R:[["242639N","0543806E"],["243248N","0542927E"]],OMAD_31:[["242510N","0542814E"],["241900N","0543651E"]],OMAD_13:[["242614N","0542644E"],["243225N","0541806E"]],OMAL_19:[["241647N","0553642E"],["242641N","0553807E"]],OMAL_01:[["241438N","0553624E"],["240443N","0553459E"]],OMBY_13:[["241729N","0523416E"],["242414N","0522611E"]],OMBY_31:[["241633.46N","0523522.45E"],["240948N","0524327E"]],OMAS_31:[["250802.32N","0525247.65E"],["250131N","0530110E"]],OMAS_13:[["250834N","0525207E"],["251504N","0524344E"]],OMDB_12L:[["251600N","0552047E"],["252113N","0551122E"]],OMDB_12R:[["251522N","0552129E"],["252035N","0551204E"]],OMDB_30L:[["251407N","0552345E"],["250853N","0553310E"]],OMDB_30R:[["251446N","0552300E"],["250933N","0553225E"]],OMDW_30:[["245310N","0551049E"],["244757N","0552012E"]],OMDW_12:[["245426N","0550831E"],["245938N","0545907E"]],OMSJ_30:[["251914N","0553208E"],["251352N","0554127E"]],OMSJ_12:[["252025N","0553006E"],["252547N","0552046E"]],OMRK_16:[["253747N","0555602E"],["254726N","0555308E"]],OMRK_34:[["253549N","0555638E"],["252610N","0555931E"]],OMFJ_11:[["250707N","0561825E"],["251056N","0560813E"]],OMFJ_29:[["250620N","0562029E"],["250230N","0563040E"]],SIR_12:[["255458N","0543145E"],["260054N","0542248E"]],SIR_30:[["255411N","0543258E"],["254815N","0544154E"]],KIS_27R:[["263136N","0535957E"],["263045N","0541105E"]],KIS_09L:[["263146N","0535746E"],["263237N","0534638E"]],MCT_08R:[["233531N","0581618E"],["233439N","0580526E"]],MCT_26L:[["233542N","0581824E"],["233633N","0582916E"]],OOSH_15:[["242409N","0563702E"],["243312N","0563223E"]],OOSH_33:[["242211N","0563802E"],["241308N","0564241E"]],BND_12L:[["271357N","0562315E"],["272248N","0562828E"]],BNE_03R:[["271211N","0562213E"],["270320N","0561701E"]],QSM_23:[["264601N","0555507E"],["265232N","0560337E"]],QSM_05:[["264432N","0555310E"],["263802N","0554441E"]],DOH_16L:[["251746N","0513632E"],["252703N","0513226E"]],DOH_34R:[["251520N","0513736E"],["250603N","0514142E"]],DOH_16R:[["251728N","0513523E"],["252645N","0513118E"]],DOH_34L:[["251519N","0513619E"],["250602N","0514024E"]],BAH_12L:[["261644N","0503710E"],["262209N","0502748E"]],BAH_30R:[["261546N","0503852E"],["261021N","0504814E"]]},we={AA820:["243127.2N","0543121.3E"],AA824:["244605.8N","0543435.8E"],AA827:["243315.8N","0544907.3E"],AA834:["242200.0N","0545443.3E"],AA836:["242407.5N","0545441.5E"],AA839:["241526.5N","0545353.1E"],AA842:["242419.6N","0545020.0E"],AD814:["241441.8N","0544331.1E"],AD813:["241321.4N","0545204.0E"],EGSUP:["242155.0N","0542139.3E"],IMTUP:["241922.3N","0550345.3E"],ITKOV:["241718.3N","0545116.3E"],ITLIV:["244505.3N","0544921.7E"],ITREN:["241222.8N","0545810.1E"],KUVIN:["243940.1N","0542635.7E"],LONUP:["243608.8N","0544604.3E"],MURSU:["244820.3N","0544011.6E"],MUSUL:["244047.8N","0541503.0E"],OBMUK:["244403.1N","0542930.4E"],OBTOL:["243621.9N","0542424.4E"],PATAM:["242947.6N","0545531.7E"],PEGEB:["241921.4N","0545718.3E"],RABDU:["242407.0N","0543845.9E"],RUKOS:["242324.7N","0543018.8E"],UKPAP:["243701.8N","0545236.8E"],ULALA:["242432.4N","0545119.9E"],VEGIR:["241148.3N","0544636.4E"]},Ee={STARA_13:[["AA836","A030"],["PATAM","A060"],["UKPAP","A090"],["ITLIV","A120"],["MURSU","A150"],["DAXIB","A150"]],DAXIB_AD_13:[["AD814",""],["AD813",""],["VEGIR",""],["RUKOS",""],["EGSUP",""],["MUSUL",""],["DAXIB",""]],BOSEV_AA_13:[["ULALA",""],["AA834",""],["ITKOV",""],["VEGIR",""],["RUKOS",""],["EGSUP",""],["MUSUL",""],["BOSEV",""]],TULON_AA_13:[["AA836",""],["PATAM",""],["UKPAP",""],["ITLIV",""],["TULON",""]],KANIP_AA_13:[["ITKOV",""],["AA839",""],["ITREN",""],["KANIP",""]],ATUDO_AA_13:[["ITKOV",""],["AA839",""],["PEGEB",""],["AA842",""],["RABDU",""],["ATUDO",""]],KANIP_AA_31:[["AA820",""],["OBTOL",""],["KUVIN",""],["OBMUK",""],["AA824",""],["MURSU",""],["ITLIV",""],["LONUP",""],["AA827",""],["IMTUP",""],["KANIP",""]]},Ge={OUT:["ORMID","ALPOB","TUMAK","GABKO","GOMTA","TONVO","TARDI","LABRI","RETAS","MEMTU","KUMUN","TOVOX"],IN:["ORSAR","SIR","PATAT","MENSA","PASOV","SOLUD","TAPRA","MUSAP","ITRAX","SODEX","BUNDU","KUPRO","LUDID","ASTOG","OVONA","NALPO","OBNET"],BI:["LALDO","RIBOT","TANSU","PEKEM","MUXIT","RIBOT","TOSNA"],ST:["UKILI","VUTEB","PUVAL","IMPED","EMERU","ROVOS","NOBTO","ATUDO","LORID","GONVI","DATOB","GIDOB","ELOVU","GERUL","UMAMI","NOLSU","GIDIS","KANIP"]};Object.entries(Ge).forEach(([o,t])=>{t.forEach(e=>{Ge[e]=o})});const Ze={IN:"#c95e85",OUT:"#51a9e4",BI:"#c4aa4b",ST:"#61a386"};class Jt{fixLayer=null;fixNameLayer=null;constructor(){this.map=null,this._baseMapVisible=!1,this._baseMapLayer=null,this._theme={airwaysOff:"#848787",airwaysOn:"#576C7D",runwaysOff:"#00ADD6",runwaysOn:"black",boundaryOff:"#B3B386",boundaryOn:"#7D4575"},this._airwayColor=this._theme.airwaysOff,this._runwayColor=this._theme.runwaysOff,this._boundaryColor=this._theme.boundaryOff,this.layers={airspace:L.layerGroup(),sectors:L.layerGroup(),airways:L.layerGroup(),runways:L.layerGroup(),fixes:L.layerGroup(),fixNames:L.layerGroup(),routes:L.layerGroup(),airwayHighlights:L.layerGroup(),airwayLabels:L.layerGroup(),airwayPickHighlights:L.layerGroup(),holdings:L.layerGroup(),freq:L.layerGroup(),areasCTA:L.layerGroup(),areasTraining:L.layerGroup(),areasRestricted:L.layerGroup(),areasDanger:L.layerGroup(),areasProhibited:L.layerGroup(),sids:L.layerGroup()},this._airwaysDrawn=!1,this._routesByKey=new Map,this._awyLabelsBuilt=!1,this._awyLabelsVisible=!1,this._activeHighlightedAirways=new Map,this._airwayColorIndex=0,this._airwayColors=["#F7663F","#3DA0F1","#52E747","#FBD329","#7373F1","#17F5CB","#F79E3F","#93C3C7","#C2E747","#CD29FB"]}_getRouteGroup(t){if(!t)return this.layers.routes;let e=this._routesByKey.get(t);return e||(e=L.layerGroup(),this.layers.routes.addLayer(e),this._routesByKey.set(t,e)),e}invalidateSize(){this.map?.invalidateSize?.()}_fixNameScaleCfg={baseZoom:8,basePx:9,minPx:9,maxPx:18,pxPerZoom:1.8};_clamp(t,e,i){return Math.max(e,Math.min(i,t))}_applyFixNameScale(){if(!this.map)return;const t=this.map.getZoom(),e=this._fixNameScaleCfg,i=this._clamp(e.basePx+(t-e.baseZoom)*e.pxPerZoom,e.minPx,e.maxPx);document.querySelectorAll(".fix-label div").forEach(n=>{n.style.fontSize=`${i}px`,n.style.lineHeight="1"}),document.querySelectorAll(".leaflet-tooltip.airway-name-tooltip").forEach(n=>{n.style.fontSize=`${i}px`,n.style.lineHeight="1"}),document.querySelectorAll(".leaflet-tooltip.airway-label").forEach(n=>{n.style.fontSize=`${i}px`,n.style.lineHeight="1"})}_applyFixNameColors(){document.querySelectorAll(".fix-label div").forEach(t=>{const e=(t.textContent||"").trim().toUpperCase(),i=Ge[e];i&&Ze[i]?t.style.color=Ze[i]:t.style.color=""})}_hookFixNameAutoScale(){this.map&&(this._applyFixNameScale(),this.map.on("zoomend",()=>this._applyFixNameScale()))}init(t){this.map=L.map(t,{zoomControl:!1,attributionControl:!0,scrollWheelZoom:!0,wheelPxPerZoomLevel:100,zoomSnap:0,zoomDelta:.3,doubleClickZoom:!1}).setView([24.5,54.3],8.37),this._baseMapLayer||(this._baseMapLayer=L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{attribution:' <a href="https://www.esri.com/">Esri</a>,  Map data from <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, and the GIS User Community',maxZoom:19,opacity:.65}));const e=this.map.getContainer?.();e&&(e.classList.add("basemap-off"),e.classList.remove("basemap-on")),this.fixLayer=this.layers.fixes,this.fixNameLayer=this.layers.fixNames,setTimeout(()=>this.map.invalidateSize(),200),Object.values(this.layers).forEach(i=>i.addTo(this.map)),this._buildAirwayLabelsOnce(),this._hookFixNameAutoScale()}setBaseMapVisible(t){const e=!!t;if(this._baseMapVisible=e,!this.map)return;e?(this._baseMapLayer&&!this.map.hasLayer(this._baseMapLayer)&&this._baseMapLayer.addTo(this.map),this._airwayColor=this._theme.airwaysOn,this._runwayColor=this._theme.runwaysOn,this._boundaryColor=this._theme.boundaryOn):(this._baseMapLayer&&this.map.hasLayer(this._baseMapLayer)&&this.map.removeLayer(this._baseMapLayer),this._airwayColor=this._theme.airwaysOff,this._runwayColor=this._theme.runwaysOff,this._boundaryColor=this._theme.boundaryOff);const i=this.map.getContainer?.();i&&(i.classList.toggle("basemap-on",e),i.classList.toggle("basemap-off",!e)),this.layers.airways?.eachLayer?.(n=>n?.setStyle?.({color:this._airwayColor})),this.layers.runways?.eachLayer?.(n=>n?.setStyle?.({color:this._runwayColor})),this.layers.airspace?.eachLayer?.(n=>n?.setStyle?.({color:this._boundaryColor})),this._applyFixNameColors()}drawRunways({show:t=!0}={}){if(!(!this.map||!this.layers.runways)&&(this.layers.runways.clearLayers(),!!t))for(const[e,i]of Object.entries(nt||{})){if(!Array.isArray(i)||i.length<2)continue;const n=i.map(s=>{const c=v(s?.[0]),A=v(s?.[1]);return c==null||A==null?null:[c,A]}).filter(Boolean);if(n.length<2)continue;const l=L.polyline(n,{color:this._runwayColor,weight:1,dashArray:"4 2",opacity:.8});l.bindTooltip(String(e),{direction:"center",className:"runway-hover-label"}),l.addTo(this.layers.runways)}}clearHoldings(){this.layers.holdings?.clearLayers?.()}drawHoldingsFromLibrary(t=[],{show:e=!0}={}){if(!this.map||!this.layers.holdings||(this.layers.holdings.clearLayers(),!e))return;const i=n=>`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" style="transform: rotate(${n}deg); fill: yellow;"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>`;for(const n of t||[]){const l=n?.point,s=Number(n?.heading);if(!l||!Number.isFinite(s))continue;const c=Q?.[l];if(!c){console.warn("Holding fix not found in extraPoints:",l);continue}const A=v(c[0]),u=v(c[1]);if(A==null||u==null)continue;const O=He({lat:A,lon:u,inboundHeadingDeg:s,legLengthNm:Number(n?.leg)||10,turn:n?.turn||"Right",turnRadiusNm:2});if(!O)continue;const E=O.path.map(T=>[T.lat,T.lon]);L.polyline(E,{color:"red",weight:2,dashArray:"6 4"}).addTo(this.layers.holdings);const M=n?.limit||"N/A";L.circleMarker([O.fix.lat,O.fix.lon],{radius:4,color:"yellow",weight:2,fillColor:"black",fillOpacity:1}).bindTooltip(`<b>${l}</b> - (${O.turn})<br>Inbound: ${O.inboundHeadingDeg}<br>Outbound: ${O.outboundHeadingDeg}<br>Limit: ${M}`,{permanent:!0,direction:"top",offset:[-40,-40],className:"holding-tooltip"}).addTo(this.layers.holdings);const p=L.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:i(O.outboundHeadingDeg)});L.marker([O.midOutbound.lat,O.midOutbound.lon],{icon:p}).addTo(this.layers.holdings);const N=L.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:i(O.inboundHeadingDeg)});L.marker([O.midInbound.lat,O.midInbound.lon],{icon:N}).addTo(this.layers.holdings)}}clearFreq(){this.layers.freq?.clearLayers?.()}drawFreqFromLibrary(t=[],{show:e=!0}={}){if(!(!this.map||!this.layers.freq)&&(this.layers.freq.clearLayers(),!!e))for(const i of t||[]){const n=(i?.frqName||"").trim(),l=(i?.condition||"").trim(),s=i?.pin;if(!n||!Array.isArray(s)||s.length<2)continue;const[c,A]=this._dmsToLatLng(s[0],s[1]);if(!Number.isFinite(c)||!Number.isFinite(A))continue;const u=(i?.frqName||"").trim(),O=L.marker([c,A],{pane:"markerPane",icon:L.divIcon({className:"freq-marker",html:`<div class="freq-label">${u}</div>`,iconAnchor:[0,0]}),interactive:!0});l&&O.bindTooltip(`<div class="freq-hover"><div class="freq-hover-title">${n}</div><div class="freq-hover-body">${l}</div></div>`,{direction:"top",offset:[0,-8],opacity:1,sticky:!0,className:"freq-hover-tooltip"}),O.addTo(this.layers.freq)}}destroy(){this.map&&this.map.remove(),this.map=null,this._baseMapVisible=!1,this._baseMapLayer=null,this._theme={airwaysOff:"#848787",airwaysOn:"#576C7D",runwaysOff:"#00ADD6",runwaysOn:"black",boundaryOff:"#B3B386",boundaryOn:"#7D4575"},this._airwayColor=this._theme.airwaysOff,this._runwayColor=this._theme.runwaysOff,this._boundaryColor=this._theme.boundaryOff}setView({lat:t,lon:e,zoom:i}){this.map&&this.map.setView([t,e],i??this.map.getZoom())}flyToBounds(t,e={}){this.map&&this.map.flyToBounds(t,{padding:[60,60],maxZoom:8.75,duration:.6,...e})}flyToBoundsAsync(t,e={}){return this.map?new Promise(i=>{let n=!1;const l=()=>{n||(n=!0,this.map.off("moveend",l),i(!0))};this.map.once("moveend",l),this.map.flyToBounds(t,{padding:[60,60],maxZoom:8.75,duration:.6,...e}),setTimeout(l,Math.max(600,(e.duration??.4)*1e3+200))}):Promise.resolve(!1)}drawAirspaceBoundary(){if(this.layers.airspace.clearLayers(),!Re?.length)return;const t=Re.map(e=>[v(e[0]),v(e[1])]).filter(e=>e[0]!=null&&e[1]!=null);t.length<2||L.polyline([...t,t[0]],{color:this._boundaryColor,weight:1.2,dashArray:"3 4",opacity:.9}).addTo(this.layers.airspace)}drawSectors({colored:t=!0,borderOnly:e=!1,stroke:i=void 0,fill:n=void 0,opacity:l=.12,selectedCodes:s=null}={}){this.layers.sectors.clearLayers();const c=s?new Set(s):null,A=i!==void 0?!!i:!0,u=n!==void 0?!!n:e?!1:!!t;for(const[O,E]of Object.entries(Je||{})){if(c&&!c.has(O))continue;const M=E?.coords;if(!M||M.length<3)continue;const p=(()=>{const g=(Re||[]).map(R=>[v(R[0]),v(R[1])]).filter(R=>R[0]!=null&&R[1]!=null);if(!g.length)return null;let h=999,y=-999,w=999,f=-999;for(const[R,K]of g)h=Math.min(h,R),y=Math.max(y,R),w=Math.min(w,K),f=Math.max(f,K);return{minLat:h-1,maxLat:y+1,minLon:w-1,maxLon:f+1}})(),N=[];for(const g of M||[]){const h=v(g?.[0]),y=v(g?.[1]);if(h==null||y==null)continue;const w={lat:h,lon:y},f={lat:y,lon:h},R=V=>p?V.lat>=p.minLat&&V.lat<=p.maxLat&&V.lon>=p.minLon&&V.lon<=p.maxLon:!0,K=R(w)?w:R(f)?f:w;N.push([K.lat,K.lon])}if(N.length<3)continue;const T=E.color||"#6fa7a2";if(L.polygon(N,{color:T,weight:A?.6:0,opacity:A?1:0,stroke:A,fill:u,fillColor:T,fillOpacity:u?l:0,interactive:!1}).addTo(this.layers.sectors),u&&E?.label){const g=Ke(E.label);if(g){const h=L.divIcon({className:"sector-label",html:`<div>${O}</div>`,iconSize:[0,0]});L.marker(g,{icon:h,interactive:!1,keyboard:!1,bubblingMouseEvents:!1}).addTo(this.layers.sectors)}}}}drawFixes(t,{showFixes:e=!0,showNames:i=!0}={}){!this.map||!this.fixLayer||!this.fixNameLayer||(this.fixLayer.clearLayers(),this.fixNameLayer.clearLayers())}drawFixTriangle(t,e,i=.05){const n=i,l=i/Math.sqrt(3),s=[t+n/2,e],c=[t-n/2,e-l],A=[t-n/2,e+l];return L.polygon([s,c,A],{color:"#7fd3ff",weight:1,fillColor:"#7fd3ff",fillOpacity:.7,interactive:!1})}async drawFixesFromData(t,e){const{convertDMSToDecimal:i}=await ke(async()=>{const{convertDMSToDecimal:s}=await Promise.resolve().then(()=>We);return{convertDMSToDecimal:s}},void 0,import.meta.url),n=!!e?.fixes,l=!!e?.fixNames;if(this.fixLayer.clearLayers(),this.fixNameLayer.clearLayers(),!(!n&&!l)){for(const[s,c]of Object.entries(t||{})){const A=i(c?.[0]),u=i(c?.[1]);if(!(A==null||u==null)){if(n){const E=L.divIcon({className:"fix-tri-icon",iconSize:[6.5,6.5],iconAnchor:[3.25,8.5],html:`
          <svg width="${6.5}" height="${6.5}" viewBox="0 0 ${6.5} ${6.5}">
            <polygon points="${3.25},0 ${6.5},${6.5} 0,${6.5}"
              fill="none"
              stroke="rgba(160, 171, 177, 0.59)"
              stroke-width="1"/>
          </svg>
        `});this.fixLayer.addLayer(L.marker([A,u],{icon:E,interactive:!1}))}if(l){const O=L.divIcon({className:"fix-label",html:`<div style="
            white-space: nowrap;
            transform: translate(-5px, -16px); //Fixes name position
            //text-shadow: 0 1px 2px rgba(0,0,0,.6);
          ">${s}</div>`,iconSize:[1,1]}),E=L.marker([A,u],{icon:O,interactive:!1});this.fixNameLayer.addLayer(E)}}}this._applyFixNameScale(),this._applyFixNameColors()}}drawAirways(){if(!this._airwaysDrawn){this._airwaysDrawn=!0,this.layers.airways.clearLayers();for(const[t,e]of Object.entries(le||{})){const i=(e||[]).map(n=>Q?.[n]).filter(Boolean).map(n=>[v(n[0]),v(n[1])]).filter(n=>n[0]!=null&&n[1]!=null);i.length>=2&&L.polyline(i,{color:this._airwayColor,weight:1,opacity:.5,interactive:!1}).addTo(this.layers.airways)}}}clearRoute(){this.layers.routes.clearLayers(),this._routesByKey.clear(),this.layers.airwayHighlights.clearLayers()}clearRouteByKey(t){const e=this._routesByKey.get(t);e&&e.clearLayers()}clearSids(){this.layers.sids?.clearLayers?.()}drawSidLatLngs(t,e={}){return!this.map||!this.layers.sids||!Array.isArray(t)||t.length<2?null:L.polyline(t,{color:e.color||"#FCFBBB",weight:e.weight||1.7,dashArray:e.dashArray||"10 10",opacity:e.opacity??.85,interactive:!1}).addTo(this.layers.sids)}clearAreas(){this.layers.areasCTA?.clearLayers(),this.layers.areasTraining?.clearLayers(),this.layers.areasRestricted?.clearLayers(),this.layers.areasDanger?.clearLayers(),this.layers.areasProhibited?.clearLayers()}_buildAirwayLabelsOnce(){if(this._awyLabelsBuilt||(this._awyLabelsBuilt=!0,!this.map))return;const t=Vt||{};for(const[e,i]of Object.entries(t))(i||[]).forEach(n=>{const l=n?.coord,s=n?.rotate??0,c=n?.arrow??"none",A=Ke(l);if(!A)return;const u=L.tooltip({permanent:!0,direction:"center",offset:[0,0],interactive:!0,className:"airway-name-tooltip"}).setLatLng(A).setContent(`
            <div class="airway-name-inner" style="transform: rotate(${s}deg);">
              ${c==="left"?'<span class="airway-arrow left"></span>':""}
              ${e}
              ${c==="right"?'<span class="airway-arrow right"></span>':""}
            </div>
          `);u.on("click",()=>this._highlightSingleAirway(e)),this.layers.airwayLabels.addLayer(u)})}setAwyLabelsVisible(t){this._awyLabelsVisible=!!t,this.map&&(this._buildAirwayLabelsOnce(),this._awyLabelsVisible?(this.layers.airwayLabels.addTo(this.map),this._applyFixNameScale()):this.map.removeLayer(this.layers.airwayLabels))}_highlightSingleAirway(t){if(!this.map)return;if(this._activeHighlightedAirways.has(t)){this._activeHighlightedAirways.get(t)?.layers?.forEach(c=>this.map.removeLayer(c)),this._activeHighlightedAirways.delete(t);return}const e=le?.[t];if(!e)return;const i=(e||[]).map(s=>Q?.[s]).filter(Boolean).map(s=>[v(s[0]),v(s[1])]).filter(s=>s[0]!=null&&s[1]!=null);if(i.length<2)return;const n=this._airwayColors[this._airwayColorIndex%this._airwayColors.length];this._airwayColorIndex++;const l=L.polyline(i,{color:n,weight:2.5,opacity:.6,lineCap:"round",lineJoin:"round",interactive:!1}).addTo(this.layers.airwayPickHighlights);this._activeHighlightedAirways.set(t,{layers:[l],color:n})}drawRouteLatLngs(t,e={},i=null){if(t.length<2)return null;const n=this._getRouteGroup(i);return L.polyline(t,{color:e.color||"#fbc965",weight:e.weight||2.4,opacity:e.opacity??.95}).addTo(n)}highlightAirway(t,e={}){const i=le?.[t];if(!i)return null;const n=i.map(l=>Q?.[l]).filter(Boolean).map(l=>[v(l[0]),v(l[1])]).filter(l=>l[0]!=null&&l[1]!=null);return n.length<2?null:L.polyline(n,{color:e.color||"white",weight:e.weight||1.8,dashArray:e.dashArray||"2 8",opacity:e.opacity??.7,interactive:!1}).addTo(this.layers.airwayHighlights)}drawRouteEndTooltips(t,e,i){if(!this.map)return;const n=ot?.[t];if(!n)return;const l=this._getRouteGroup(t),s=(c,A,u)=>{const O=L.tooltip({className:"route-extra-label",permanent:!0,direction:"top",offset:[0,-20],interactive:!1,opacity:1}).setLatLng([c,A]).setContent(u);return O.addTo(l),O};if(e&&Q?.[e]){const c=Q[e],A=v(c[0]),u=v(c[1]);A!=null&&u!=null&&s(A,u,`CFL: ${n.CFL||""}`)}if(i&&Q?.[i]){const c=Q[i],A=v(c[0]),u=v(c[1]);A!=null&&u!=null&&s(A,u,`XFL: ${n.XFL||""}`)}}drawRouteSegmentsAnimated(t,e={}){const i=e.frameDelayMs??50,n=[];this._animFrameId&&(cancelAnimationFrame(this._animFrameId),this._animFrameId=null);const l=this._getRouteGroup(e.routeKey||null);try{const A=t?.[t.length-1]?.coords||[],u=A[A.length-1];if(u&&typeof window.L<"u"){const O=L.divIcon({className:"arrow-head",iconSize:[11,11],iconAnchor:[8,8],html:"<div></div>"});L.marker([u.lat,u.lon],{icon:O}).addTo(l)}}catch{}const s=(c,A,u)=>{const O=L.tooltip({permanent:!0,direction:"center",className:"airway-label",offset:[0,0],opacity:1,interactive:!1}).setLatLng([c,A]).setContent(`<span style="font-weight:bold;">${u}</span>`);return O.addTo(l),O};return new Promise(c=>{const A=u=>{if(u>=t.length){this._animFrameId=null,n.length?c(L.latLngBounds(n)):c(null);return}const O=t[u],E=O.coords||[];if(E.length<2){this._animFrameId=requestAnimationFrame(()=>A(u+1));return}for(const g of E)n.push([g.lat,g.lon]);const M=L.polyline([],{color:O.color||"#fbc965",weight:3,opacity:.95}).addTo(l);M.addLatLng([E[0].lat,E[0].lon]);let p=0,N=performance.now();const T=g=>{if(p<E.length-1){if(g-N>=i){const h=p;if(p++,M.addLatLng([E[p].lat,E[p].lon]),N=g,O.airway&&h===Math.floor((E.length-1)/2)){const y=E[h],w=E[h+1],f=(y.lat+w.lat)/2,R=(y.lon+w.lon)/2;s(f,R,O.airway)}}this._animFrameId=requestAnimationFrame(T)}else this._animFrameId=requestAnimationFrame(()=>A(u+1))};this._animFrameId=requestAnimationFrame(T)};A(0)})}drawAreasCategory(t,e=[],i="#FFFF66"){const n=this.layers[t];n&&(e||[]).forEach(l=>{let s=null,c=null;switch(l.shapeType){case"circle":{if(!Array.isArray(l.coords)||l.coords.length!==2)return;const A=this._dmsToLatLng(l.coords[0],l.coords[1]);s=L.circle(A,{radius:this._nmToMeters(l.radiusNm),color:i,weight:.8,fill:!0,fillOpacity:.1}).addTo(n),c=A,s.on("click",()=>{window.__AIR?.showAreaDetails?.(l,i)});break}case"polygon":{if(!Array.isArray(l.coords)||l.coords.length<3)return;const A=l.coords.map(([u,O])=>this._dmsToLatLng(u,O));s=L.polygon(A,{color:i,weight:.8,fill:!0,fillOpacity:.1}).addTo(n),c=s.getBounds().getCenter(),s.on("click",()=>{window.__AIR?.showAreaDetails?.(l,i)});break}case"rectangle":{if(!Array.isArray(l.corner1)||!Array.isArray(l.corner2))return;const A=this._dmsToLatLng(l.corner1[0],l.corner1[1]),u=this._dmsToLatLng(l.corner2[0],l.corner2[1]);s=L.rectangle([A,u],{color:i,weight:.8,fill:!0,fillOpacity:.1}).addTo(n),c=s.getBounds().getCenter(),s.on("click",()=>{window.__AIR?.showAreaDetails?.(l,i)});break}case"dynamicShape":{const A=this._expandDynamicShape(l);if(!A||A.length<2)return;s=l.closed?L.polygon(A,{color:i,weight:.8,fillOpacity:.1}):L.polyline(A,{color:i,weight:.8}),s.addTo(n),c=s.getBounds().getCenter(),s.on("click",()=>{window.__AIR?.showAreaDetails?.(l,i)});break}default:return}c&&L.marker(c,{icon:L.divIcon({className:"area-label",html:`<div style="color:${i}; font-weight:bold;">${l.shapeName}</div>`,iconSize:[0,0]}),interactive:!1}).addTo(n)})}_nmToMeters(t){return(Number(t)||0)*1852}_dmsToLatLng(t,e){return[v(t),v(e)]}_expandDynamicShape(t){const e=[];let i=null;for(const n of t.steps||[]){if(n.type==="point"){i=this._dmsToLatLng(n.coord[0],n.coord[1]),e.push(i);continue}if(n.type==="line"){const l=this._dmsToLatLng(n.to[0],n.to[1]);e.push(l),i=l;continue}if(n.type==="arc"){if(!i)continue;const l=this._dmsToLatLng(n.center[0],n.center[1]),s=this._dmsToLatLng(n.to[0],n.to[1]),c=this._arcPoints(l[0],l[1],n.radiusNm,i[0],i[1],s[0],s[1],!!n.clockwise);e.push(...c),i=s;continue}}if(t.closed&&e.length>1){const n=e[0],l=e[e.length-1];(n[0]!==l[0]||n[1]!==l[1])&&e.push(n)}return e}_arcPoints(t,e,i,n,l,s,c,A){const u=[],E=(Number(i)||0)*1852;if(!isFinite(E)||E<=0)return u;const M=6371e3,p=R=>R*Math.PI/180,N=R=>R*180/Math.PI,T=p(t),g=p(e),h=(R,K)=>{const V=p(R),x=p(K)-g,H=Math.sin(x)*Math.cos(V),j=Math.cos(T)*Math.sin(V)-Math.sin(T)*Math.cos(V)*Math.cos(x);return Math.atan2(H,j)};let y=h(n,l),w=h(s,c);A&&w<y&&(w+=2*Math.PI),!A&&w>y&&(w-=2*Math.PI);const f=R=>{const K=E/M,V=Math.sin(T),k=Math.cos(T),x=Math.sin(K),H=Math.cos(K),j=V*H+k*x*Math.cos(R),q=Math.asin(j),ae=Math.sin(R)*x*k,ee=H-V*j,ge=g+Math.atan2(ae,ee);return[N(q),N(ge)]};for(let R=0;R<=48;R++){const K=R/48,V=y+(w-y)*K;u.push(f(V))}return u}setLayerVisible(t,e){const i=this.layers[t];!i||!this.map||(e?i.addTo(this.map):this.map.removeLayer(i))}}class $t{_fixEntities=[];_fixNameEntities=[];constructor(){this.viewer=null,this._baseImageryLayer=null,this._baseKind="bingAerial",this._baseVisible=!0,this.dsAirspace=null,this.dsSectors=null,this.dsAirways=null,this.dsFixMarks=null,this.dsFixNames=null,this.dsRoutes=null,this.dsAirwayHighlights=null,this.dsHoldings=null,this.dsAreas=null,this.dsRunways=null,this._airwaysDrawn=!1}_ensureCesium(){const t=window.Cesium;return t||(console.error("[Map3DAdapter] Cesium is not loaded yet (window.Cesium is undefined). Check that Cesium.js loads successfully and is not deferred/blocked."),null)}_ensureDataSources(){const t=this._ensureCesium();return t?(this.dsAirspace||(this.dsAirspace=new t.CustomDataSource("airspace")),this.dsSectors||(this.dsSectors=new t.CustomDataSource("sectors")),this.dsAirways||(this.dsAirways=new t.CustomDataSource("airways")),this.dsFixMarks||(this.dsFixMarks=new t.CustomDataSource("fixMarks")),this.dsFixNames||(this.dsFixNames=new t.CustomDataSource("fixNames")),this.dsRoutes||(this.dsRoutes=new t.CustomDataSource("routes")),this.dsAirwayHighlights||(this.dsAirwayHighlights=new t.CustomDataSource("airwayHighlights")),this.dsHoldings||(this.dsHoldings=new t.CustomDataSource("holdings")),this.dsAreas||(this.dsAreas=new t.CustomDataSource("areas")),this.dsRunways||(this.dsRunways=new t.CustomDataSource("runways")),!0):!1}init(t,{cesiumControlsMountEl:e}={}){const i=this._ensureCesium();if(i&&(i.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhMDViMTZmYS0xZWJhLTRhMDQtYmFhMS1jODVmYzVlZmVjNGEiLCJpZCI6MzkwNjM3LCJpYXQiOjE3NzEwODc4OTB9.hjD9j5QcrDLSy9W5-OdE2AiZ7QLlO5gARb4-Sk9NgQ4",!!this._ensureDataSources())){if(this.viewer=new i.Viewer(t,{sceneMode:i.SceneMode.COLUMBUS_VIEW,animation:!1,timeline:!1,fullscreenButton:!0,geocoder:!1,homeButton:!0,sceneModePicker:!0,navigationHelpButton:!1,baseLayerPicker:!1,terrainProvider:i.createWorldTerrain?i.createWorldTerrain():i.Terrain&&i.Terrain.fromWorldTerrain?i.Terrain.fromWorldTerrain():new i.EllipsoidTerrainProvider,shouldAnimate:!1,infoBox:!0,selectionIndicator:!0}),this._installAttributionBadge(),this._baseMapVisible!==!1?(this.viewer.imageryLayers.removeAll(),i.IonImageryProvider.fromAssetId(2).then(n=>{this.viewer.imageryLayers.addImageryProvider(n)}).catch(()=>{this.viewer.imageryLayers.addImageryProvider(new i.OpenStreetMapImageryProvider({url:"https://tile.openstreetmap.org/"}))})):(this.viewer.imageryLayers.removeAll(),this.viewer.scene?.globe&&(this.viewer.scene.globe.baseColor=i.Color.BLACK)),this.setDefaultView(),this.viewer?.homeButton?.viewModel?.command&&this.viewer.homeButton.viewModel.command.beforeExecute.addEventListener(l=>{l.cancel=!0,this.setDefaultView()}),this.viewer.scene.morphToColumbusView(0),this.viewer.dataSources.add(this.dsAirspace),this.viewer.dataSources.add(this.dsSectors),this.viewer.dataSources.add(this.dsAirways),this.viewer.dataSources.add(this.dsFixMarks),this.viewer.dataSources.add(this.dsFixNames),this.viewer.dataSources.add(this.dsRoutes),this.viewer.dataSources.add(this.dsAirwayHighlights),this.viewer.dataSources.add(this.dsHoldings),this.viewer.dataSources.add(this.dsAreas),this.viewer.dataSources.add(this.dsRunways),e){const n=this.viewer.container.querySelector(".cesium-viewer-toolbar"),l=this.viewer.container.querySelector(".cesium-viewer-geocoderContainer");e.querySelectorAll(".cesium-viewer-toolbar").forEach(c=>c.remove()),l&&l.parentNode&&l.parentNode.removeChild(l),n&&e.appendChild(n),this._baseMapVisible=!0;const s=document.getElementById("toggleMapBtn3D");s&&(s.classList.add("active"),s.addEventListener("click",()=>{this._baseMapVisible=!this._baseMapVisible,this._baseMapVisible?(this.setImagery("osm"),s.classList.add("active")):(this.viewer.imageryLayers.removeAll(),this.viewer.scene.globe.baseColor=i.Color.BLACK,s.style.color="",s.classList.remove("active"))}))}this.viewer.selectedEntityChanged.addEventListener(()=>{const n=document.querySelector(".cesium-infoBox");n&&(n.classList.remove("cesium-infoBox-visible"),n.offsetWidth,n.classList.add("cesium-infoBox-visible"))})}}setImagery(t="osm"){const e=this._ensureCesium();if(!this.viewer||!e)return;const i=this.viewer,n=i.imageryLayers;i.scene&&i.scene.globe&&(i.scene.globe.show=!0);try{n.removeAll()}catch{}let l=null;try{if(t==="esri")l=new e.UrlTemplateImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",credit:" Esri,  OpenStreetMap contributors, and the GIS User Community"});else{e.IonImageryProvider.fromAssetId(2).then(s=>{n.addImageryProvider(s)}).catch(()=>{n.addImageryProvider(new e.UrlTemplateImageryProvider({url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"}))});return}n.addImageryProvider(l)}catch(s){console.warn("[3D] Failed to set imagery:",t,s)}try{i.scene.requestRender()}catch{}}setTerrainEnabled(t){const e=this._ensureCesium();if(!this.viewer||!e)return;const i=this.viewer;if(!!!t){i.terrainProvider=new e.EllipsoidTerrainProvider;try{i.scene.requestRender()}catch{}return}if(!(e.Ion&&e.Ion.defaultAccessToken?e.Ion.defaultAccessToken:"")){i.terrainProvider=new e.EllipsoidTerrainProvider;try{i.scene.requestRender()}catch{}return}try{i.terrainProvider=e.createWorldTerrain();try{i.scene.requestRender()}catch{}}catch{i.terrainProvider=new e.EllipsoidTerrainProvider}}setLightingEnabled(t){const e=this._ensureCesium();!this.viewer||!e||(this.viewer.scene.globe.enableLighting=!!t)}setFogEnabled(t){const e=this._ensureCesium();!this.viewer||!e||(this.viewer.scene.fog.enabled=!!t)}drawRunways({show:t=!0}={}){const e=this._ensureCesium();if(!this.viewer||!e||!this.dsRunways||(this.dsRunways.entities.removeAll(),this.dsRunways.show=!!t,!t))return;const i=e.Color.fromCssColorString("#00ADD6").withAlpha(.8);for(const[n,l]of Object.entries(nt||{})){if(!Array.isArray(l)||l.length<2)continue;const s=[];for(const u of l){const O=v(u?.[0]),E=v(u?.[1]);O==null||E==null||s.push(E,O)}if(s.length<4)continue;const c=10,A=[];for(let u=0;u<s.length;u+=2)A.push(s[u],s[u+1],c);this.dsRunways.entities.add({name:String(n),polyline:{positions:e.Cartesian3.fromDegreesArrayHeights(A),width:.8,clampToGround:!1,material:new e.PolylineDashMaterialProperty({color:i,dashLength:7})}})}}clearHoldings(){this.dsHoldings?.entities?.removeAll?.()}drawHoldingsFromLibrary(t=[],{show:e=!0,zScale:i=1}={}){const l=((Number.isFinite(i)?i:1)+1)/2,s=this._ensureCesium();if(!this.viewer||!s||!this.dsHoldings||(this.dsHoldings.entities.removeAll(),!e))return;const c=1500*l,A=(E,M,p,N)=>{const T=(Number(p)||0)*Math.PI/180,g=3e3,h=g*Math.cos(T)/111320,y=g*Math.sin(T)/(111320*Math.cos(M*Math.PI/180)),w=E+y,f=M+h;this.dsHoldings.entities.add({polyline:{positions:s.Cartesian3.fromDegreesArrayHeights([E,M,N,w,f,N]),width:12,material:new s.PolylineArrowMaterialProperty(s.Color.YELLOW.withAlpha(.9)),clampToGround:!1}})},u=(E,M,p,N)=>{this.dsHoldings.entities.add({polyline:{positions:s.Cartesian3.fromDegreesArrayHeights([E,M,p,E,M,N]),width:2,material:s.Color.CYAN.withAlpha(.25),clampToGround:!1}})},O=(E,M)=>{const p=[];for(const N of E||[]){const T=N?.lon??N?.lng,g=N?.lat;!Number.isFinite(T)||!Number.isFinite(g)||p.push(T,g,M)}return p};for(const E of t||[]){const M=E?.point,p=Number(E?.heading);if(!M||!Number.isFinite(p))continue;const N=Q?.[M];if(!N)continue;const T=v(N[0]),g=v(N[1]);if(T==null||g==null)continue;const h=He({lat:T,lon:g,inboundHeadingDeg:p,legLengthNm:Number(E?.leg)||10,turn:E?.turn||"Right",turnRadiusNm:2});if(!h)continue;const y=et(E?.floor,E?.ceiling);let w=0;try{const k=s.Cartographic.fromDegrees(h.fix.lon,h.fix.lat),x=this.viewer?.scene?.globe?.getHeight?.(k);Number.isFinite(x)&&(w=x)}catch{}w=Math.max(0,w)+10;const R=y?(()=>{let k=y.floorM*l,x=y.ceilM*l;return k=Math.max(0,Math.min(k,x)),x=Math.max(k+1,Math.max(k,x)),{floorAbs:w+k,ceilAbs:w+x,midAbs:w+(k+x)/2}})():null;if(R){const k=O(h.path,R.floorAbs),x=O(h.path,R.ceilAbs);k.length>=6&&this.dsHoldings.entities.add({polyline:{positions:s.Cartesian3.fromDegreesArrayHeights(k),width:2,material:new s.PolylineDashMaterialProperty({color:s.Color.RED.withAlpha(.95),dashLength:12}),clampToGround:!1}}),x.length>=6&&this.dsHoldings.entities.add({polyline:{positions:s.Cartesian3.fromDegreesArrayHeights(x),width:2,material:new s.PolylineDashMaterialProperty({color:s.Color.RED.withAlpha(.75),dashLength:12}),clampToGround:!1}}),u(h.fix.lon,h.fix.lat,R.floorAbs,R.ceilAbs),u(h.midOutbound.lon,h.midOutbound.lat,R.floorAbs,R.ceilAbs),u(h.midInbound.lon,h.midInbound.lat,R.floorAbs,R.ceilAbs),this.dsHoldings.entities.add({position:s.Cartesian3.fromDegrees(h.fix.lon,h.fix.lat,R.ceilAbs),point:{pixelSize:8,color:s.Color.BLACK.withAlpha(.8),outlineColor:s.Color.YELLOW,outlineWidth:2.5,disableDepthTestDistance:Number.POSITIVE_INFINITY,scaleByDistance:new s.NearFarScalar(2e3,1,2e6,.25)}}),A(h.midOutbound.lon,h.midOutbound.lat,h.outboundHeadingDeg,R.ceilAbs+10),A(h.midInbound.lon,h.midInbound.lat,h.inboundHeadingDeg,R.ceilAbs+10);const H=`${E.floor}${E.ceiling}`,j=E?.limit||H;this.dsHoldings.entities.add({position:s.Cartesian3.fromDegrees(h.fix.lon,h.fix.lat,R.ceilAbs+400),label:{text:`${M}  ${H}`,font:"14px sans-serif",fillColor:s.Color.YELLOW,outlineColor:s.Color.BLACK,outlineWidth:2,style:s.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new s.Cartesian2(10,-10),disableDepthTestDistance:Number.POSITIVE_INFINITY,scaleByDistance:new s.NearFarScalar(2e3,1,2e6,.3)},description:`<b>${M}</b> - (${h.turn})<br>Inbound: ${h.inboundHeadingDeg}<br>Outbound: ${h.outboundHeadingDeg}<br>Limit: ${j}`});continue}const K=O(h.path,c);if(K.length<6)continue;this.dsHoldings.entities.add({polyline:{positions:s.Cartesian3.fromDegreesArrayHeights(K),width:2,material:new s.PolylineDashMaterialProperty({color:s.Color.RED.withAlpha(.9),dashLength:12}),clampToGround:!1}}),this.dsHoldings.entities.add({position:s.Cartesian3.fromDegrees(h.fix.lon,h.fix.lat,c),point:{pixelSize:6,color:s.Color.YELLOW,outlineColor:s.Color.BLACK,outlineWidth:2,disableDepthTestDistance:Number.POSITIVE_INFINITY}}),A(h.midOutbound.lon,h.midOutbound.lat,h.outboundHeadingDeg,c+10),A(h.midInbound.lon,h.midInbound.lat,h.inboundHeadingDeg,c+10);const V=E?.limit||"";this.dsHoldings.entities.add({position:s.Cartesian3.fromDegrees(h.fix.lon,h.fix.lat,c+400),label:{text:M,font:"12px sans-serif",fillColor:s.Color.YELLOW,outlineColor:s.Color.BLACK,outlineWidth:2,style:s.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new s.Cartesian2(10,-10),disableDepthTestDistance:Number.POSITIVE_INFINITY,scaleByDistance:new s.NearFarScalar(2e3,1,2e6,.3)},description:`<b>${M}</b> - (${h.turn})<br>Inbound: ${h.inboundHeadingDeg}<br>Outbound: ${h.outboundHeadingDeg}<br>`+(V?`Limit: ${V}`:"")})}}clearAreas(){this.dsAreas?.entities?.removeAll?.()}drawAreasCategory(t,e=[],i="#FFFF66"){const n=this._ensureCesium();if(!this.viewer||!n||!this.dsAreas)return;const l=n.Color.fromCssColorString(i).withAlpha(.28),s=n.Color.fromCssColorString(i).withAlpha(.9),c=(A,u,O,E)=>{this.dsAreas.entities.add({position:n.Cartesian3.fromDegrees(A,u,150),label:{text:O,font:"12px sans-serif",fillColor:n.Color.WHITE,outlineColor:n.Color.BLACK,outlineWidth:2,style:n.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new n.Cartesian2(10,-10),disableDepthTestDistance:Number.POSITIVE_INFINITY,scaleByDistance:new n.NearFarScalar(5e3,1,2e6,.25)},description:E||"",properties:new n.PropertyBag({layerName:t})})};for(const A of e||[]){const u=(A?.shapeType||"").toLowerCase(),O=A?.shapeName||t,E=A?.floor||A?.limit||"",M=A?.ceiling||"",p=A?.shapeInfo||"",N=A?.type||"",T=`<b>${O}</b><br>`+(p?`${p}<br>`:"")+(E||M?`Floor: ${E} &nbsp;&nbsp; Ceiling: ${M}<br>`:"")+(N?`${N}`:"");if(u==="circle"){const g=A?.coords;if(!g||g.length<2)continue;const h=v(g[0]),y=v(g[1]);if(h==null||y==null)continue;const w=(Number(A?.radiusNm)||0)*1852;if(!w)continue;this.dsAreas.entities.add({name:O,position:n.Cartesian3.fromDegrees(y,h,0),ellipse:{semiMajorAxis:w,semiMinorAxis:w,material:l,outline:!1,height:0,heightReference:n.HeightReference.CLAMP_TO_GROUND},properties:new n.PropertyBag({layerName:t}),description:T}),c(y,h,O.split(" ")[0]||O,T);continue}if(u==="polygon"){const g=A?.coords||[],h=[];let y=0,w=0,f=0;for(const R of g){if(!R||R.length<2)continue;const K=v(R[0]),V=v(R[1]);K==null||V==null||(h.push(V,K),y+=V,w+=K,f+=1)}if(h.length<6)continue;this.dsAreas.entities.add({name:O,polygon:{hierarchy:n.Cartesian3.fromDegreesArray(h),material:l,outline:!0,outlineColor:s,heightReference:n.HeightReference.CLAMP_TO_GROUND},properties:new n.PropertyBag({layerName:t}),description:T}),c(y/f,w/f,O.split(" ")[0]||O,T);continue}if(u==="rectangle"){const g=A?.corner1,h=A?.corner2;if(!g||!h)continue;const y=v(g[0]),w=v(g[1]),f=v(h[0]),R=v(h[1]);if([y,w,f,R].some(H=>H==null))continue;const K=Math.min(w,R),V=Math.max(w,R),k=Math.min(y,f),x=Math.max(y,f);this.dsAreas.entities.add({name:O,rectangle:{coordinates:n.Rectangle.fromDegrees(K,k,V,x),material:l,outline:!0,outlineColor:s,heightReference:n.HeightReference.CLAMP_TO_GROUND},properties:new n.PropertyBag({layerName:t}),description:T}),c((K+V)/2,(k+x)/2,O.split(" ")[0]||O,T);continue}}}destroy(){this.viewer&&this.viewer.destroy(),this.viewer=null}setDefaultView(){const t=window.Cesium;!this.viewer||!t||this.viewer.camera.flyTo({destination:t.Cartesian3.fromDegrees(54,22.3,9e5),orientation:{heading:t.Math.toRadians(0),pitch:t.Math.toRadians(-75),roll:0},duration:1})}clearFixes(){if(this.viewer){for(const t of this._fixEntities)this.viewer.entities.remove(t);for(const t of this._fixNameEntities)this.viewer.entities.remove(t);this._fixEntities=[],this._fixNameEntities=[]}}async drawFixesFromData(t,e){if(!this.viewer)return;const{convertDMSToDecimal:i}=await ke(async()=>{const{convertDMSToDecimal:u}=await Promise.resolve().then(()=>We);return{convertDMSToDecimal:u}},void 0,import.meta.url),n=window.Cesium;if(!n)return;const l=13900,s=e?.mapLayersMaster!==!1,c=s&&!!e?.fixes,A=s&&!!e?.fixNames;if(this.clearFixes(),!(!c&&!A))for(const[u,O]of Object.entries(t||{})){const E=i(O?.[0]),M=i(O?.[1]);if(E==null||M==null)continue;const p=n.Cartesian3.fromDegrees(M,E,l);if(c){const N=`
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
            <polygon points="8,0 16,16 0,16" fill="rgba(105, 176, 211, 0.4)"/>
          </svg>
        `.trim(),T=this.viewer.entities.add({position:p,billboard:{image:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(N),verticalOrigin:n.VerticalOrigin.BOTTOM,width:7,height:7,disableDepthTestDistance:Number.POSITIVE_INFINITY}});this._fixEntities.push(T)}if(A){const N=this.viewer.entities.add({position:p,label:{text:u,font:"16px sans-serif",fillColor:n.Color.fromCssColorString("#918e8ef1"),pixelOffset:new n.Cartesian2(10,-10),disableDepthTestDistance:Number.POSITIVE_INFINITY,showBackground:!1,scaleByDistance:new n.NearFarScalar(2e3,1,2e6,.3)}});this._fixNameEntities.push(N)}}}_dmsArrayToDegreesArray(t){const e=(Re||[]).map(s=>[v(s[0]),v(s[1])]).filter(s=>s[0]!=null&&s[1]!=null);let i=null;if(e.length){let s=999,c=-999,A=999,u=-999;for(const[O,E]of e)s=Math.min(s,O),c=Math.max(c,O),A=Math.min(A,E),u=Math.max(u,E);i={minLat:s-1,maxLat:c+1,minLon:A-1,maxLon:u+1}}const n=(s,c)=>i?s>=i.minLat&&s<=i.maxLat&&c>=i.minLon&&c<=i.maxLon:!0,l=[];for(const s of t||[]){const c=v(s?.[0]),A=v(s?.[1]);if(c==null||A==null)continue;let u=c,O=A;!n(u,O)&&n(A,c)&&(u=A,O=c),l.push(O,u)}return l}_sectorCodeMaps(){const t={SOUTH:"S",LIMA:"L",BRAVO:"B",GOLF:"G",ALPHA:"A",NORTH:"N",MIKE:"M",WEST:"W",KBOX:"K",CENTRAL:"C",DELTA:"D",HOTEL:"H",EAST:"E",YANKEE:"Y",ROMEO:"R"},e={},i={};for(const n of tt||[]){const l=t[String(n.sector||"").toUpperCase()];l&&(n.limit&&(e[l]=n.limit),n.freq&&(i[l]=n.freq))}return{codeToLimit:e,codeToFreq:i}}_ftToM(t){return t*.3048}_parseLimitToMeters(t){const e=c=>(c||"").trim().toUpperCase(),i=c=>{if(c=e(c),c==="GND"||c==="SFC"||c==="000")return 0;if(c.startsWith("A")&&/^\d+$/.test(c.slice(1)))return this._ftToM(parseInt(c.slice(1),10)*100);if(c.startsWith("F")&&/^\d+$/.test(c.slice(1)))return this._ftToM(parseInt(c.slice(1),10)*100);if(c.startsWith("FL")&&/^\d+$/.test(c.slice(2)))return this._ftToM(parseInt(c.slice(2),10)*100);const A=c.match(/^(\d+)\s*(FT)?$/);return A?this._ftToM(parseInt(A[1],10)):0},n=String(t||"GND - F600").split("-").map(c=>c.trim()),l=i(n[0]??"GND"),s=i(n[1]??"F600");return{bottom:l,top:s}}drawAirspaceBoundary(){this.dsAirspace.entities.removeAll();const t=window.Cesium,e=this._dmsArrayToDegreesArray(Re);if(!e||e.length<4)return;let i=0;try{const c=e[0],A=e[1],u=t.Cartographic.fromDegrees(c,A),O=this.viewer?.scene?.globe?.getHeight?.(u);Number.isFinite(O)&&(i=O)}catch{}const l=i+10,s=[];for(let c=0;c<e.length;c+=2)s.push(e[c],e[c+1],l);s.push(e[0],e[1],l),this.dsAirspace.entities.add({name:"Airspace Boundary",polyline:{positions:t.Cartesian3.fromDegreesArrayHeights(s),width:.5,material:new t.PolylineDashMaterialProperty({color:t.Color.YELLOW.withAlpha(.95),dashLength:10,dashPattern:63}),clampToGround:!1,disableDepthTestDistance:void 0}})}drawSectors({colored:t=!0,borderOnly:e=!1,stroke:i=void 0,fill:n=void 0,opacity:l=.18,selectedCodes:s=null,zScale:c=3}={}){this.dsSectors.entities.removeAll();const A=s?new Set(s):null,u=i!==void 0?!!i:!0,O=n!==void 0?!!n:e?!1:!!t,{codeToLimit:E,codeToFreq:M}=this._sectorCodeMaps();for(const[p,N]of Object.entries(Je||{})){if(A&&!A.has(p))continue;const T=N?.coords;if(!T||T.length<3)continue;const g=E[p]||"GND - F600";let{bottom:h,top:y}=this._parseLimitToMeters(g);const w=(h+y)/2;h=w+(h-w)*c,y=w+(y-w)*c,h=Math.max(0,h),y=Math.max(h+1,y);const f=this._dmsArrayToDegreesArray(T);if(f.length<6)continue;const R=Cesium.Color.fromCssColorString(N.color||"#6fa7a2"),K=this.dsSectors.entities.add({name:`${N.name||p} (${g})`,polygon:{hierarchy:Cesium.Cartesian3.fromDegreesArray(f),height:h,extrudedHeight:y,heightReference:Cesium.HeightReference.NONE,extrudedHeightReference:Cesium.HeightReference.NONE,material:O?R.withAlpha(l):R.withAlpha(0),outline:u,outlineColor:u?R.withAlpha(.55):R.withAlpha(0)},properties:new Cesium.PropertyBag({code:p,limitStr:g})}),V=M[p]||"";K.description=`
        <div style="font-family:sans-serif; font-size:13px;">
          <div><b>Sector:</b> ${N.name||p}</div>
          <div><b>Limits:</b> ${g}</div>
          <div><b>Frequency:</b> ${V}</div>
        </div>`;let k=0,x=0,H=0;for(let ee=0;ee<f.length;ee+=2)k+=f[ee],x+=f[ee+1],H++;const j=k/Math.max(1,H),q=x/Math.max(1,H),ae=(h+y)/2;this.dsSectors.entities.add({name:`LABEL_${p}`,position:Cesium.Cartesian3.fromDegrees(j,q,ae),label:{text:N.name||p,font:"bold 11px sans-serif",showBackground:!1,backgroundColor:Cesium.Color.BLACK.withAlpha(.2),verticalOrigin:Cesium.VerticalOrigin.CENTER,distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,12e5),disableDepthTestDistance:Number.POSITIVE_INFINITY},properties:new Cesium.PropertyBag({isSectorLabel:!0,code:p})})}}drawAirways(){if(this._airwaysDrawn)return;this._airwaysDrawn=!0,this.dsAirways.entities.removeAll();const t=13900;for(const[e,i]of Object.entries(le||{})){const n=[];for(const l of i||[]){const s=Q?.[l];if(!s)continue;const c=v(s[0]),A=v(s[1]);c==null||A==null||n.push(A,c,t)}n.length<6||this.dsAirways.entities.add({name:`AIRWAY_${e}`,polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(n),width:1.3,material:Cesium.Color.GRAY.withAlpha(.5),clampToGround:!1},properties:new Cesium.PropertyBag({isAirway:!0,airwayName:e})})}}clearRoute(){if(this._dsRoutesByKey)for(const t of this._dsRoutesByKey.values())try{t.entities.removeAll()}catch{}this.dsRoutes?.entities?.removeAll?.(),this.dsAirwayHighlights?.entities?.removeAll?.()}clearRouteByKey(t){const e=this._dsRoutesByKey?.get?.(t);if(e){e.entities.removeAll();return}this.dsRoutes?.entities?.removeAll?.()}_getRouteDataSource(t){if(this._dsRoutesByKey||(this._dsRoutesByKey=new Map),!t)return this.dsRoutes;let e=this._dsRoutesByKey.get(t);return e||(e=new Cesium.CustomDataSource(`ROUTE_${t}`),this.viewer?.dataSources?.add(e),this._dsRoutesByKey.set(t,e)),e}drawRouteSegmentsDegreesForKey(t,e,i={}){if(!e||!e.length)return;const n=Number.isFinite(i.zScale)?i.zScale:1,l=(1+n)/2,s=E=>Math.max(0,E*l),c=i.heightM??12e3*.3048,A=i.width??3,u=i.alpha??.95,O=this._getRouteDataSource(t);for(const E of e){const M=E.coords||[];if(M.length<2)continue;const p=[];for(const N of M){const T=typeof N.altM=="number"?N.altM:c,g=s(T);p.push(N.lon,N.lat,g)}if(O.entities.add({name:E.airway?`ROUTE-${E.airway}`:"ROUTE-DCT",polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(p),width:A,material:Cesium.Color.fromCssColorString(E.color??"#fbc965").withAlpha(u),clampToGround:!1}}),E.airway){const N=Math.floor(M.length/2),T=M[N];if(T){const g=typeof T.altM=="number"?T.altM:c,h=s(g);this.dsRoutes.entities.add({position:Cesium.Cartesian3.fromDegrees(T.lon,T.lat,h+4e3*n),label:{text:E.airway,font:"bold 12px sans-serif",fillColor:Cesium.Color.WHITE.withAlpha(.95),outlineColor:Cesium.Color.BLACK.withAlpha(.8),outlineWidth:2,style:Cesium.LabelStyle.FILL_AND_OUTLINE,verticalOrigin:Cesium.VerticalOrigin.CENTER,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,disableDepthTestDistance:Number.POSITIVE_INFINITY}})}}}}drawRouteSegmentsDegrees(t,e={}){return this.drawRouteSegmentsDegreesForKey(null,t,e)}drawRouteDegreesForKey(t,e,i={}){if(!e||e.length<2)return;const l=(1+(Number.isFinite(i.zScale)?i.zScale:1))/2,s=O=>Math.max(0,O*l),c=i.heightM??12e3*.3048,A=[];for(const O of e){const E=typeof O.altM=="number"?O.altM:c;A.push(O.lon,O.lat,s(E))}this._getRouteDataSource(t).entities.add({name:"ROUTE",polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(A),width:i.width??3,material:Cesium.Color.fromCssColorString(i.color??"#fbc965").withAlpha(i.alpha??.95),clampToGround:!1}})}drawRouteDegrees(t,e={}){return this.drawRouteDegreesForKey(null,t,e)}highlightAirway(t,e={}){const i=le?.[t];if(!i)return;const n=13900,l=[];for(const s of i){const c=Q?.[s];if(!c)continue;const A=v(c[0]),u=v(c[1]);A==null||u==null||l.push(u,A,n)}l.length<6||this.dsAirwayHighlights.entities.add({name:`HL_${t}`,polyline:{positions:Cesium.Cartesian3.fromDegreesArrayHeights(l),width:e.width??2,material:Cesium.Color.fromCssColorString(e.color??"white").withAlpha(e.alpha??.7),clampToGround:!1},properties:new Cesium.PropertyBag({airwayName:t})})}setLayerVisible(t,e){const i={airspace:this.dsAirspace,sectors:this.dsSectors,airways:this.dsAirways,runways:this.dsRunways,fixes:this.dsFixMarks,fixNames:this.dsFixNames,routes:this.dsRoutes,holdings:this.dsHoldings}[t];i&&(i.show=!!e)}nudgeHeading(t){if(!this.viewer)return;const e=window.Cesium;if(!e)return;const i=this.viewer.camera,n=e.Math.toRadians(t);i.setView({orientation:{heading:i.heading+n,pitch:i.pitch,roll:i.roll}})}nudgePitch(t){if(!this.viewer)return;const e=window.Cesium;if(!e)return;const i=this.viewer.camera,n=e.Math.toRadians(t),l=Math.max(e.Math.toRadians(-89.9),Math.min(e.Math.toRadians(-1),i.pitch+n));i.setView({orientation:{heading:i.heading,pitch:l,roll:i.roll}})}faceNorth(){if(!this.viewer||!window.Cesium)return;const e=this.viewer.camera;e.setView({orientation:{heading:0,pitch:e.pitch,roll:0}})}_installAttributionBadge(){try{if(!this.viewer||!this.viewer.container||this.viewer.container.querySelector(".attribution-badge"))return;const t=document.createElement("div");t.className="attribution-badge",t.textContent="Cesium ion | Bing Maps | Microsoft",Object.assign(t.style,{position:"absolute",right:"28px",bottom:"4px",zIndex:"5001",background:"rgba(0,0,0,0.55)",color:"#ddd",padding:"3px 8px",borderRadius:"10px",fontSize:"10px",lineHeight:"1.2",userSelect:"text",pointerEvents:"auto",whiteSpace:"nowrap"}),t.title="Click to open full data attribution",t.addEventListener("click",()=>{try{const e=this.viewer;if(!e)return;if(e.creditDisplay&&typeof e.creditDisplay.showLightbox=="function"){e.creditDisplay.showLightbox();return}const i=e.container.querySelector(".cesium-credit-expand-link");i&&i.click()}catch{}}),this.viewer.container.appendChild(t)}catch{}}_autoOpenAttributionOnce(){try{if(!this.viewer||!this.viewer.container||this._didAutoOpenAttribution)return;this._didAutoOpenAttribution=!0,setTimeout(()=>{try{const t=this.viewer;if(!t)return;if(t.creditDisplay&&typeof t.creditDisplay.showLightbox=="function"){t.creditDisplay.showLightbox();return}const e=t.container.querySelector(".cesium-credit-expand-link");e&&e.click()}catch{}},0)}catch{}}}function rt(o,t){const e=[];for(let i=0;i<o.length;i++){const n=o[i];if(t[n]){let l=null,s=null;for(let O=i-1;O>=0;O--)if(!t[o[O]]){l=o[O];break}for(let O=i+1;O<o.length;O++)if(!t[o[O]]){s=o[O];break}const c=t[n],A=c.indexOf(l),u=c.indexOf(s);if(A!==-1&&u!==-1){let O=c.slice(Math.min(A,u),Math.max(A,u)+1);A>u&&O.reverse(),e.length&&e.at(-1)===O[0]&&O.shift(),e.push(...O)}}else e.includes(n)||e.push(n)}return e}function Qt(){const o=Array.from(a.selectedSectorCodes),t=[];for(const e of Object.keys(Ue||{})){const i=e.endsWith("-FRA"),[n,l]=e.split("-"),s=l?.startsWith("OM"),c=n?.startsWith("OM"),A=!s&&!c,u=a.routeFilter;let O=!0;if(u==="FRA"?O=i:u==="Arr"?O=s&&!i:u==="Dep"?O=c&&!i:u==="Ovf"&&(O=A&&!i),!O||o.length>0&&!($e?.[e]||[]).some(N=>o.includes(N)))continue;const E=i?e.replace("-FRA",""):e;t.push({fullKey:e,label:E})}return t.sort((e,i)=>e.label.localeCompare(i.label)),t}function qt(o,t){const e=[];if(!Array.isArray(o)||o.length<2)return e;const i=A=>!!t?.[A],n=A=>String(A).toUpperCase()==="DCT",l=A=>!!A&&!i(A)&&!n(A),s=A=>{for(let u=A-1;u>=0;u--)if(l(o[u]))return o[u];return null},c=A=>{for(let u=A+1;u<o.length;u++)if(l(o[u]))return o[u];return null};for(let A=0;A<o.length;A++){const u=o[A];if(n(u)){const O=s(A),E=c(A);if(O&&E&&O!==E){const M=e[e.length-1];M?.points?.[M.points.length-1]!==E&&e.push({airway:null,points:[O,E],kind:"DCT"})}continue}if(i(u)){const O=s(A),E=c(A);if(!O||!E)continue;const M=t[u],p=M.indexOf(O),N=M.indexOf(E);if(p===-1||N===-1)continue;let T=M.slice(Math.min(p,N),Math.max(p,N)+1);p>N&&T.reverse(),T.length>=2&&e.push({airway:u,points:T,kind:"AIRWAY"});continue}if(l(u)){const O=o[A+1];if(l(O)){const E=e[e.length-1];E?.points?.[E.points.length-1]!==O&&e.push({airway:null,points:[u,O],kind:"DCT"})}}}return e}function it(o,t,e){const i=Ue?.[o];if(!i)return{segments:[],airwayColorMap:{},usedAirways:[]};const n=qt(i,le||{});if(!n.length)return{segments:[],airwayColorMap:{},usedAirways:[]};const l={};let s=0;const c=i.filter(u=>le?.[u]);for(const u of n)u.airway&&!l[u.airway]&&(l[u.airway]=e[s++%e.length]);return{segments:n.map(u=>{const O=[],E=[];for(const p of u.points){const N=t?.[p];if(!N)continue;const T=v(N[0]),g=v(N[1]);T==null||g==null||(O.push({name:p,lat:T,lon:g}),E.push(p))}const M=u.airway?l[u.airway]||"#fbc965":"#9aa0a6";return{airway:u.airway,color:M,coords:O,names:E}}).filter(u=>u.coords.length>=2),airwayColorMap:l,usedAirways:c}}function st(o,t){const e=Ue?.[o];if(!e)return{fixes:[],expandedFixNames:[],usedAirways:[]};const i=rt(e,le||{}),n=[];for(const s of i){const c=t?.[s];if(!c)continue;const A=v(c[0]),u=v(c[1]);A==null||u==null||n.push({name:s,lat:A,lon:u})}const l=e.filter(s=>le?.[s]);return{fixes:n,expandedFixNames:i,usedAirways:l}}let _e=0,De=null,me=null,Ce=null,Le=!1,se=new Set;const at=["#F7663F","#3DA0F1","#52E747","#FBD329","#7373F1","#17F5CB","#F79E3F","#93C3C7","#C2E747","#CD29FB"],S=o=>document.getElementById(o);function Pe(o){if(!o||typeof o!="string")return null;const e=o.trim().toUpperCase().match(/\b(?:FL|F|A)?\s*([0-9]{2,3})\b/);if(!e)return null;const i=parseInt(e[1],10);return Number.isFinite(i)?i*100:null}function zt(o){return(o??0)*.3048}function Yt(o,t){const i=E=>E*Math.PI/180,n=i(t.lat-o.lat),l=i(t.lon-o.lon),s=i(o.lat),c=i(t.lat),A=Math.sin(n/2),u=Math.sin(l/2),O=A*A+Math.cos(s)*Math.cos(c)*u*u;return 2*6371e3*Math.asin(Math.min(1,Math.sqrt(O)))}function lt(o,t){if(!t?.length)return t;const e=a.route3dProfilesByKey?.[o]||a.route3dProfile||null,i=e&&Number.isFinite(e.cflFt)?e.cflFt:12e3,n=e&&Number.isFinite(e.xflFt)?e.xflFt:12e3,l=[];for(const N of t)for(const T of N.coords||[]){const g=l[l.length-1];g&&g.name===T.name||l.push({...T})}if(l.length<2)return t;const s=[0];for(let N=1;N<l.length;N++)s[N]=s[N-1]+Yt(l[N-1],l[N]);const c=s[s.length-1]||1,A=a.route3dProfilesByKey?.[o]||a.route3dProfile,u=[],O=(N,T)=>{if(!N||!Number.isFinite(T))return;const g=l.findIndex(h=>(h.name||"").toUpperCase()===String(N).toUpperCase());g<=0||g>=l.length-1||u.push({idx:g,d:s[g],ft:T})};O(A?.fix1Name,A?.fix1Ft),O(A?.fix2Name,A?.fix2Ft),O(A?.fixName,A?.fixFt),u.sort((N,T)=>N.d-T.d);const E=[];for(const N of u)if(!(E.length&&E[E.length-1].idx===N.idx)&&(E.push(N),E.length>=2))break;const M=[{d:0,ft:i}];for(const N of E)M.push({d:N.d,ft:N.ft});M.push({d:c,ft:n});for(let N=0;N<l.length;N++){const T=s[N];let g=0;for(;g<M.length-2&&T>M[g+1].d;)g++;const h=M[g].d,y=M[g+1].d,w=M[g].ft,f=M[g+1].ft,R=y-h||1,K=(T-h)/R,V=w+(f-w)*K;l[N].altM=zt(V)}const p=new Map;for(const N of l){const T=`${N.name}|${N.lat.toFixed(6)}|${N.lon.toFixed(6)}`;p.set(T,N.altM)}return t.map(N=>({...N,coords:(N.coords||[]).map(T=>{const g=`${T.name}|${T.lat.toFixed(6)}|${T.lon.toFixed(6)}`,h=p.get(g);return typeof h=="number"?{...T,altM:h}:{...T}})}))}function Zt(o,t){if(!t?.length||t.length<2)return t;const e=[{airway:null,color:"#fbc965",coords:t.map(n=>({...n}))}];return lt(o,e)?.[0]?.coords||t}function jt(o){const t=[];for(const e of o||[])for(const i of e.coords||[]){const n=i?.name;!n||t[t.length-1]===n||t.push(n)}return t}function eo(){a.selectedRouteKey&&a.route3dProfilesByKey&&delete a.route3dProfilesByKey[a.selectedRouteKey],a.route3dProfile=null;const o=S("routeAltCfl3D"),t=S("routeAltFix1_3D"),e=S("routeAltLevel1_3D"),i=S("routeAltFix2_3D"),n=S("routeAltLevel2_3D"),l=S("routeAltXfl3D");o&&(o.value=""),t&&(t.value=""),e&&(e.value=""),i&&(i.value=""),n&&(n.value=""),l&&(l.value="")}function ve(o,t){const e=S("routeAltPanel3D");if(!e)return;if(a.mode!=="3d"||!o){e.style.display="none";return}const i=S("routeAltFix1_3D"),n=S("routeAltLevel1_3D"),l=S("routeAltFix2_3D"),s=S("routeAltLevel2_3D"),c=S("routeAltHint3D");if(!i||!n||!l||!s||!c)return;const A=a.route3dProfilesByKey?.[o]||null,u=jt(t),O=p=>{p.innerHTML="";const N=document.createElement("option");N.value="",N.textContent="(none)",p.appendChild(N);for(const T of u){const g=document.createElement("option");g.value=T,g.textContent=T,p.appendChild(g)}};O(i),O(l),A?.fix1Name&&u.includes(A.fix1Name)?i.value=A.fix1Name:i.value="",A?.fix2Name&&u.includes(A.fix2Name)?l.value=A.fix2Name:l.value="";const E=S("routeAltCfl3D"),M=S("routeAltXfl3D");E&&(E.value=A?.cflFt&&Number.isFinite(A.cflFt)?`${Math.round(A.cflFt/100)}`:""),M&&(M.value=A?.xflFt&&Number.isFinite(A.xflFt)?`${Math.round(A.xflFt/100)}`:""),A?.fix1Ft&&Number.isFinite(A.fix1Ft)?n.value=`${Math.round(A.fix1Ft/100)}`:n.value="",A?.fix2Ft&&Number.isFinite(A.fix2Ft)?s.value=`${Math.round(A.fix2Ft/100)}`:s.value="",c.textContent="Enter CFL/XFL and up to 2 Fix+Level constraints, then Apply.",e.style.display="block"}function to(o){const t={R:6371e3,toRad(r){return r*Math.PI/180},toDeg(r){return r*180/Math.PI},nmToMeters(r){return r*1852},bearing(r,d,m,C){const P=this.toRad(C-d),B=this.toRad(r),b=this.toRad(m),G=Math.sin(P)*Math.cos(b),U=Math.cos(B)*Math.sin(b)-Math.sin(B)*Math.cos(b)*Math.cos(P);return(this.toDeg(Math.atan2(G,U))+360)%360},haversineMeters(r,d,m,C){const P=this.toRad(m-r),B=this.toRad(C-d),b=this.toRad(r),G=this.toRad(m),U=Math.sin(P/2)**2+Math.cos(b)*Math.cos(G)*Math.sin(B/2)**2;return this.R*2*Math.atan2(Math.sqrt(U),Math.sqrt(1-U))},haversineNm(r,d,m,C){return this.haversineMeters(r,d,m,C)/1852},arcPoints(r,d,m,C,P,B,b,G=!0){const U=this.nmToMeters(m),D=this.toRad(r),F=this.toRad(d),_=(Z,re)=>{const Ae=this.toRad(re-d),Me=Math.sin(Ae)*Math.cos(this.toRad(Z)),be=Math.cos(D)*Math.sin(this.toRad(Z))-Math.sin(D)*Math.cos(this.toRad(Z))*Math.cos(Ae);return Math.atan2(Me,be)*180/Math.PI},X=_(C,P),$=_(B,b),W=Z=>(Z%360+360)%360;let J=W(X),Y=W($);G&&Y<J&&(Y+=360),!G&&J<Y&&(J+=360);const ne=2,ie=[];for(let Z=J;G?Z<=Y:Z>=Y;Z+=G?ne:-ne){const re=this.toRad(Z),Ae=Math.asin(Math.sin(D)*Math.cos(U/this.R)+Math.cos(D)*Math.sin(U/this.R)*Math.cos(re)),Me=F+Math.atan2(Math.sin(re)*Math.sin(U/this.R)*Math.cos(D),Math.cos(U/this.R)-Math.sin(D)*Math.sin(Ae));ie.push([this.toDeg(Ae),this.toDeg(Me)])}return ie}},e=(()=>{const r={};let d=null;function m(B,b){r[B]=b}function C(B){d&&r[d]?.onDeactivate&&r[d].onDeactivate(),d=B||null,d&&r[d]?.onActivate&&r[d].onActivate()}function P(B,b){if(!d)return;const G=r[d];if(G&&typeof G[B]=="function")return G[B](b)}return{register:m,setActive:C,dispatch:P,getActive:()=>d}})();window.__AIR=window.__AIR||{},window.__AIR.ToolManager=e,a.ui??={activeTool:null,cursor:""},a.rbl??={active:!1,anchor:null,previewLine:null,previewTooltip:null,objects:[]},a.measure??={active:!1,points:[],preview:null,tooltip:null,all:[],line:null},a.pen??={active:!1,drawing:!1,currentLine:null,all:[]},a.text??={active:!1,markers:[]},a.eraser??={active:!1,erasing:!1,suspended:!1,lastEraseAt:0},o.getPane("textPane")||o.createPane("textPane");const i=o.getPane("textPane");i.style.zIndex=1e4,i.style.pointerEvents="auto";const n={activeBorder:"#FBC965",activeColor:"#FBC965"},l=document.getElementById("rblToolBtn"),s=document.getElementById("measureBtn"),c=document.getElementById("penBtn"),A=document.getElementById("textToolBtn"),u=document.getElementById("eraserBtn");function O(r){switch(r){case"measure":case"rbl":case"pen":return"crosshair";case"text":return"text";case"eraser":return"crosshair";default:return""}}function E(r,d){r&&(r.style.borderColor=d?n.activeBorder:"",r.style.color=d?n.activeColor:"")}function M(r){o.getContainer().style.cursor=r||""}function p(){const r=a.ui.activeTool;E(l,r==="rbl"),E(s,r==="measure"),E(c,r==="pen"),E(A,r==="text"),E(u,r==="eraser"),M(a.ui.cursor)}function N(r){e.setActive(r),a.ui.activeTool=e.getActive?.()||null,a.ui.cursor=O(a.ui.activeTool),p()}function T(r,d){const m=e.getActive?.()||null;e.dispatch(r,d);const C=e.getActive?.()||null;C!==m&&(a.ui.activeTool=C,a.ui.cursor=O(C),p())}const g=document.getElementById("mouseCoords");if(g){let d=function(B,b){function G(F,_){const X=Math.abs(F),$=Math.floor(X),W=Math.floor((X-$)*60),J=((X-$-W/60)*3600).toFixed(2);return _==="lat"?`${String($).padStart(2,"0")}${String(W).padStart(2,"0")}${String(J).padStart(5,"0")}${F>=0?"N":"S"}`:`${String($).padStart(3,"0")}${String(W).padStart(2,"0")}${String(J).padStart(5,"0")}${F>=0?"E":"W"}`}const U=`"${G(B,"lat")}"`,D=`"${G(b,"lon")}"`;return`${U}, ${D}`},m=function(){g.classList.add("copied"),setTimeout(()=>g.classList.remove("copied"),250)},P=function(B){r=B,g.value=d(B.lat,B.lng)};window.L?.DomEvent&&L.DomEvent.disableClickPropagation(g);let r=null;async function C(B){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(B),!0}catch{}try{g.focus(),g.select();const b=document.execCommand("copy");return window.getSelection()?.removeAllRanges?.(),b}catch{return!1}}o.on("mousemove",B=>{B?.latlng&&P(B.latlng)}),o.on("mouseout",()=>{}),o.on("contextmenu",async()=>{if(!r)return;const B=d(r.lat,r.lng);await C(B)&&m()})}o.on("click",r=>T("onClick",r)),o.on("mousemove",r=>T("onMouseMove",r)),o.on("contextmenu",r=>T("onRightClick",r)),o.on("dblclick",r=>T("onDoubleClick",r)),o.on("mousedown",r=>T("onMouseDown",r)),o.on("mouseup",r=>T("onMouseUp",r));function h(r){const d=r?.originalEvent?.target;return!!d&&(d.closest?.(".airway-name-tooltip")||d.closest?.(".airway-name-inner"))}o.on("touchstart",r=>{h(r)||T("onMouseDown",r)}),o.on("touchmove",r=>{h(r)||T("onMouseMove",r)}),o.on("touchend",r=>{h(r)||T("onMouseUp",r)}),o.on("touchcancel",r=>{h(r)||T("onMouseUp",r)});function y(r,d){const m=document.getElementById(r);m&&m.addEventListener("click",()=>{d?.()})}function w(r){return Array.isArray(r)?(r.forEach(d=>{try{o.removeLayer(d)}catch{}}),[]):[]}function f(r){return Array.isArray(r)?(r.forEach(d=>{try{d?.line&&o.removeLayer(d.line),d?.tooltip&&o.removeLayer(d.tooltip)}catch{}}),[]):[]}l&&l.addEventListener("click",()=>{N(e.getActive()==="rbl"?null:"rbl")}),y("clearRblBtn",()=>{a.rbl.objects=f(a.rbl.objects),R(),a.rbl.anchor=null}),e.register("rbl",{onActivate(){const r=a.rbl;r.active=!0,r.anchor=null,R()},onDeactivate(){a.rbl.active=!1,a.rbl.anchor=null,R()},onRightClick(r){const d=a.rbl;d.active&&d.anchor&&(R(),d.anchor=null)},onClick(r){const d=a.rbl;if(!d.active)return;if(!d.anchor){d.anchor=r.latlng,d.previewLine=L.polyline([d.anchor],{color:"white",weight:1,dashArray:"4 4",interactive:!1}).addTo(o),d.previewTooltip=L.tooltip({permanent:!1,direction:"top",offset:[10,-10],className:"rbl-tooltip"}).setLatLng(d.anchor).setContent("/").addTo(o);return}const m=r.latlng,C=t.bearing(d.anchor.lat,d.anchor.lng,m.lat,m.lng),P=t.haversineNm(d.anchor.lat,d.anchor.lng,m.lat,m.lng),B=Math.round(C).toString().padStart(3,"0"),b=Math.round(P).toString().padStart(3,"0"),G=L.polyline([d.anchor,m],{color:"lime",weight:1.5,interactive:!1}).addTo(o),U=L.latLng((d.anchor.lat+3*m.lat)/4,(d.anchor.lng+3*m.lng)/4),D=L.tooltip({permanent:!0,direction:"top",offset:[0,0],className:"rbl-tooltip"}).setLatLng(U).setContent(`${B} / ${b}`).addTo(o);d.objects.push({line:G,tooltip:D}),R(),d.anchor=null},onMouseMove(r){const d=a.rbl;if(!d.active||!d.anchor||!d.previewLine||!d.previewTooltip)return;d.previewLine.setLatLngs([d.anchor,r.latlng]);const m=t.bearing(d.anchor.lat,d.anchor.lng,r.latlng.lat,r.latlng.lng),C=t.haversineNm(d.anchor.lat,d.anchor.lng,r.latlng.lat,r.latlng.lng),P=Math.round(m).toString().padStart(3,"0"),B=Math.round(C).toString().padStart(3,"0");d.previewTooltip.setLatLng(r.latlng).setContent(`${P} / ${B}`)}});function R(){const r=a.rbl;r.previewLine&&(o.removeLayer(r.previewLine),r.previewLine=null),r.previewTooltip&&(o.removeLayer(r.previewTooltip),r.previewTooltip=null)}const K=document.getElementById("measureBtn");y("clearMeasuresBtn",()=>{a.measure.all=f(a.measure.all),V()}),K.addEventListener("click",()=>{N(e.getActive()==="measure"?null:"measure")}),e.register("measure",{onActivate(){o.doubleClickZoom&&o.doubleClickZoom.disable()},onDeactivate(){V()},onDoubleClick(r){!measurePoints||measurePoints.length<2||x()},onClick(r){const d=a.measure,m=r.latlng;d.points.push(m),d.line?d.line.addLatLng(m):d.line=L.polyline([m],{color:"orange",weight:1.5,interactive:!1}).addTo(o),d.preview&&(o.removeLayer(d.preview),d.preview=null),k()},onMouseMove(r){const d=a.measure;if(d.points.length===0)return;const m=[...d.points,r.latlng];d.preview?d.preview.setLatLngs(m):d.preview=L.polyline(m,{color:"white",weight:1,dashArray:"4 4",interactive:!1}).addTo(o),k(r.latlng)},onRightClick(){if(a.measure.points.length<2){V();return}x()},onDoubleClick(){a.measure.points.length<2||x()}});function V(){const r=a.measure;r.line&&(o.removeLayer(r.line),r.line=null),r.tooltip&&(o.removeLayer(r.tooltip),r.tooltip=null),r.preview&&(o.removeLayer(r.preview),r.preview=null),r.points=[]}function k(r=null){const d=a.measure;let m=0;const C=[...d.points];r&&C.push(r);for(let U=1;U<C.length;U++)m+=C[U-1].distanceTo(C[U]);const P=(m/1852).toFixed(1),B=m*(5/6);let b=0,G=C[0];for(let U=1;U<C.length;U++){const D=C[U-1].distanceTo(C[U]);if(b+D>=B){const F=(B-b)/D,_=C[U-1].lat+F*(C[U].lat-C[U-1].lat),X=C[U-1].lng+F*(C[U].lng-C[U-1].lng);G=L.latLng(_,X);break}b+=D}d.tooltip?d.tooltip.setLatLng(G).setContent(`${P} Nm`):d.tooltip=L.tooltip({permanent:!0,direction:"top",offset:[0,0],className:"measure-tooltip"}).setLatLng(G).setContent(`${P} Nm`).addTo(o)}function x(){const r=a.measure;if(r.line&&r.tooltip){let d=0;for(let b=1;b<r.points.length;b++)d+=r.points[b-1].distanceTo(r.points[b]);const m=(d/1852).toFixed(1),C=d*(5/6);let P=0,B=r.points[0];for(let b=1;b<r.points.length;b++){const G=r.points[b-1].distanceTo(r.points[b]);if(P+G>=C){const U=(C-P)/G,D=r.points[b-1].lat+U*(r.points[b].lat-r.points[b-1].lat),F=r.points[b-1].lng+U*(r.points[b].lng-r.points[b-1].lng);B=L.latLng(D,F);break}P+=G}r.tooltip.setLatLng(B).setContent(`${m} Nm`),r.all.push({line:r.line,tooltip:r.tooltip})}r.line=null,r.tooltip=null,r.preview&&(o.removeLayer(r.preview),r.preview=null),r.points=[]}a.pen??={active:!1,drawing:!1,currentLine:null,all:[]};const H=document.getElementById("penBtn");H&&H.addEventListener("click",()=>{N(e.getActive()==="pen"?null:"pen")}),y("clearPenBtn",()=>{a.pen.all=w(a.pen.all),a.pen.drawing=!1,a.pen.currentLine=null});const j=o.getContainer();let q=0;const ae=300;j.addEventListener("mousedown",r=>{if(r.button!==2)return;const d=performance.now();if(d-q<ae){q=0,a?.eraser&&(a.eraser.rightHoldErasing=!1,a.eraser.erasing=!1);try{o.dragging.enable()}catch{}const m=e.getActive?.()==="pen";N(m?null:"pen"),r.preventDefault(),r.stopImmediatePropagation();return}q=d},{passive:!1,capture:!0}),e.register("pen",{onActivate(){const r=a.pen;r.active=!0,r.drawing=!1,r.currentLine=null,r.suspended=!1;const d=o.getContainer();o.doubleClickZoom.disable(),o.scrollWheelZoom.enable(),o.touchZoom&&o.touchZoom.enable(),o.boxZoom&&o.boxZoom.enable(),o.dragging.enable(),d.style.touchAction="none";const m=D=>{const F=D.touches?.[0]||D.changedTouches?.[0];if(!F)return null;const _=o.mouseEventToContainerPoint(F);return o.containerPointToLatLng(_)},C=(D,F=10)=>{if(D.length<2)return D;const _=[],X=D[0],$=D[D.length-1],W=[X,...D,$];for(let J=1;J<W.length-2;J++){const Y=W[J-1],ne=W[J],ie=W[J+1],Z=W[J+2];for(let re=0;re<=1;re+=1/F){const Ae=re*re,Me=Ae*re,be=.5*(2*ne[0]+(-Y[0]+ie[0])*re+(2*Y[0]-5*ne[0]+4*ie[0]-Z[0])*Ae+(-Y[0]+3*ne[0]-3*ie[0]+Z[0])*Me),Tt=.5*(2*ne[1]+(-Y[1]+ie[1])*re+(2*Y[1]-5*ne[1]+4*ie[1]-Z[1])*Ae+(-Y[1]+3*ne[1]-3*ie[1]+Z[1])*Me);_.push([be,Tt])}}return _.push($),_},P=D=>{D&&(r.drawing=!0,r.rawPoints=[[D.lat,D.lng]],r.currentLine=L.polyline([[D.lat,D.lng]],{color:"red",weight:1.5,opacity:.9,interactive:!1,smoothFactor:0}).addTo(o),r.all.push(r.currentLine))},B=D=>{if(!D||!r.currentLine)return;r.rawPoints=r.rawPoints||[],r.rawPoints.push([D.lat,D.lng]);const F=C(r.rawPoints,8);r.currentLine.setLatLngs(F)},b=()=>{r.drawing=!1,r.currentLine=null},G=()=>{!r.active||r.suspended||(r.suspended=!0,r.drawing&&b(),o.dragging.enable(),o.touchZoom&&o.touchZoom.enable(),d.style.touchAction="")},U=()=>{!r.active||!r.suspended||(r.suspended=!1,d.style.touchAction="none")};r._onMoveStart=()=>G(),r._onMoveEnd=()=>U(),o.on("movestart zoomstart",r._onMoveStart),o.on("moveend zoomend",r._onMoveEnd),r._touchOpts={passive:!1,capture:!0},r._touchStart=D=>{if(r.active){if(D.touches&&D.touches.length>1){G();return}r.suspended&&U(),D.preventDefault(),D.stopPropagation(),o.dragging.disable(),P(m(D))}},r._touchMove=D=>{if(r.active){if(D.touches&&D.touches.length>1){G();return}r.suspended||!r.drawing||!r.currentLine||(D.preventDefault(),D.stopPropagation(),B(m(D)))}},r._touchEnd=D=>{r.active&&r.drawing&&(D.preventDefault(),D.stopPropagation(),b(),o.dragging.enable())},d.addEventListener("touchstart",r._touchStart,r._touchOpts),d.addEventListener("touchmove",r._touchMove,r._touchOpts),d.addEventListener("touchend",r._touchEnd,r._touchOpts),d.addEventListener("touchcancel",r._touchEnd,r._touchOpts),r._mouseDownHandler=D=>{r.active&&D.button===0&&o.dragging.disable()},r._mouseUpHandler=()=>{r.active&&o.dragging.enable()},d.addEventListener("mousedown",r._mouseDownHandler),d.addEventListener("mouseup",r._mouseUpHandler)},onDeactivate(){const r=a.pen;r.active=!1,r.drawing=!1,r.currentLine=null,r.suspended=!1;const d=o.getContainer();d.style.touchAction="",r._onMoveStart&&(o.off("movestart zoomstart",r._onMoveStart),r._onMoveStart=null),r._onMoveEnd&&(o.off("moveend zoomend",r._onMoveEnd),r._onMoveEnd=null),r._touchStart&&(d.removeEventListener("touchstart",r._touchStart,{capture:!0}),d.removeEventListener("touchmove",r._touchMove,{capture:!0}),d.removeEventListener("touchend",r._touchEnd,{capture:!0}),d.removeEventListener("touchcancel",r._touchEnd,{capture:!0}),r._touchStart=r._touchMove=r._touchEnd=null,r._touchOpts=null),r._mouseDownHandler&&(d.removeEventListener("mousedown",r._mouseDownHandler),r._mouseDownHandler=null),r._mouseUpHandler&&(d.removeEventListener("mouseup",r._mouseUpHandler),r._mouseUpHandler=null),o.dragging.enable(),o.scrollWheelZoom.enable(),o.touchZoom&&o.touchZoom.enable(),o.boxZoom&&o.boxZoom.enable()},onMouseDown(r){const d=a.pen;if(!d.active||d.suspended)return;const m=r.originalEvent;(m?.button===0||m?.buttons===1)&&(o.dragging.disable(),m?.cancelable&&m.preventDefault(),d.drawing=!0,d.rawPoints=[[r.latlng.lat,r.latlng.lng]],d.currentLine=L.polyline([[r.latlng.lat,r.latlng.lng]],{color:"red",weight:1.5,opacity:.9,interactive:!1,smoothFactor:0}).addTo(o),d.all.push(d.currentLine))},onMouseMove(r){const d=a.pen;if(!d.active||d.suspended||!d.drawing||!d.currentLine)return;const m=r.originalEvent;if(m?.cancelable&&m.preventDefault(),d.rawPoints=d.rawPoints||[],d.rawPoints.push([r.latlng.lat,r.latlng.lng]),d.rawPoints.length<2)return;const C=P=>{const B=[],b=[P[0],...P,P[P.length-1]];for(let G=1;G<b.length-2;G++){const U=b[G-1],D=b[G],F=b[G+1],_=b[G+2];for(let X=0;X<=1;X+=.125){const $=X*X,W=$*X;B.push([.5*(2*D[0]+(-U[0]+F[0])*X+(2*U[0]-5*D[0]+4*F[0]-_[0])*$+(-U[0]+3*D[0]-3*F[0]+_[0])*W),.5*(2*D[1]+(-U[1]+F[1])*X+(2*U[1]-5*D[1]+4*F[1]-_[1])*$+(-U[1]+3*D[1]-3*F[1]+_[1])*W)])}}return B.push(P[P.length-1]),B};d.currentLine.setLatLngs(C(d.rawPoints))},onMouseUp(){const r=a.pen;r.active&&(r.drawing=!1,r.currentLine=null,o.dragging.enable())}});const ee=document.getElementById("textToolBtn");a.text??={active:!1,markers:[]},ee.addEventListener("click",()=>{N(e.getActive()==="text"?null:"text")}),y("clearTextBtn",()=>{a.text.markers=w(a.text.markers)}),e.register("text",{onActivate(){a.text.active=!0},onDeactivate(){a.text.active=!1},onClick(r){if(!a.text.active)return;const d=document.createElement("div");d.className="text-box-container";const m=document.createElement("textarea");m.className="text-box",m.placeholder="Type here";const C=document.createElement("div");C.className="text-box-close",C.innerHTML="",d.appendChild(C),d.appendChild(m);const P=L.marker(r.latlng,{pane:"textPane",draggable:!0,interactive:!0,icon:L.divIcon({className:"text-marker",html:d,iconSize:null})}).addTo(o);a.text.markers.push(P),C.addEventListener("mousedown",B=>B.stopPropagation()),C.addEventListener("click",B=>{B.stopPropagation(),o.removeLayer(P),a.text.markers=a.text.markers.filter(b=>b!==P)}),d.addEventListener("click",B=>B.stopPropagation()),d.addEventListener("dblclick",B=>B.stopPropagation()),d.addEventListener("contextmenu",B=>B.stopPropagation()),setTimeout(()=>m.focus(),0),N(null)}}),a.eraser??={active:!1,erasing:!1,lastEraseAt:0};const ge=35,Be=10;function Ne(){const r=document.activeElement;return r&&(r.tagName==="TEXTAREA"||r.isContentEditable)}function pe(){const r=e.getActive?.()||null;M(O(r))}function ce(r){if(Ne())return;const d=performance.now();if(d-a.eraser.lastEraseAt<ge)return;a.eraser.lastEraseAt=d;const m=o.latLngToContainerPoint(r);a.pen.all=B(a.pen.all,m),a.measure.all=b(a.measure.all,m),a.rbl.objects=b(a.rbl.objects,m),a.text.markers=G(a.text.markers,m);function C(U,D,F){const _=F.x-D.x,X=F.y-D.y,$=U.x-D.x,W=U.y-D.y,J=$*_+W*X;if(J<=0)return Math.hypot(U.x-D.x,U.y-D.y);const Y=_*_+X*X;if(Y<=J)return Math.hypot(U.x-F.x,U.y-F.y);const ne=J/Y,ie=D.x+ne*_,Z=D.y+ne*X;return Math.hypot(U.x-ie,U.y-Z)}function P(U,D){if(!U||typeof U.getLatLngs!="function")return!1;const F=U.getLatLngs()||[],_=F.flat?F.flat(10):F;if(!_||_.length<2)return!1;for(let X=0;X<_.length-1;X++){const $=o.latLngToContainerPoint(_[X]),W=o.latLngToContainerPoint(_[X+1]);if(C(D,$,W)<=Be)return!0}return!1}function B(U,D){return Array.isArray(U)?U.filter(F=>{if(!F)return!1;if(P(F,D)){try{o.removeLayer(F)}catch{}return!1}return!0}):[]}function b(U,D){return Array.isArray(U)?U.filter(F=>{const _=F?.line,X=F?.tooltip;if(!_)return!0;if(P(_,D)){try{o.removeLayer(_)}catch{}if(X)try{o.removeLayer(X)}catch{}return!1}return!0}):[]}function G(U,D){return Array.isArray(U)?U.filter(F=>{if(!F||typeof F.getLatLng!="function")return!1;if(o.latLngToContainerPoint(F.getLatLng()).distanceTo(D)<=Be){try{o.removeLayer(F)}catch{}return!1}return!0}):[]}}a.eraser.rightHoldErasing??=!1;const he=o.getContainer();he.addEventListener("mousedown",r=>{if(r.button!==2||Ne())return;a.eraser.rightHoldErasing=!0,a.eraser.erasing=!0,o.dragging.disable(),r.preventDefault(),r.stopPropagation();const d=o.mouseEventToContainerPoint(r),m=o.containerPointToLatLng(d);ce(m)},{passive:!1}),window.addEventListener("mousemove",r=>{if(!a.eraser.rightHoldErasing||Ne())return;r.preventDefault?.();const d=o.mouseEventToContainerPoint(r),m=o.containerPointToLatLng(d);ce(m)},{passive:!1}),window.addEventListener("mouseup",r=>{r.button===2&&a.eraser.rightHoldErasing&&(a.eraser.rightHoldErasing=!1,a.eraser.erasing=!1,o.dragging.enable(),pe(),r.preventDefault?.())},{passive:!1}),he.addEventListener("contextmenu",r=>{a.eraser.rightHoldErasing&&r.preventDefault()},{passive:!1}),o.getContainer().addEventListener("contextmenu",r=>{a.eraser.active&&a.eraser.erasing&&r.preventDefault()}),u&&u.addEventListener("click",()=>{N(e.getActive()==="eraser"?null:"eraser")}),e.register("eraser",{onActivate(){a.eraser.active=!0,a.eraser.erasing=!1;const r=o.getContainer(),d=a.eraser;d.suspended=!1,d._touchOpts={passive:!1,capture:!0},d._touchStart=P=>{if(!d.active)return;if(P.touches&&P.touches.length>1){m();return}d.suspended&&C(),P.preventDefault(),P.stopPropagation(),o.dragging.disable(),d.erasing=!0;const B=o.mouseEventToLatLng(P.touches[0]);ce(B)},d._touchMove=P=>{if(!d.active)return;if(P.touches&&P.touches.length>1){m();return}if(d.suspended||!d.erasing)return;P.preventDefault(),P.stopPropagation();const B=o.mouseEventToLatLng(P.touches[0]);ce(B)},d._touchEnd=P=>{d.active&&(d.erasing=!1,o.dragging.enable())};const m=()=>{!d.active||d.suspended||(d.suspended=!0,d.erasing=!1,o.dragging.enable(),o.touchZoom&&o.touchZoom.enable())},C=()=>{!d.active||!d.suspended||(d.suspended=!1)};r.addEventListener("touchstart",d._touchStart,d._touchOpts),r.addEventListener("touchmove",d._touchMove,d._touchOpts),r.addEventListener("touchend",d._touchEnd,d._touchOpts),r.addEventListener("touchcancel",d._touchEnd,d._touchOpts)},onDeactivate(){const r=a.eraser;r.active=!1,r.erasing=!1;const d=o.getContainer();o.dragging.enable(),o.touchZoom&&o.touchZoom.enable(),r._touchStart&&d.removeEventListener("touchstart",r._touchStart,r._touchOpts),r._touchMove&&d.removeEventListener("touchmove",r._touchMove,r._touchOpts),r._touchEnd&&(d.removeEventListener("touchend",r._touchEnd,r._touchOpts),d.removeEventListener("touchcancel",r._touchEnd,r._touchOpts)),r._touchStart=null,r._touchMove=null,r._touchEnd=null,pe()},onMouseDown(r){if(!a.eraser.active||Ne())return;const d=r.originalEvent,m=!!d&&(d.type?.startsWith("touch")||d.touches);if(m&&(d.touches||[]).length>1)return;const C=d?.button===0||d?.buttons===1,P=d?.button===2;!m&&!C&&!P||(a.eraser.erasing=!0,o.dragging.disable(),d?.cancelable&&d.preventDefault(),d?.stopPropagation?.(),ce(r.latlng))},onRightClick(r){if(!a.eraser.active||Ne())return;const d=r.originalEvent;a.eraser.erasing=!0,o.dragging.disable(),d?.cancelable&&d.preventDefault(),d?.stopPropagation?.(),ce(r.latlng)},onMouseMove(r){if(!a.eraser.active||!a.eraser.erasing)return;const d=r.originalEvent;d?.cancelable&&d.preventDefault(),ce(r.latlng)},onMouseUp(r){if(!a.eraser.active)return;a.eraser.erasing=!1,o.dragging.enable(),r?.originalEvent?.button===2&&pe()}}),p()}let z=new Jt,te=new $t,I=null;window.__AIR=window.__AIR||{};window.__AIR.activeAdapter=I;function oo(o,t){const e=document.getElementById("toggleDetails");if(e&&!e.checked)return;const i=document.getElementById("areaDetailsPanel");if(!i)return;const n=document.getElementById("areaName"),l=document.getElementById("areaLimit"),s=document.getElementById("areaType");n&&(n.textContent=o?.shapeName??""),l&&(l.textContent=o?.shapeInfo??""),s&&(s.textContent=o?.type??""),i.style.borderColor=t||"#ffffff";const c=t||"#ffffff";i.style.color=c,n&&(n.style.color=c),l&&(l.style.color=c),s&&(s.style.color=c),i.style.display="block"}window.__AIR.showAreaDetails=oo;function ct(){const o=document.getElementById("tooltipContainer");o&&(o.classList.remove("is-hidden"),document.getElementById("sectorTooltip")?.classList.remove("is-hidden"),document.getElementById("routeTooltip")?.classList.remove("is-hidden"),document.getElementById("expandedRouteTooltip")?.classList.remove("is-hidden"))}function Te(o,{refreshSids:t=!0}={}){if(!document.getElementById("tooltipContainer"))return;ht();const i=document.getElementById("routeTooltip"),n=document.getElementById("expandedRouteTooltip"),l=document.getElementById("sectorTooltip"),s=document.getElementById("remarksOverlay");if(s){const E=ot?.[o]?.REMARKS;E&&String(E).trim()?(s.innerHTML=`# ${E}`,s.style.display="block"):s.style.display="none"}const c=Ue?.[o];if(a.currentRouteFirstFix=c?.[0]||null,t&&ft(),!c){i&&(i.textContent="Route: "),n&&(n.textContent="Waypoints: "),l&&(l.textContent="Sectors: ");return}i&&(i.textContent=`Route: ${c.join(" - ")}`);const A=rt(c,le||{});n&&(n.textContent=`Waypoints: ${A.join(" ")}`);const u=$e?.[o],O=u?.length?u.join(" - "):"";l&&(l.textContent=`Sectors: ${O}`)}const de=new Map;function At(o){return Array.isArray(o)?Array.isArray(o[0])?o.map(t=>t?.[0]).filter(Boolean):o.filter(Boolean):[]}function dt(o){if(typeof we<"u"&&we?.[o]){const t=v(we[o][0]),e=v(we[o][1]);return t!=null&&e!=null?[t,e]:null}if(typeof Q<"u"&&Q?.[o]){const t=Q[o],e=v(t[0]),i=v(t[1]);return e!=null&&i!=null?[e,i]:null}return null}function Qe(o){const n=(o?.closest("label")?.textContent||o.value||o.id||"").trim().toUpperCase().replace(/_/g," ").split(/\s+/).filter(Boolean),l=n[0]||"",s=n[1]||"";return s?`${l}_${s}`:l}function ut(o){if(!o||typeof o.eachLayer!="function")return null;let t=null;return o.eachLayer(e=>{e?.getBounds&&(t=t?t.extend(e.getBounds()):e.getBounds())}),t}function no(o){if(a.mode!=="2d"||!o||typeof window.L>"u")return null;const t=[];return document.querySelectorAll('#panelSids input[type="checkbox"]').forEach(e=>{if(!e.checked)return;const i=Qe(e),n=`${o}_${i}`;if(typeof Ee>"u"||!Ee?.[n])return;const s=At(Ee[n]).map(dt).filter(Boolean);for(const c of s)t.push(c)}),t.length>1?L.latLngBounds(t):null}let Se=null,xe=!1;function ro(o){const t=flyBounds.getSouthWest(),e=flyBounds.getNorthEast(),i=Math.abs(e.lat-t.lat),n=Math.abs(e.lng-t.lng);return i>n?[100,130]:[250,140]}function Ot(o,{duration:t=.4}={}){if(!o||a.mode!=="2d"||!I?.map||typeof window.L>"u")return;const i={padding:ro(),maxZoom:9.1,duration:t,easeLinearity:.25};if(typeof I.flyToBoundsAsync=="function"){I.flyToBoundsAsync(flyBounds,i);return}typeof I.map.flyToBounds=="function"&&I.map.flyToBounds(o,i)}function Et(){let o=Se?L.latLngBounds(Se):null;const t=ut(I.layers?.sids);t&&(o=o?o.extend(t):t),Ot(o)}function io(){const o=Se?L.latLngBounds(Se):ut(I.layers?.routes);Ot(o)}function Nt(o){if(!o?.checked||a.mode!=="2d")return;const t=a.currentRouteFirstFix;if(!t)return;const e=Qe(o),i=`${t}_${e}`;if(typeof Ee>"u"||!Ee?.[i])return;const l=At(Ee[i]).map(dt).filter(Boolean);if(l.length<2)return;if(de.has(o.id)){const c=de.get(o.id);c&&I?.layers?.sids&&I.layers.sids.removeLayer(c),de.delete(o.id)}const s=I?.drawSidLatLngs?.(l,{color:"#FCFBBB",weight:1.7,dashArray:"10 10",opacity:.85});s&&(de.set(o.id,s),xe||Et())}function so(o){const t=de.get(o.id);t&&I?.layers?.sids&&I.layers.sids.removeLayer(t),de.delete(o.id),de.size>0?Et():io()}function ft(){I?.clearSids?.(),de.clear();const o=a.currentRouteFirstFix;if(o){xe=!0;try{document.querySelectorAll('#panelSids input[type="checkbox"]').forEach(t=>{if(!t.checked)return;const e=Qe(t),i=`${o}_${e}`;typeof Ee>"u"||!Ee?.[i]||Nt(t)})}finally{xe=!1}}}function ao(){document.querySelectorAll('#panelSids input[type="checkbox"]').forEach(o=>{o.addEventListener("change",()=>{o.checked?Nt(o):so(o)})}),document.getElementById("panelSids")?.addEventListener("click",o=>o.stopPropagation())}let Oe={group:null,codes:[]};function ht(){try{a.mode==="2d"&&z?.map&&Oe.group&&Oe.group.clearLayers()}catch{}Oe.codes=[]}async function lo(){if(a.mode!=="2d"||!z?.map||typeof L>"u")return;const o=a.selectedRouteKey;if(!o)return;const t=$e?.[o];if(!t?.length)return;const{convertDMSToDecimal:e}=await ke(async()=>{const{convertDMSToDecimal:i}=await Promise.resolve().then(()=>We);return{convertDMSToDecimal:i}},void 0,import.meta.url);Oe.group?Oe.group.clearLayers():Oe.group=L.layerGroup().addTo(z.map);for(const i of t){const n=Je?.[i],l=n?.coords;if(!l||l.length<3)continue;const s=[];for(const A of l){const u=e(A?.[0]),O=e(A?.[1]);u==null||O==null||s.push([u,O])}if(s.length<3)continue;const c=n?.color||"orange";L.polygon(s,{color:c,weight:1.5,dashArray:"5 5",opacity:.25,fill:!0,fillColor:c,fillOpacity:.2,interactive:!1,bubblingMouseEvents:!1}).addTo(Oe.group)}Oe.codes=t.slice()}function co(){const o=document.getElementById("sectorTooltip");o&&(o._hoverPreviewWired||(o._hoverPreviewWired=!0,o.addEventListener("mouseenter",()=>{lo()}),o.addEventListener("mouseleave",()=>{ht()})))}function Ao(){const o=document.getElementById("toggleTableBtn"),t=document.getElementById("sectorTablePanel"),e=document.querySelector("#sectorTable tbody");if(!o||!t||!e)return;function i(){e.innerHTML="",(tt||[]).forEach(s=>{const c=document.createElement("tr");c.innerHTML=`
        <td>${s.sector??""}</td>
        <td>${s.limit??""}</td>
        <td>${s.freq??""}</td>
      `,e.appendChild(c)})}i();const n={x:-126,y:5};o.addEventListener("click",function(s){if(s.stopPropagation(),t.style.display==="none"||t.style.display===""){const A=o.getBoundingClientRect();t.style.left=A.left+n.x+"px",t.style.top=A.bottom+window.scrollY+n.y+"px",t.style.display="block",this.textContent="Sector Info "}else t.style.display="none",this.textContent="Sector Info "});function l(s){if(!s)return;let c=!1,A=0,u=0,O=0,E=0,M=0,p=0,N=!1;s.style.willChange="transform",s.style.touchAction="none";function T(f){return f.touches&&f.touches[0]?{x:f.touches[0].clientX,y:f.touches[0].clientY}:{x:f.clientX,y:f.clientY}}function g(){N=!1,s.style.transform=`translate3d(${M}px, ${p}px, 0)`}function h(f){if(!c)return;f.cancelable&&f.preventDefault();const{x:R,y:K}=T(f);M=O+(R-A),p=E+(K-u),N||(N=!0,requestAnimationFrame(g))}function y(){c&&(c=!1,O=M,E=p,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",y),document.removeEventListener("touchcancel",y))}function w(f){if(s.style.display==="none"||s.style.display==="")return;c=!0,f.cancelable&&f.preventDefault();const{x:R,y:K}=T(f);A=R,u=K,document.addEventListener("mousemove",h,{passive:!1}),document.addEventListener("mouseup",y),document.addEventListener("touchmove",h,{passive:!1}),document.addEventListener("touchend",y),document.addEventListener("touchcancel",y)}s.addEventListener("mousedown",w),s.addEventListener("touchstart",w,{passive:!1})}l(t),t.addEventListener("click",s=>s.stopPropagation())}function qe(o){a.mode=o,document.body.dataset.mode=o;const t=document.getElementById("map2d"),e=document.getElementById("map3d");if(o==="2d"){t.style.display="block",e.style.display="none",te?.viewer?.imageryLayers&&(te.viewer.imageryLayers.removeAll(),te.viewer.scene?.globe&&(te.viewer.scene.globe.baseColor=Cesium.Color.BLACK)),document.getElementById("cesiumControls")?.classList.remove("is-visible");const n=document.getElementById("routeAltPanel3D");if(n&&(n.style.display="none"),I=z,window.__AIR.activeAdapter=I,z._inited||(z.init("map2d"),z._inited=!0),z.setBaseMapVisible?.(a.layers.baseMap),z.invalidateSize?.(),z._toolsWired||(to(z.map),z._toolsWired=!0),!(a.selectedSectorCodes?.size>0)){const s=document.getElementById("showSectorColors"),c=document.getElementById("showSectorBorder");s&&(s.checked=!1,a.layers.sectorColors=!1),c&&(c.checked=!1,a.layers.sectorBorders=!1)}}else{t.style.display="none",e.style.display="block",document.getElementById("cesiumControls")?.classList.add("is-visible"),I=te,window.__AIR.activeAdapter=I,a.layers.sectorColors=!0,a.layers.sectorBorders=!0;const n=document.getElementById("showSectorColors"),l=document.getElementById("showSectorBorder");n&&(n.checked=!0),l&&(l.checked=!0),te._inited||(te.init("map3d",{cesiumControlsMountEl:document.getElementById("cesiumControls")}),te._inited=!0),Mt()}const i=document.getElementById("modeLabel");document.getElementById("btnMode"),i&&(i.textContent=o.toUpperCase()),i&&(i.textContent=o==="2d"?"3D":"2D"),a.selectedRouteKey&&(Le=!0),oe()}function oe(){if(!I)return;I.drawAirspaceBoundary?.(),a.layers.sectors?I.drawSectors?.({colored:a.layers.sectorColors,borderOnly:a.layers.sectorBorders,stroke:a.layers.sectorBorders,fill:a.layers.sectorColors,opacity:a.layers.sectorOpacity,selectedCodes:a.selectedSectorCodes.size?Array.from(a.selectedSectorCodes):null,zScale:a.zScale}):I.setLayerVisible?.("sectors",!1),I?.drawFixesFromData&&I.drawFixesFromData(Q,a.layers),a.layers.airways&&I.drawAirways?.();const o=a.layers.mapLayersMaster!==!1;if(I.drawRunways?.({show:o&&!!a.layers.runways}),I.setLayerVisible?.("airspace",o&&a.layers.airspace),I.setLayerVisible?.("sectors",o&&a.layers.sectors),I.setLayerVisible?.("airways",o&&a.layers.airways),I.setLayerVisible?.("runways",o&&a.layers.runways),I.setLayerVisible?.("fixes",o&&a.layers.fixes),I.setLayerVisible?.("fixNames",o&&a.layers.fixNames),a.mode==="2d"&&I.setAwyLabelsVisible?.(o&&!!a.layers.awyLabels),I?.clearAreas?.(),a.areas?.cta&&I.drawAreasCategory?.("areasCTA",kt,"#84ACEC"),a.areas?.training&&I.drawAreasCategory?.("areasTraining",Xt,"#BDEEEF"),a.areas?.restricted&&I.drawAreasCategory?.("areasRestricted",_t,"#FEB476"),a.areas?.danger&&I.drawAreasCategory?.("areasDanger",xt,"#FFBDFF"),a.areas?.prohibitated&&I.drawAreasCategory?.("areasProhibited",Gt,"#FFFF66"),I?.drawHoldingsFromLibrary&&I.drawHoldingsFromLibrary(Wt,{show:o&&!!a.layers.holdings,zScale:a.zScale}),a.mode==="2d"&&I?.drawFreqFromLibrary&&(I.drawFreqFromLibrary(Ht,{show:o&&!!a.layers.freq}),I.setLayerVisible?.("freq",o&&!!a.layers.freq)),a.selectedRouteKey){Te(a.selectedRouteKey);const t=a.selectedRouteKey!==De,e=a.mode!==me,i=a.mode==="3d"&&a.zScale!==Ce;(Le||t||e||i)&&(ye(a.selectedRouteKey,{fly:!1}),De=a.selectedRouteKey,me=a.mode,Ce=a.mode==="3d"?a.zScale:null,Le=!1)}else De=null,me=null,Ce=null,Le=!1}function uo(){const o=document.getElementById("showHoldingsBtn");if(!o)return;const t=()=>{o.classList.toggle("is-active",!!a.layers.holdings)};o.addEventListener("click",()=>{a.layers.holdings=!a.layers.holdings,t(),oe()}),t()}function Oo(){const o=document.getElementById("toggleFreqBtn");if(!o)return;const t=()=>{o.classList.toggle("is-active",!!a.layers.freq)};o.addEventListener("click",()=>{a.mode!=="2d"&&qe("2d"),a.layers.freq=!a.layers.freq,t(),oe()}),t()}function ye(o,{fly:t=!0}={}){if(!I)return;a.multiRouteAddMode?(I.clearRouteByKey?.(o),se.add(o)):(I.clearRoute?.(),se=new Set([o]));const{segments:e,airwayColorMap:i,usedAirways:n}=it(o,Q,at);if(!e.length){const{fixes:l,usedAirways:s}=st(o,Q);if(l.length<2)return;if(a.mode==="2d"){const c=l.map(u=>[u.lat,u.lon]),A=I.drawRouteLatLngs(c,{color:"#fbc965",weight:2.4,opacity:.95},o);t&&A?.getBounds&&I.flyToBounds(A.getBounds()),s.forEach(u=>I.highlightAirway(u,{color:"white",dashArray:"2 8",opacity:.7}))}else{const A=Zt(o,l.map(u=>({lat:u.lat,lon:u.lon,name:u.name}))).map(u=>({lat:u.lat,lon:u.lon,altM:u.altM}));I.drawRouteDegreesForKey?I.drawRouteDegreesForKey(o,A,{color:"#fbc965",width:3,alpha:.95,zScale:a.zScale}):I.drawRouteDegrees(A,{color:"#fbc965",width:3,alpha:.95,zScale:a.zScale}),t&&I.setView({lat:l[0].lat,lon:l[0].lon,heightM:42e4}),ve(o,[{coords:l}])}return}if(a.mode==="2d"){const l=[];for(const E of e)for(const M of E.coords||[])l.push([M.lat,M.lon]);const s=typeof window.L<"u"&&l.length>1?L.latLngBounds(l):null;Se=s?L.latLngBounds(s):null;const c=Ue?.[o];c?.[0]&&(a.currentRouteFirstFix=c[0]);const A=no(a.currentRouteFirstFix);let u=s;A&&(u=u?u.extend(A):A);const O=async()=>{ft();const E=++_e;De=o,me=a.mode,Le=!1;const M=I.drawRouteSegmentsAnimated?.(e,{frameDelayMs:50,routeKey:o});n.forEach(g=>{const h=i[g]||"white";I.highlightAirway(g,{color:h,dashArray:"2 8",opacity:.7,weight:1.8})});const p=e[0].coords?.[0]?.name,N=e[e.length-1],T=N.coords?.[N.coords.length-1]?.name;M&&typeof M.then=="function"&&await M,E===_e&&I.drawRouteEndTooltips?.(o,p,T)};if(t&&u&&I.flyToBoundsAsync){const E=s.getSouthWest(),M=s.getNorthEast(),p=Math.abs(M.lat-E.lat),N=Math.abs(M.lng-E.lng),T=p>N?[100,130]:[250,140];I.flyToBoundsAsync(s,{padding:T,maxZoom:9.1,duration:.5,easeLinearity:.25}).then(()=>setTimeout(()=>O(),80))}else O(),t&&u&&I.flyToBounds(u)}else{const l=lt(o,e);if(I.drawRouteSegmentsDegreesForKey?I.drawRouteSegmentsDegreesForKey(o,l,{width:3,alpha:.95,heightM:12e3*.3048,zScale:a.zScale}):I.drawRouteSegmentsDegrees?.(l,{width:3,alpha:.95,heightM:12e3*.3048,zScale:a.zScale}),t){const s=e[0]?.coords?.[0];s&&I.setView({lat:s.lat,lon:s.lon,heightM:42e4})}ve(o,e)}}function Mt(){if(te?._inited)try{te._baseMapVisible!==!1&&te.setImagery?.(a.layers3d?.imagery||"osm"),te.setTerrainEnabled?.(!!a.layers3d?.terrain),te.setLightingEnabled?.(!!a.layers3d?.lighting),te.setFogEnabled?.(!!a.layers3d?.fog)}catch(o){console.warn("[3D Layers] apply failed:",o)}}function fe(o,t,e={}){const i=document.getElementById(o),n=document.getElementById(t);if(!i||!n)return;const l=e.closeOnOutside!==!1;i.dataset.closeOutside=l?"true":"false";const s=()=>{i.classList.remove("open"),n.textContent=n.textContent.replace("","")};n.addEventListener("click",c=>{c.stopPropagation();const A=i.classList.toggle("open");n.textContent=n.textContent.replace(A?"":"",A?"":"")}),fe._bound||(document.addEventListener("click",()=>{document.querySelectorAll(".dropdown.open").forEach(c=>{c?.dataset?.closeOutside!=="false"&&c.classList.remove("open")}),document.querySelectorAll(".dropdown > button").forEach(c=>{const A=c.parentElement;A?.classList?.contains("dropdown")&&A.classList.contains("open")&&A?.dataset?.closeOutside==="false"||(c.textContent=c.textContent.replace("",""))})}),fe._bound=!0),n._closeDropdown=s}function Eo(){const o=["S","L","B","N","M","C"],t=["G","A","W","D","H","E","Y","R","K"],e=a.selectedSectorCodes;e.clear(),document.querySelectorAll('#sectorOptions input[type="checkbox"][value]').forEach(n=>{n.checked=!1});const i=(n,l)=>{n.forEach(s=>{const c=document.querySelector(`#sectorOptions input[value="${s}"]`);c&&(c.checked=l,c.dispatchEvent(new Event("change")))})};document.getElementById("sectorOpacity")?.addEventListener("input",n=>{a.layers.sectorOpacity=parseFloat(n.target.value),oe()}),document.querySelectorAll('#sectorOptions input[type="checkbox"][value]').forEach(n=>{n.addEventListener("change",()=>{const l=n.value;n.checked?e.add(l):e.delete(l),ze(),oe()})}),document.getElementById("selectHighSectors")?.addEventListener("change",function(){i(o,this.checked)}),document.getElementById("selectLowSectors")?.addEventListener("change",function(){i(t,this.checked)})}function ze(){const o=S("routeList");o.innerHTML="";const t=Qt();for(const{fullKey:e,label:i}of t){const n=document.createElement("button");n.textContent=i,(se?.has?.(e)||a.selectedRouteKey===e)&&n.classList.add("selected-route"),n.addEventListener("click",()=>{if(se?.has?.(e)||a.selectedRouteKey===e){if(n.classList.remove("selected-route"),se.delete(e),!a.multiRouteAddMode)I?.clearRoute?.();else{I?.clearRoute?.();for(const A of se)ye(A,{fly:!1})}if(a.selectedRouteKey===e){const A=se.size?Array.from(se).at(-1):null;a.selectedRouteKey=A,A?Te(A,{refreshSids:!1}):Te(null)}return}a.multiRouteAddMode||(document.querySelectorAll("#routeList button").forEach(A=>A.classList.remove("selected-route")),se.clear()),n.classList.add("selected-route"),se.add(e);const c=a.selectedRouteKey!==e;if(a.selectedRouteKey=e,c&&!a.multiRouteAddMode&&eo(),I?.clearSids?.(),de.clear(),a.mode==="3d")try{const{segments:A}=it(e,Q,at);if(A?.length)ve(e,A);else{const{fixes:u}=st(e,Q);ve(e,[{coords:u}])}}catch(A){console.warn("[3D Route Profile] panel init failed:",A)}ye(e,{fly:!0}),De=e,me=a.mode,Ce=a.mode==="3d"?a.zScale:null,Le=!1,Te(e,{refreshSids:!1}),ct()}),o.appendChild(n)}}function No(){const o=S("rpToggle"),t=S("routePanel");let e=!0;const i=()=>{o.textContent=e?"":"",o.title=e?"Hide Route Panel":"Show Route Panel"};o.addEventListener("click",()=>{e=!e,t.style.display=e?"flex":"none";const n=S("tooltipContainer");n&&n.classList.toggle("is-hidden",!e),o.classList.toggle("is-open",e),o.classList.toggle("is-closed",!e),i()}),i()}let ue=null;function fo(){if(ue)return;const o=window.NE_COUNTRIES;if(!o){console.error("NE_COUNTRIES not loaded");return}ue=L.geoJSON(o,{style:{color:"pink",weight:.4,fillOpacity:0,opacity:1,interactive:!1}}).addTo(z.map)}function ho(o){a.mode==="2d"&&(o?(fo(),ue&&!z.map.hasLayer(ue)&&ue.addTo(z.map)):ue&&z.map.hasLayer(ue)&&z.map.removeLayer(ue))}function Mo(o,t){if(!o||!t)return;let e=!1,i=0,n=0,l=0,s=0,c=null;const A=()=>{const M=o.getBoundingClientRect();o.style.left=M.left+"px",o.style.top=M.top+"px",o.style.right="auto"},u=M=>{if(M.pointerType==="mouse"&&M.button!==0)return;M.preventDefault(),M.stopPropagation(),A();const p=o.getBoundingClientRect();e=!0,c=M.pointerId,i=M.clientX,n=M.clientY,l=p.left,s=p.top,t.setPointerCapture?.(c)},O=M=>{if(!e||c!=null&&M.pointerId!==c)return;const p=M.clientX-i,N=M.clientY-n,T=window.innerWidth,g=window.innerHeight,h=o.getBoundingClientRect(),y=h.width,w=h.height;let f=l+p,R=s+N;const K=6;f=Math.max(K,Math.min(T-y-K,f)),R=Math.max(K,Math.min(g-w-K,R)),o.style.left=f+"px",o.style.top=R+"px"},E=M=>{e&&(c!=null&&M.pointerId!==c||(e=!1,c=null))};t.addEventListener("pointerdown",u),window.addEventListener("pointermove",O),window.addEventListener("pointerup",E)}function Lo(){S("btnMode").addEventListener("click",()=>qe(a.mode==="2d"?"3d":"2d"));const o=S("addRouteBtn"),t=()=>{o&&o.classList.toggle("is-active",!!a.multiRouteAddMode)};t(),o?.addEventListener("click",f=>{f.stopPropagation(),a.multiRouteAddMode=!a.multiRouteAddMode,t()});const e=S("applyRouteAlt3D"),i=S("clearRouteAlt3D");S("routeAltPanel3D")?.addEventListener("click",f=>f.stopPropagation()),e?.addEventListener("click",()=>{if(a.mode!=="3d"||!a.selectedRouteKey)return;const f=(S("routeAltCfl3D")?.value||"").trim(),R=(S("routeAltXfl3D")?.value||"").trim(),K=(S("routeAltFix1_3D")?.value||"").trim(),V=(S("routeAltLevel1_3D")?.value||"").trim(),k=(S("routeAltFix2_3D")?.value||"").trim(),x=(S("routeAltLevel2_3D")?.value||"").trim(),H=Pe(f),j=Pe(R),q=Pe(V),ae=Pe(x),ee={cflFt:Number.isFinite(H)?H:null,xflFt:Number.isFinite(j)?j:null,fix1Name:K&&Number.isFinite(q)?K:null,fix1Ft:Number.isFinite(q)?q:null,fix2Name:k&&Number.isFinite(ae)?k:null,fix2Ft:Number.isFinite(ae)?ae:null};a.route3dProfilesByKey[a.selectedRouteKey]=ee,a.route3dProfile=ee,ye(a.selectedRouteKey,{fly:!1})}),i?.addEventListener("click",()=>{a.selectedRouteKey&&a.route3dProfilesByKey&&delete a.route3dProfilesByKey[a.selectedRouteKey],a.route3dProfile=null,a.mode==="3d"&&a.selectedRouteKey&&ye(a.selectedRouteKey,{fly:!1});const f=S("routeAltCfl3D"),R=S("routeAltFix1_3D"),K=S("routeAltLevel1_3D"),V=S("routeAltFix2_3D"),k=S("routeAltLevel2_3D"),x=S("routeAltXfl3D");f&&(f.value=""),R&&(R.value=""),K&&(K.value=""),V&&(V.value=""),k&&(k.value=""),x&&(x.value="")}),Mo(S("routeAltPanel3D"),S("routeAltDrag3D"));let n=!0;document.body.classList.toggle("rte-extra-off",!n);const l=S("toggleRouteTipsBtn");l&&(l.style.color="#B4F59D"),S("toggleRouteTipsBtn")?.addEventListener("click",()=>{n=!n,document.body.classList.toggle("rte-extra-off",!n),l&&(l.style.color=n?"#B4F59D":"#c2c2c0"),n&&a.selectedRouteKey&&Te(a.selectedRouteKey)});const s=S("toggleMapBtn"),c=()=>{s&&(s.style.color=a.layers.baseMap?"#B4F59D":"")};c(),s?.addEventListener("click",()=>{a.layers.baseMap=!a.layers.baseMap,c(),a.mode==="2d"&&(z.setBaseMapVisible?.(a.layers.baseMap),oe())}),S("resetViewBtn")?.addEventListener("click",()=>{_e++,I?.clearRoute?.(),se.clear(),a.selectedRouteKey=null,a.route3dProfile=null,a.route3dProfilesByKey={};const f=document.getElementById("routeAltPanel3D");f&&(f.style.display="none"),document.querySelectorAll("#routeList button").forEach(R=>R.classList.remove("selected-route")),ct(),Te(null)});const A=(f,R)=>{a.layers[f]=R,oe()};S("togAirspace").addEventListener("change",f=>A("airspace",f.target.checked)),S("togAirways").addEventListener("change",f=>A("airways",f.target.checked)),S("togFixes").addEventListener("change",f=>A("fixes",f.target.checked)),S("togFixNames").addEventListener("change",f=>A("fixNames",f.target.checked)),S("mlAirspace")?.addEventListener("change",f=>{a.layers.mapLayersMaster=f.target.checked,oe()}),S("mlAirspace")&&(a.layers.mapLayersMaster=S("mlAirspace").checked),S("mlRunways")?.addEventListener("change",f=>{a.layers.runways=f.target.checked,oe()}),S("mlRunways")&&(a.layers.runways=S("mlRunways").checked),S("mlBorders")?.addEventListener("change",f=>ho(f.target.checked)),a.areas=a.areas||{restricted:!1,prohibitated:!1,danger:!1,training:!1,cta:!1};const u=(f,R)=>{a.areas[f]=!!R,oe()},O=S("toggleRestricted"),E=S("toggleProhibitated"),M=S("toggleDanger"),p=S("toggleTraining"),N=S("toggleCTA");O&&(a.areas.restricted=O.checked),E&&(a.areas.prohibitated=E.checked),M&&(a.areas.danger=M.checked),p&&(a.areas.training=p.checked),N&&(a.areas.cta=N.checked),O?.addEventListener("change",f=>u("restricted",f.target.checked)),E?.addEventListener("change",f=>u("prohibitated",f.target.checked)),M?.addEventListener("change",f=>u("danger",f.target.checked)),p?.addEventListener("change",f=>u("training",f.target.checked)),N?.addEventListener("change",f=>u("cta",f.target.checked));const T=document.getElementById("areaDetailsPanel");S("clearAreasBtn")?.addEventListener("click",()=>{["toggleRestricted","toggleProhibitated","toggleDanger","toggleTraining","toggleCTA","toggleDetails"].forEach(f=>{const R=S(f);R&&(R.checked=!1)}),a.areas.restricted=!1,a.areas.prohibitated=!1,a.areas.danger=!1,a.areas.training=!1,a.areas.cta=!1,a.areas.showAreaDetails=!1,T.style.display="none",I?.clearAreas?.(),oe()}),S("toggleDetails")?.addEventListener("change",f=>{f.target.checked||T&&(T.style.display="none")}),S("mlAwyLabels")?.addEventListener("change",f=>{a.layers.awyLabels=f.target.checked,a.mode==="2d"&&I?.setAwyLabelsVisible?.(f.target.checked)}),S("showSectorColors")?.addEventListener("change",f=>A("sectorColors",f.target.checked)),S("showSectorBorder")?.addEventListener("change",f=>A("sectorBorders",f.target.checked));const g=S("zScale"),h=S("zVal");g.addEventListener("input",()=>{a.zScale=parseFloat(g.value),h.textContent=a.zScale.toFixed(1)+"x",a.mode==="3d"&&oe()});const y=()=>{Mt(),a.mode==="3d"&&oe()};document.querySelectorAll('input[name="img3d"]').forEach(f=>{f.addEventListener("change",R=>{R.target.checked&&(a.layers3d.imagery=R.target.value,y())})}),S("tog3dTerrain")?.addEventListener("change",f=>{a.layers3d.terrain=f.target.checked,y()}),S("tog3dLighting")?.addEventListener("change",f=>{a.layers3d.lighting=f.target.checked,y()}),S("tog3dFog")?.addEventListener("change",f=>{a.layers3d.fog=f.target.checked,y()});const w=document.querySelector('input[name="img3d"]:checked');w&&(a.layers3d.imagery=w.value),S("tog3dTerrain")&&(a.layers3d.terrain=S("tog3dTerrain").checked),S("tog3dLighting")&&(a.layers3d.lighting=S("tog3dLighting").checked),S("tog3dFog")&&(a.layers3d.fog=S("tog3dFog").checked),document.querySelectorAll(".filter-btn").forEach(f=>{f.addEventListener("click",()=>{document.querySelectorAll(".filter-btn").forEach(R=>R.classList.remove("selected")),f.classList.add("selected"),a.routeFilter=f.dataset.filter,ze()})})}fe("ddLayers","btnLayers");fe("ddAreas","btnAreas");fe("ddSids","btnSids");fe("dd3dLayers","btn3dLayers");fe("dd3dTools","btn3dTools");document.getElementById("panelLayers")?.addEventListener("click",o=>{o.stopPropagation()});document.getElementById("panelAreas")?.addEventListener("click",o=>{o.stopPropagation()});document.getElementById("panel3dLayers")?.addEventListener("click",o=>{o.stopPropagation()});const Xe=document.getElementById("sectorHeader"),Ie=document.getElementById("sectorOptions");Ie.classList.toggle("open");function Lt(){!Xe||!Ie||(Xe.textContent=Ie.classList.contains("open")?"Sectors ":"Sectors ")}Xe?.addEventListener("click",o=>{o.stopPropagation(),Ie.classList.toggle("open"),Lt()});Ie?.addEventListener("click",o=>{o.stopPropagation()});Lt();No();Lo();ao();uo();Oo();Ao();co();const To=document.querySelector('.filter-btn[data-filter="Arr"]')||document.querySelector('.filter-btn[data-filter="arr"]')||Array.from(document.querySelectorAll(".filter-btn")).find(o=>o.textContent.trim().toLowerCase()==="arr"),je=document.getElementById("sectorOpacity");je?.addEventListener("input",()=>{a.layers.sectorOpacity=parseFloat(je.value),oe()});To?.click();Eo();qe("2d");ze();
